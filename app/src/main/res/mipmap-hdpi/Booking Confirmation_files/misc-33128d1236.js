function toggleMobileNavigation(e){void 0,"active"==e?($("body").removeClass("transform-body"),setTimeout(function(){$(".navbar-toggle, #main-body-wrapper-overlay, .mob-brand").data("navigationis","inactive"),$("body").removeClass("open-mobile-menu"),$(".main-body-wrapper").css({marginTop:0}),window.scrollTo(0,-_scrollPos)},300)):"inactive"==e&&(_scrollPos=-window.pageYOffset,$(".navbar-toggle, #main-body-wrapper-overlay, .mob-brand").data("navigationis","active"),$("body").addClass("open-mobile-menu"),$("body").addClass("transform-body"),$(".main-body-wrapper").css({marginTop:_scrollPos}))}function embed(e,t){if(t){var n=!e.getAttribute("viewBox")&&t.getAttribute("viewBox"),i=document.createDocumentFragment(),a=t.cloneNode(!0);for(n&&e.setAttribute("viewBox",n);a.childNodes.length;)i.appendChild(a.firstChild);e.appendChild(i)}}function loadreadystatechange(e){e.onreadystatechange=function(){if(4===e.readyState){var t=document.createElement("x");t.innerHTML=e.responseText,e.s.splice(0).map(function(e){embed(e[0],t.querySelector("#"+e[1].replace(/(\W)/g,"\\$1")))}),nextXHRQueue()}},e.onreadystatechange()}function svg4everybody(e){function t(){for(var e=document.getElementsByTagName("use"),c=0;c<e.length;c++){var d=e[c],u=e[c].getAttribute("xlink:href").split("#")[0];if(u.length>0){var p=d.parentNode;if(p&&/svg/i.test(p.nodeName)){var f=d.getAttribute("xlink:href");if(i&&n){var h=new Image,g=p.getAttribute("width"),v=p.getAttribute("height");h.src=a(f,p,d),g&&h.setAttribute("width",g),v&&h.setAttribute("height",v),p.replaceChild(h,d)}else if(s&&(!r||r(f,p,d))){var m=f.split("#"),y=m[0],S=m[1];if(p.removeChild(d),y.length){var w=l[y]=l[y]||new XMLHttpRequest;w.s||(w.s=[],w.url_root=y,addToXHRQueue(w)),w.s.push([p,S]),loadreadystatechange(w)}}}}}o(t,34)}e=e||{};var n,i=!1;if(i){var a=e.fallback||function(e){return e.replace(/\?[^#]+/,"").replace("#",".").replace(/^\./,"")+".png"+(/\?[^#]+/.exec(e)||[""])[0]};n="nosvg"in e?e.nosvg:/\bMSIE [1-8]\b/.test(navigator.userAgent),n&&(document.createElement("svg"),document.createElement("use"))}var s="polyfill"in e?e.polyfill:i?n||/\bEdge\/12\b|\bMSIE [1-8]\b|\bTrident\/[567]\b|\bVersion\/7.0 Safari\b/.test(navigator.userAgent)||(navigator.userAgent.match(/AppleWebKit\/(\d+)/)||[])[1]<537:/\bEdge\/12\b|\bTrident\/[567]\b|\bVersion\/7.0 Safari\b/.test(navigator.userAgent)||(navigator.userAgent.match(/AppleWebKit\/(\d+)/)||[])[1]<537,r=e.validate,o=window.requestAnimationFrame||setTimeout,l={};s&&t()}function addToXHRQueue(e){xhrQueue.push(e),1==xhrQueue.length&&nextXHRQueue(e),void 0}function nextXHRQueue(){setTimeout(function(){xhrQueue[0]&&(xhrQueue[0].open&&xhrQueue[0].send&&(xhrQueue[0].open("GET",xhrQueue[0].url_root),xhrQueue[0].send()),xhrQueue.splice(0,1))},99)}function ratingFuncDekstop(){$(".rating-stars").on("mouseenter",function(e){var t=$(this).attr("data-review-id");return"undefined"!=typeof t&&""!=t?void $(document).off("mouseleave",$(this)):(e.preventDefault(),e.stopPropagation(),$(".js-ratingSpan svg").on("mouseenter",function(e){var t=$(this).parents(".rating-stars").attr("data-review-id");if("undefined"!=typeof t&&""!=t)return void $(document).off("mouseleave",$(this));e.preventDefault(),e.stopPropagation();var n=$(this),i=n.parents(".rating-stars"),a=n.parents(".js-ratingSpan"),s=n.parents(".stars");s.nextAll().find(".js-ratingSpan").removeClass("active"),a.nextAll().removeClass("active"),s.prevAll().find(".js-ratingSpan").addClass("active"),a.prevAll().andSelf().addClass("active"),i.find(".js-ratingSpan").not("active").find(use).css({fill:"#e0e0e0"}),i.find(".js-ratingSpan.active").find(use).css({fill:"#f3c600"});var r=a.data("value");i.siblings(".rate-o-meter").html(r),i.siblings(".rate-o-meter").attr("data-value",r)}),void $(".js-ratingSpan svg").on("click",function(e){var t=$(this).parents(".rating-stars").attr("data-review-id");if("undefined"==typeof t||""==t){e.preventDefault();var n=$(this),i=n.parents(".rating-stars"),a=n.parents(".js-ratingSpan"),s=n.parents(".stars");s.nextAll().find(".js-ratingSpan").removeClass("selected"),a.nextAll().removeClass("selected"),i.find(".js-ratingSpan").not("selected").find(use).css({fill:"#e0e0e0"}),s.prevAll().find(".js-ratingSpan").addClass("selected").find(use).css({fill:"#f3c600"}),a.prevAll().andSelf().addClass("selected").find(use).css({fill:"#f3c600"});var r=a.data("value");i.siblings(".rate-o-meter").html(r),i.siblings(".rate-o-meter").attr("data-value",r),$(this).parents(".show-more-info").removeClass("showRating")}}))}),$(".rating-stars").on("mouseleave",function(e){var t=$(this).attr("data-review-id");if("undefined"!=typeof t&&""!=t)return void $(document).off("mouseenter",$(this));e.preventDefault(),e.stopPropagation();var n=$(this),i=n.find(".js-ratingSpan.selected");n.find(".js-ratingSpan").not("selected").removeClass("active").find(use).css({fill:"#e0e0e0"}),n.find(".js-ratingSpan.selected").find(use).css({fill:"#f3c600"});var a=$(i[i.length-1]).data("value");void 0!==a?(n.siblings(".rate-o-meter").html(a),n.siblings(".rate-o-meter").attr("data-value",a)):(n.siblings(".rate-o-meter").attr("data-value",0),n.siblings(".rate-o-meter").html("0.0"))})}function ratingFuncMobile(){$(".rating-stars .js-ratingSpan svg").on("click",function(e){var t=$(this).parents(".rating-stars").attr("data-review-id");if("undefined"==typeof t||""==t){e.preventDefault();var n=$(this),i=n.parents(".rating-stars"),a=n.parents(".js-ratingSpan"),s=n.parents(".stars");s.nextAll().find(".js-ratingSpan").removeClass("selected"),a.nextAll().removeClass("selected"),i.find(".js-ratingSpan").not("selected").find(use).css({fill:"#e0e0e0"}),s.prevAll().find(".js-ratingSpan").addClass("selected").find(use).css({fill:"#f3c600"}),a.prevAll().andSelf().addClass("selected").find(use).css({fill:"#f3c600"});var r=a.data("value");i.siblings(".rate-o-meter").html(r),i.siblings(".rate-o-meter").attr("data-value",r),$(this).parents(".movie-card").find(".show-more-info-overlay").trigger("tap")}})}var BMS={};$.extend(!0,global,{strContentUrl:"//in.bmscdn.com",fbAppId:"165665113451029",strWltAppCode:"WEBWLT2",defImageURL:"",defFirstName:"Guest",strCurrencyCode:"Rs.",strOneCurrencyCode:"Re.",getDataUrl:"/serv/getData",reqRgnArr:["home","movies"],notReqRgnArr:["static"],RgnCallBack:[],SignInCallBack:[],SignOutCallBack:[]},global),BMS={Region:{},Storage:{},Misc:{},SignIn:{},Validate:{},Notifications:{},Header:{},Giftcard:{},Modal:{},Experiences:{},Ratings:{}};var XD=function(){var e,t,n,i=1,a=this;return{postMessage:function(e,t,n){t&&(n=n||parent,a.postMessage?n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+i++ +"&"+e))},receiveMessage:function(i,s){a.postMessage?(i&&(n=function(e){return"string"==typeof s&&e.origin!==s||"[object Function]"===Object.prototype.toString(s)&&s(e.origin)===!1?!1:(i&&i(e),void(i=!1))}),a.addEventListener?a[i?"addEventListener":"removeEventListener"]("message",n,!1):a[i?"attachEvent":"detachEvent"]("onmessage",n)):(e&&clearInterval(e),e=null,i&&(e=setInterval(function(){var e=document.location.hash,n=/^#?\d+&/;e!==t&&n.test(e)&&(t=e,i({data:e.replace(n,"")}))},100)))}}}();"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,a,s,r,o=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,n=0;s>n;n+=1)r[n]=str(n,l)||"null";return a=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+o+"]":"["+r.join(",")+"]",gap=o,a}if(rep&&"object"==typeof rep)for(s=rep.length,n=0;s>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],a=str(i,l),a&&r.push(quote(i)+(gap?": ":":")+a));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(a=str(i,l),a&&r.push(quote(i)+(gap?": ":":")+a));return a=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+o+"}":"{"+r.join(",")+"}",gap=o,a}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,a=e[t];if(a&&"object"==typeof a)for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(i=walk(a,n),void 0!==i?a[n]=i:delete a[n]);return reviver.call(e,t,a)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),BMS.SignIn.CallBackArray={},BMS.SignIn.fnRegUser=function(){try{var e=$("#iRegUserEmail"),t=$("#iRegPwd"),n=$("#iRegCnfPwd");if(!BMS.Validate.email(e.val()))return BMS.Misc.fnSCusErrDisplay("dSignUpErrorEmail","Please enter a valid email address","e"),e.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck("iSignUpParent","iRegUserEmail","iRegPwd","dSignUpErrorEmail","iRegCnfPwd");if(""==$.trim(t.val())||"PASSWORD"==t.val())return BMS.Misc.fnSCusErrDisplay("dSignUpErrorPassword","Please enter a password","e"),t.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck("iSignUpParent","iRegUserEmail","iRegPwd","dSignUpErrorPassword","iRegCnfPwd");if(""==$.trim(n.val())||n.val()!=t.val())return BMS.Misc.fnSCusErrDisplay("dSignUpErrorCnfPassword","Passwords do not match","e"),n.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck("iSignUpParent","iRegUserEmail","iRegPwd","dSignUpErrorCnfPassword","iRegCnfPwd");BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.Misc.fnDoSecureTrans({cmd:"SETPROFILE",p1:"SETPROFILE",p2:"0",p6:t.val(),p10:"|EMAIL="+e.val()+"|",blnSupp:!0,fnCC:function(n){BMS.SignIn.fnAuthUser({id:e.val(),pwd:t.val()}),BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Sign up",{Mode:"BMS login",Appcode:global.strAppCode})},fnEC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Misc.fnSCusErrDisplay("dSignUpError",e,"e")}})}catch(i){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnRegUser",err:i})}},BMS.SignIn.fnValErrorCheck=function(e,t,n,i,a){var s=$("#"+e),r=s.find("#"+t),o=s.find("#"+n),l=$("#"+i),c=void 0;return void 0!==a&&(c=$("#"+a)),$(document).keyup(function(e){27==e.keyCode&&(l.hide(),o.val="",r.val="",o.removeClass("_error"),r.removeClass("_error"),void 0!==c&&(c.val="",c.removeClass("_error")))}),"block"==l.css("display")&&(o.is(":focus")?(o.keypress(function(){l.hide(),o.removeClass("_error")}),r.bind("focus",function(){l.hide(),o.removeClass("_error"),r.unbind("focus")}),void 0!==c&&c.bind("focus",function(){l.hide(),o.removeClass("_error"),c.unbind("focus")})):r.is(":focus")?(r.keypress(function(){l.hide(),r.removeClass("_error")}),o.bind("focus",function(){l.hide(),r.removeClass("_error"),o.unbind("focus")}),void 0!==c&&c.bind("focus",function(){l.hide(),r.removeClass("_error"),c.unbind("focus")})):void 0!==c&&c.is(":focus")&&(c.keypress(function(){l.hide(),c.removeClass("_error")}),o.bind("focus",function(){l.hide(),c.removeClass("_error"),o.unbind("focus")}),r.bind("focus",function(){l.hide(),c.removeClass("_error"),r.unbind("focus")}))),!1},BMS.SignIn.fnValLogIn=function(){try{var e=$("#iUserName"),t=$("#iPwd");if(""==$.trim(e.val())||"Email"==e.val())return BMS.Misc.fnSCusErrDisplay("dSignInErrorEmail","Please enter an email address","e"),e.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck("iUserNameParent","iUserName","iPwd","dSignInErrorEmail");if(!BMS.Validate.email(e.val()))return BMS.Misc.fnSCusErrDisplay("dSignInErrorEmail","Please enter a valid email address","e"),e.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck("iUserNameParent","iUserName","iPwd","dSignInErrorEmail");if(""==$.trim(t.val())||"Password"==t.val())return BMS.Misc.fnSCusErrDisplay("dSignInErrorPassword","Please enter a password","e"),t.addClass("_error").focus(),void BMS.SignIn.fnValErrorCheck("iUserNameParent","iUserName","iPwd","dSignInErrorPassword");BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.Misc.fnGATracker({location:"SignInBox",action:"SignIn"}),BMS.SignIn.fnAuthUser({id:e.val(),pwd:t.val(),type:"logIn"})}catch(n){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnValLogIn",err:n})}},BMS.SignIn.fnAuthUser=function(e){try{var t=void 0!=e&&void 0!=e.id&&""!=e.id?e.id:$("#iUserName").val(),n=void 0!=e&&void 0!=e.pwd&&""!=e.id?e.pwd:$("#iPwd").val();void 0!=e&&void 0!=e.type&&""!=e.type?e.type:"";BMS.Misc.fnDoSecureTrans({cmd:"SIGNIN",p1:t,p2:n,blnSupp:!0,fnCC:BMS.SignIn.fnAfterAuth,fnEC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Misc.fnSCusErrDisplay("dSignInErrorPassword",e,"e")}})}catch(i){BMS.Misc.fnErr({fnName:"BMS.Signin.fnAuthUser",fnParams:e,err:i})}},BMS.SignIn.fnAfterAuth=function(e){try{var t=t||[];t.push(["uid",BMS.Misc.fnGVal({key:"MEMBERID",data:e})]),t.push(["email",BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:e})]),"undefined"!=typeof wzrk_push&&wzrk_push(t),"undefined"!=typeof _kmq&&(_kmq.push(["identify",BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:e})]),_kmq.push(["alias",BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:e}),BMS.Misc.fnGVal({key:"MEMBERID",data:e})])),BMS.Storage.set({name:"kmqIdentity",value:BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:e}),sess:!1,expires:"Thu, 31 Dec 2099 23:59:59 GMT",storage:"C"}),e=unescape(e);var n=BMS.Misc.fnGVal({key:"MEMBEREMAIL",data:e}),i=BMS.Misc.fnGVal({key:"EXPIRY",data:e});BMS.Storage.set({name:"le",value:n,sess:!1,storage:"C"}),BMS.Storage.set({name:"ld",value:e,sess:!1,expires:new Date(i).toGMTString(),storage:"C"}),BMS.Storage.set({name:"userCine",value:BMS.Misc.fnGVal({key:"FAV",data:e}),key:"fav",storage:"C"}),BMS.Storage.set({name:"ld",value:BMS.Misc.fnGVal({key:"NAME",data:e}),key:"FIRSTNAME",sess:!1,expires:new Date(i).toGMTString(),storage:"C"}),BMS.Storage.set({name:"ld",key:"LASTLOGIN",value:(new Date).toISOString(),storage:"C",sess:!1}),BMS.SignIn.fnGUserImage();var a=BMS.Storage.get({name:"ld",key:"FIRSTNAME",defVal:""});""==$.trim(a)&&(a="Guest"),$("#memberName strong").html(BMS.Misc.fnCapitalName(a)),BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Misc.modal("signinPopup",!1);var s=""!=BMS.Misc.fnGVal({key:"NAME",data:BMS.Storage.get({name:"ld"})})?BMS.Misc.fnGVal({key:"NAME",data:BMS.Storage.get({name:"ld"})}):"Guest";$("#dAfterSignInSuccess #spnUName").html(s),setTimeout(function(){BMS.Misc.modal("dAfterSignInSuccess",!0)},300),setTimeout(function(){BMS.Misc.modal("dAfterSignInSuccess",!1),BMS.SignIn.fnClose({callBack:!0})},2500)}catch(r){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnAfterAuth",err:r})}},BMS.SignIn.fnClose=function(e){try{if(e&&1==e.callBack&&void 0!=global.SignInCallBack&&global.SignInCallBack.length>0)for(var t=0;t<global.SignInCallBack.length;t++)global.SignInCallBack[t].apply();BMS.SignIn.fnApplyCallbacks(),BMS.Misc.fnGATracker({location:"SignInBox",action:"NoThanks"}),void 0!=global.SignInCallBack&&global.SignInCallBack.splice(global.SignInCallBack.length-1,1),void 0!=global.SignOutCallBack&&global.SignOutCallBack.splice(global.SignOutCallBack.length-1,1)}catch(n){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnClose",fnParams:e,err:n})}},BMS.SignIn.fnLogOut=function(){try{var e=BMS.Storage.get({name:"fbsr_"+global.fbAppId});""!=e&&BMS.Storage.del({name:"fbsr_"+global.fbAppId}),BMS.Misc.fnBusy(!0);var t=BMS.Storage.get({name:"ld",key:"LSID",defVal:""}),n=BMS.Storage.get({name:"ld",key:"SEQUENCE",defVal:""}),i=BMS.Storage.get({name:"ld",key:"MEMBERID",defVal:""});BMS.Misc.fnDoSecureTrans({cmd:"SIGNOUT",p1:i,p2:n,p3:t,blnSupp:!0,fnCC:function(){if("undefined"!=typeof gapi&&gapi.auth.signOut(),BMS.Storage.del({name:"ld"}),BMS.Storage.del({name:"wd"}),BMS.Storage.del({name:"isOtpGenerated"}),BMS.Storage.del({name:"PLUSIMAGEURL"}),BMS.Storage.set({name:"userCine",key:"RL",value:"",sess:!1,storage:"C"}),void 0!=global.SignOutCallBack&&global.SignOutCallBack.length>0)for(var e=0;e<global.SignOutCallBack.length;e++)global.SignOutCallBack[e].apply();"undefined"!=typeof _kmq&&_kmq.push(["clearIdentity"]),BMS.Storage.del({name:"kmqIdentity"}),BMS.Misc.fnBusy(!1),$(".select-overlay").click()},fnEC:function(){if("undefined"!=typeof gapi&&gapi.auth.signOut(),BMS.Storage.del({name:"ld"}),BMS.Storage.del({name:"wd"}),BMS.Storage.del({name:"isOtpGenerated"}),BMS.Storage.del({name:"PLUSIMAGEURL"}),BMS.Storage.set({name:"userCine",key:"RL",value:"",sess:!1,storage:"C"}),void 0!=global.SignOutCallBack&&global.SignOutCallBack.length>0)for(var e=0;e<global.SignOutCallBack.length;e++)global.SignOutCallBack[e].apply();"undefined"!=typeof _kmq&&_kmq.push(["clearIdentity"]),BMS.Storage.del({name:"kmqIdentity"}),BMS.Misc.fnBusy(!1),$(".select-overlay").click()}}),$("#loggedInImg").attr("src",""),$("#signInUName strong").html(""),$("#preSignIn").parent().removeClass("_logged"),$("#postSignIn").hide(),$("#preSignIn").show()}catch(a){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnLogOut",fnParams:arguments,err:a})}},BMS.SignIn.fnResetPwd=function(){try{var e=$("#iForgotEmail"),t=$("#dForgotError");if(""==e.val())return BMS.Misc.fnSCusErrDisplay("dForgotError","Please enter your email address to reset your password","e"),e.addClass("_error").focus(),void("block"==t.css("display")&&e.is(":focus")&&(e.keypress(function(){t.hide(),e.removeClass("_error")}),$(document).keyup(function(n){27==n.keyCode&&(t.hide(),e.val="",e.removeClass("_error"))})));if(!BMS.Validate.email(e.val()))return BMS.Misc.fnSCusErrDisplay("dForgotError","Please enter a valid email address","e"),e.addClass("_error").focus(),void("block"==t.css("display")&&e.is(":focus")&&(e.keypress(function(){t.hide(),e.removeClass("_error")}),$(document).keyup(function(n){27==n.keyCode&&(t.hide(),e.val="",e.removeClass("_error"))})));BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.Misc.fnDoSecureTrans({cmd:"SENDRESETPASSWORDURL",p1:e.val(),blnSupp:!0,fnCC:function(){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Misc.fnSCusErrDisplay("dForgotError","Password reset link is emailed successfully","s")},fnEC:function(e){BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Misc.fnSCusErrDisplay("dForgotError",e,"e")}})}catch(n){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResetPwd",err:n})}},BMS.SignIn.fnFbWrapper=function(){try{return BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),void BMS.SignIn.fnFbLogin()}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbWrapper",fnParams:arguments,err:e})}},BMS.SignIn.fnGPlusWrapper=function(){try{BMS.Misc.fnBusy(!0,BMS.Modal.currentModal),BMS.SignIn.fnGPlusSignIn()}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGPlusLogin",err:e})}},BMS.SignIn.fnValRes=function(){try{var e=$("#iResendConfEmail"),t=$("#iResendConfMobile");if(""==e.val())return BMS.Misc.ErrDisplay("errDivFRGEmail","Please enter an email address","e"),e.addClass("_error").focus(),$("#iResendConfEmail").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGEmail");if(!BMS.Validate.email(e.val()))return BMS.Misc.ErrDisplay("errDivFRGEmail","Please enter a valid email address","e"),e.addClass("_error").focus(),$("#iResendConfEmail").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGEmail");if(""==t.val())return BMS.Misc.ErrDisplay("errDivFRGMobile","Please enter a mobile number","e"),t.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGMobile");if(!BMS.Validate.mob(t.val()))return BMS.Misc.ErrDisplay("errDivFRGMobile","Please enter a valid mobile number","e"),t.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGMobile");if(t.val().length<10)return BMS.Misc.ErrDisplay("errDivFRGMobile","Please enter a valid mobile number","e"),t.addClass("_error").focus(),$("#iResendConfMobile").focus(),void BMS.SignIn.fnValErrorCheck("errDivFRGParent","iResendConfEmail","iResendConfMobile","errDivFRGMobile");$("#iResendConfEmail, #iResendConfMobile").attr("disabled","disabled"),$("#btnRes").hide(),$("#btndisab").show(),BMS.Misc.fnDoTrans({cmd:"RESENDCONFIRMATIONMAIL",p2:e.val(),p3:t.val(),fnCC:BMS.SignIn.fnResendSuc,fnEC:BMS.SignIn.fnResendFail,blnSupp:!0})}catch(n){BMS.Misc.fnErr({fnName:"BMS.Misc.fnValRes",err:n})}},BMS.SignIn.fnResendSuc=function(e){try{$("#btnRes").show(),$("#btndisab").hide(),$("iResendConfEmail").val(""),$("iResendConfMobile").val(""),$("#iResendConfEmail, #iResendConfMobile").removeAttr("disabled"),$("#errDivFRG").addClass("_success"),$("#resendCofirmationPopup").show(),$("#iResendConfEmail,#iResendConfMobile").val(""),$("#resendCofirmationPopup").addClass("animateTop"),$(".popup-overlay").fadeIn(200),$(".main").addClass("make-blur"),$("body").addClass("_fixed"),BMS.Misc.ErrDisplay("errDivFRG","Confirmation sent successfully!","")}catch(t){fnErr({fnName:"BMS.SignIn.fnResendSuc",fnParams:e,err:t})}},BMS.SignIn.fnResendFail=function(e){try{$("#btnRes").show(),$("#btndisab").hide(),$("#iResendConfEmail, #iResendConfMobile").removeAttr("disabled"),$("#resendCofirmationPopup").show(),$("#iResendConfEmail,#iResendConfMobile").val(""),$("#resendCofirmationPopup").addClass("animateTop"),$(".popup-overlay").fadeIn(200),$(".main").addClass("make-blur"),$("body").addClass("_fixed"),""!=e&&void 0!=e?BMS.Misc.ErrDisplay("errDivFRG",e,"e"):BMS.Misc.ErrDisplay("errDivFRG","Sorry, something went wrong here. Try again after some time! .","e")}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResendFail",fnParams:e,err:t})}},BMS.SignIn.fnDoSubMailErrorCheck=function(e,t,n){var i=$("#"+e),a=i.find("#"+t),s=$("#"+n);"block"==s.css("display")&&a.is(":focus")&&(a.keypress(function(){s.hide(),a.removeClass("_error")}),$(document).keyup(function(e){27==e.keyCode&&(s.hide(),a.removeClass("_error"),a.val="")}))},BMS.SignIn.fnDoSubMail=function(){try{var e=$("#subEmailmob"),t="",n="";if(""==e.val())return BMS.Misc.ErrDisplay("errDivSUB","Please enter a valid mobile number or email address","e"),e.addClass("_error").focus(),void BMS.SignIn.fnDoSubMailErrorCheck("subEmailmobParent","subEmailmob","errDivSUB");if(e.val($.trim(e.val()).replace(/[ ]+/gi,"")),isNaN(e.val())){if(t="|EMAIL="+e.val()+"|",!BMS.Validate.email(e.val()))return BMS.Misc.ErrDisplay("errDivSUB","Please enter a valid email address","e"),e.addClass("_error").focus(),void BMS.SignIn.fnDoSubMailErrorCheck("subEmailmobParent","subEmailmob","errDivSUB");n="EMAIL"}else{if(t="|MOBILENO="+e.val()+"|",!BMS.Validate.mob(e.val()))return BMS.Misc.ErrDisplay("errDivSUB","Please enter a valid mobile number","e"),e.addClass("_error").focus(),void BMS.SignIn.fnDoSubMailErrorCheck("subEmailmobParent","subEmailmob","errDivSUB");n="MOBILE"}BMS.Misc.fnBusy(!0),BMS.Misc.fnDoTrans({cmd:"SETPROFILE",p1:"NEWSLETTER",p2:"0",p10:t,fnCC:function(t){BMS.Misc.modal("subscribeNewsletters",!1),$("#popover-rating-msg").html("Thank you for registering. Look forward to your weekly alerts!"),BMS.Misc.modal("review-rating-response",!0),"EMAIL"==n?BMS.Storage.set({name:"EMAILSUBSCRIPTION",value:"Y",storage:"C"}):"MOBILE"==n&&$("#MOBSUBY").length>0&&e.val()==$("#acntDtls #mobile").val()&&BMS.Storage.set({name:"MOBILESUBSCRIPTION",value:"Y",storage:"C"}),e.val(""),BMS.Misc.fnBusy(!1)},fnEC:function(e){BMS.Misc.fnBusy(!1)}})}catch(i){BMS.Misc.fnErr({fnName:"fnDoSubMail",fnParams:arguments,err:i})}},BMS.Misc.ErrDisplay=function(e,t,n){try{$("#"+e).text(t),$("#"+e).show()}catch(i){BMS.Misc.fnErr({fnName:"BMs.Misc.fnSCusErrDisplay",fnParams:e+", "+t+", "+n,err:i})}},BMS.SignIn.fnGUserImage=function(){try{if(BMS.Storage.isset({name:"ld"})){var e="Y"==BMS.Storage.get({name:"ld",key:"ISFCONNECTLOGIN"})?!0:!1,t="Y"==BMS.Storage.get({name:"ld",key:"ISPLUSLOGIN"})?!0:!1,n={};n=e?{SOCIALID:"FB"}:t?{SOCIALID:"PLUS"}:{SOCIALID:"EMAIL"},BMS.Misc.fnGetUserImage(n,function(e){var t=BMS.Storage.get({name:"ld",key:"FIRSTNAME"}),i=BMS.Storage.get({name:"ld",key:"LASTNAME"}),a=t+" "+i;$("#loggedInImg").attr("src",e),$("#signInUName strong").html(a),"undefined"!=typeof pageName&&"myprofile"==pageName&&(BMS.SignIn.UserInfo={strLoginType:n.SOCIALID,strImageURL:e}),$("#preSignIn").is(":visible")&&($("#preSignIn").parent().addClass("_logged"),$("#preSignIn").hide(),$("#postSignIn").css("display","block"))})}}catch(i){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnCheckLogin",fnParams:strData,err:i})}},BMS.SignIn.fnSignIn=function(e){try{e?BMS.Misc.modal("signinPopup",!0):BMS.Misc.modal("signinPopup",!1)}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnSignIn",fnParams:e,err:t})}},BMS.SignIn.fnRegister=function(e,t){try{BMS.SignIn.CallBackArray[e]=t}catch(n){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnRegister",fnParams:e,err:n})}},BMS.SignIn.fnUnregister=function(e){try{-1!=Object.keys(BMS.SignIn.CallBackArray).indexOf(e)&&delete BMS.SignIn.CallBackArray[e]}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnRegister",fnParams:e,err:t})}},BMS.SignIn.fnApplyCallbacks=function(){try{Object.keys(BMS.SignIn.CallBackArray).length>0&&$.each(BMS.SignIn.CallBackArray,function(e,t){t.apply()})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnApplyCallbacks",err:e})}},BMS.SignIn.fnResetPassword=function(){try{var e=$.trim($("#npwd").val()),t=$.trim($("#cnpwd").val());if(""==e)return BMS.Misc.fnSCusErrDisplay("RP_Err","Please Enter a Password.","e"),void $("#npwd").focus();if(e.toLowerCase()==$.trim($("#npwd").attr("placeholder")).toLowerCase())return BMS.Misc.fnSCusErrDisplay("RP_Err","Please Enter a valid Password.","e"),void $("#npwd").focus();if(e.length<7)return BMS.Misc.fnSCusErrDisplay("RP_Err","Password must be greater than 7 charecters.","e"),void $("#npwd").focus();if(-1==e.search(/[0-9]+/)||-1==e.search(/[A-Z]+/)&&-1==e.search(/[a-z]+/))return BMS.Misc.fnSCusErrDisplay("RP_Err","Password should contain both alphabets and numbers.","e"),void $("#npwd").focus();if(""==t)return BMS.Misc.fnSCusErrDisplay("RP_Err","Please Enter a Confirm Password.","e"),void $("#cnpwd").focus();if(t.toLowerCase()==$.trim($("#cnpwd").attr("placeholder")).toLowerCase())return BMS.Misc.fnSCusErrDisplay("RP_Err","Please Enter a valid Confirm Password.","e"),void $("#cnpwd").focus();if(t.length<7)return BMS.Misc.fnSCusErrDisplay("RP_Err","Confirm Password must be greater than 7 charecters.","e"),void $("#cnpwd").focus();if($.trim(e.toLowerCase())!=$.trim(t.toLowerCase()))return void BMS.Misc.fnSCusErrDisplay("RP_Err","New Password and Confirm New Password doesn't match.","e");BMS.Misc.fnBusy(!0,$resendTabs),BMS.Misc.fnDoSecureTrans({cmd:"RESETPASSWORD",p1:rstPwdData,p2:e,p3:"|AUTOLOGIN="+autoLogin+"|",blnSupp:!0,fnCC:function(e){BMS.Misc.fnBusy(!1,$resendTabs),$("#npwd").val(""),$("#cnpwd").val(""),"Y"==autoLogin?(BMS.SignIn.fnAfterAuth(e),BMS.Misc.fnSCusErrDisplay("RP_Err","Your password has been successfully updated and you have been logged in.",""),window.location.href="/myprofile/"):BMS.Misc.fnSCusErrDisplay("RP_Err","Your password has been successfully updated.","")},fnEC:function(e){BMS.Misc.fnBusy(!1,$resendTabs),$("#npwd").val(""),$("#cnpwd").val(""),BMS.Misc.fnSCusErrDisplay("RP_Err",unescape(e),"e")}})}catch(n){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnResetPassword",err:n})}},$(document).ready(function(){BMS.SignIn.fnGUserImage(),$("#iUserName, #iPwd").doEnter({callback:BMS.SignIn.fnValLogIn}),$("#iRegCnfPwd, #iRegUserEmail, #iRegPwd").doEnter({callback:BMS.SignIn.fnRegUser}),$("#iForgotEmail").doEnter({callback:BMS.SignIn.fnResetPwd}),BMS.Misc.fnGetSocialKeys()}),BMS.SignIn.fnFbGetLoginStatus=function(){try{FB.getLoginStatus(function(e){"connected"===e.status&&(global.lngFBAT=e.authResponse.accessToken,global.strFBProfileURL=e.authResponse.userID,BMS.SignIn.fnFbGetMemberDetails())})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbGetLoginStatus",err:e})}},BMS.SignIn.fnFbLogin=function(){try{FB.login(function(e){e.authResponse?(global.lngFBAT=e.authResponse.accessToken,global.strFBProfileURL=e.authResponse.userID,BMS.SignIn.fnFbGetMemberDetails(),BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Sign up",{Mode:"Facebook",Appcode:global.strAppCode})):(void 0,BMS.Misc.fnBusy(!1,BMS.Modal.currentModal))},{scope:global.FBPriviledges,return_scopes:!0})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbLogin",err:e})}},BMS.SignIn.fnFbGetMemberDetails=function(){try{FB.api("/me",function(e){var t="";"undefined"!=typeof BMS.SignIn.SocialConnect&&"FB"==BMS.SignIn.SocialConnect&&(t="|MEMBEREMAIL="+BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"})+"|LSID="+BMS.Storage.get({name:"ld",key:"LSID"})+"|"),BMS.Misc.fnDoSecureTrans({cmd:"SAVEUSERSOCIALMEDIADETAILS",p1:"FB",p2:"|FBAT="+global.lngFBAT+"|",p3:t,blnSupp:!1,fnCC:function(e){BMS.SignIn.fnAfterAuth(e)},fnEC:function(e){BMS.Misc.fnBusy(!1)}})})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnFbGetMemberDetails",err:e})}},window.___gcfg={lang:"en-US",parsetags:"explicit"},BMS.SignIn.fnGPlusSignIn=function(){try{gapi.auth.authorize({client_id:global.plusAppId,scope:global.plusPrivileges,immediate:!1},function(e){if(e.status.signed_in){var t=e.access_token;BMS.SignIn.fnGetGPlusUserDetails(function(e){e.lngGPlusAT=t,BMS.SignIn.fnGetSocialDetailsFromIS(e),BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Sign up",{Mode:"Google Plus",Appcode:global.strAppCode})})}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGPlusSignIn",err:e})}},BMS.SignIn.fnGetGPlusUserDetails=function(e){try{gapi.client.load("plus","v1",function(){var t=gapi.client.plus.people.get({userId:"me",key:""});t.execute(function(t){var n={imgUrl:"undefined"!=typeof t&&"undefined"!=typeof t.image?t.image.url:""};e(n)})})}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnGetGPlusUserDetails",err:t})}},BMS.SignIn.fnCallToGetGPlusUserDetails=function(e){try{BMS.Misc.fnAjax({url:"https://www.googleapis.com/plus/v1/people/me",data:"access_token="+BMS.Misc.fnGVal({key:"PLUSACCESSTOKEN",data:BMS.Storage.get({name:"ld"})}),type:"GET",success:function(t){e(""!=t.image.url?t:null)},error:function(t,n,i){e(null)}})}catch(t){BMS.Misc.fnErr({fnName:"BMS.SignIn.fnCallToGetGPlusUserDetails",err:t})}},BMS.SignIn.fnGetSocialDetailsFromIS=function(e){try{var t="";"undefined"!=typeof BMS.SignIn.SocialConnect&&"PLUS"==BMS.SignIn.SocialConnect&&(t="|MEMBEREMAIL="+BMS.Storage.get({name:"ld",key:"MEMBEREMAIL"})+"|LSID="+BMS.Storage.get({name:"ld",key:"LSID"})+"|"),BMS.Misc.fnDoSecureTrans({cmd:"SAVEUSERSOCIALMEDIADETAILS",p1:"PLUS",p2:"|PLUSAT="+e.lngGPlusAT+"|",p3:t,blnSupp:!1,fnCC:function(e){BMS.SignIn.fnAfterAuth(e)},fnEC:function(e){BMS.Misc.fnBusy(!1)}})}catch(n){BMS.Misc.fnErr({
fnName:"BMS.SignIn.fnGetSocialDetailsFromIS",err:n})}},BMS.Storage={_defaults:{name:"",key:"",value:"",storage:"L",sess:!0,path:"/",defVal:"",expires:"Thu, 31 Dec 2020 23:59:59 GMT"}},BMS.Storage.get=function(e){try{var t=(void 0!=e&&void 0!=e.name&&""!=e.name?e.name:BMS.Storage._defaults.name,void 0!=e&&void 0!=e.defVal&&""!=e.defVal?e.defVal:BMS.Storage._defaults.defVal),n=e.name,i=e.name+"=",a=document.cookie,s=-1,r=-1,o="";return"undefined"!=typeof localStorage&&null!=localStorage.getItem(n)?o=localStorage.getItem(n):a.length>0&&-1!=a.indexOf(i)?(s=a.indexOf(i),s+=i.length,r=a.indexOf(";",s),r=-1==r?a.length:r,o=a.substring(s,r)):"undefined"!=typeof sessionStorage&&null!=sessionStorage.getItem(n)&&(o=sessionStorage.getItem(n)),o=decodeURIComponent(o),"undefined"!=typeof e&&""!=e.key&&"undefined"!=typeof e.key&&(o=BMS.Misc.fnGVal({key:e.key,data:o,defVal:t})),o}catch(l){BMS.Misc.fnErr({fnName:"BMS.Storage.get",fnParams:e,err:l})}},BMS.Storage.set=function(e){try{var t=void 0!=e.name&&""!=e.name?e.name:BMS.Storage._defaults.name,n=void 0!=e.key&&""!=e.key?e.key:BMS.Storage._defaults.key,i=void 0!=e.value&&""!=e.value?e.value:BMS.Storage._defaults.value,a=void 0!=e.storage&&""!=e.storage?e.storage:BMS.Storage._defaults.storage,s=void 0!=e.sess?e.sess:BMS.Storage._defaults.sess,r=void 0!=e.expires&&""!=e.expires?e.expires:BMS.Storage._defaults.expires,o=void 0!=e.path&&""!=e.path?e.path:BMS.Storage._defaults.path;if(a=a.toUpperCase(),""!=n){for(var l,c=BMS.Storage.get({name:t}),d=c.split("|"),u=new Array,p=0;p<d.length;p++)""!=d[p]&&(l=d[p].split("="),l[0]!=n&&u.push(new Array(l[0],l[1])));var f="";f+="|"+n+"="+i;for(var h=0;h<u.length;h++)f+="|"+u[h][0]+"="+u[h][1];f+="|",i=f}i=encodeURIComponent(i),""==a||"L"==a?"undefined"!=typeof localStorage?localStorage.setItem(t,i):document.cookie=escape(t)+"="+i+(s?"":"; expires="+r)+"; path="+o:"C"==a?document.cookie=escape(t)+"="+i+(s?"":"; expires="+r)+"; path="+o:"S"==a&&("undefined"!=typeof sessionStorage?sessionStorage.setItem(t,i):document.cookie=escape(t)+"="+i+(s?"":"; expires="+r)+"; path="+o)}catch(g){BMS.Misc.fnErr({fnName:"BMS.Storage.set",fnParams:e,err:g})}},BMS.Storage.isset=function(e){try{var t="undefined"!=typeof e.name&&""!=e.name?e.name:BMS.Storage._defaults.name,n="undefined"!=typeof e.key&&""!=e.key?e.key:BMS.Storage._defaults.key,i=""!=BMS.Storage.get({name:t})?!0:!1;if(i){if(""!=n){var a=BMS.Storage.get({name:t});return""!=BMS.Misc.fnGVal({key:n,data:a})?!0:!1}return!0}return!1}catch(s){BMS.Misc.fnErr({fnName:"BMS.Storage.isset",fnParams:e,err:s})}},BMS.Storage.del=function(e){try{var t="undefined"!=typeof e.name&&""!=e.name?e.name:BMS.Storage._defaults.name,n="undefined"!=typeof e.path&&""!=e.path?e.path:BMS.Storage._defaults.path,i=document.cookie;"undefined"!=typeof localStorage&&null!=localStorage.getItem(t)?localStorage.removeItem(t):-1!=i.indexOf(t+"=")?document.cookie=escape(t)+"=; expires=Thu, 01 Jan 2012 00:00:01 GMT; path="+n:"undefined"!=typeof sessionStorage&&null!=sessionStorage.getItem(t)&&sessionStorage.removeItem(t)}catch(a){BMS.Misc.fnErr({fnName:"BMS.Storage.del",fnParams:e,err:a})}},BMS.Misc.fnAjax=function(e){try{var t=void 0!=e.async&&""!=e.async?e.async:!0,n=void 0!=e.beforeSend&&""!=e.beforeSend?e.beforeSend:"",i=void 0!=e.cache&&""!=e.cache?e.cache:!0,a=void 0!=e.contentType&&""!=e.contentType?e.contentType:"application/x-www-form-urlencoded; charset=UTF-8",s=void 0!=e.data&&""!=e.data?e.data:"",r=void 0!=e.dataType&&""!=e.dataType?e.dataType:"",o=void 0!=e.error&&""!=e.error?e.error:!1,l=(void 0!=e.suppress&&""!=e.suppress?e.suppress:!1,{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-store",Connection:"close"});l=void 0!=e.headers&&""!=e.headers?$.extend(l,e.headers):l;var c=void 0!=e.success&&""!=e.success?e.success:!1,d=void 0!=e.timeout&&""!=e.timeout?e.timeout:3e5,u=void 0!=e.type&&""!=e.type?e.type:"GET",p=e.url;$.support.cors=!0,$("#glErrDiv").is(":visible")&&"CANCELTRANS"!=s.c&&$("#glErrDiv").hide(),$.ajax({async:t,beforesend:n,cache:i,contentType:a,data:s,dataType:r,error:function(e,t,n){0!=e.status&&o(e,t,n)},headers:l,success:function(e){c&&c(e)},timeout:d,type:u,url:p})}catch(f){BMS.Misc.fnErr({fnName:"BMS.Misc.fnAjax1",fnParams:e,err:f})}},BMS.Misc.fnDoTrans=function(e){try{var t=void 0!=e.AppC&&""!=e.AppC?e.AppC:global.strAppCode,n=void 0!=e.venCode&&""!=e.venCode?e.venCode:"",i=void 0!=e.transId&&""!=e.transId?e.transId:0,a=void 0!=e.cmd&&""!=e.cmd?e.cmd:"",s=void 0!=e.p1&&""!=e.p1?e.p1:"",r=void 0!=e.p2&&""!=e.p2?e.p2:"",o=void 0!=e.p3&&""!=e.p3?e.p3:"",l=void 0!=e.p4&&""!=e.p4?e.p4:"",c=void 0!=e.p5&&""!=e.p5?e.p5:"",d=void 0!=e.p6&&""!=e.p6?e.p6:"",u=void 0!=e.p7&&""!=e.p7?e.p7:"",p=void 0!=e.p8&&""!=e.p8?e.p8:"",f=void 0!=e.p9&&""!=e.p9?e.p9:"",h=void 0!=e.p10&&""!=e.p10?e.p10:"",g=void 0!=e.fnCC?e.fnCC:!1,v=void 0!=e.fnEC?e.fnEC:!1,m=void 0!=e.ccObj?e.ccObj:!1,y=void 0!=e.ecObj?e.ecObj:!1,S=void 0!=e.blnSupp?e.blnSupp:!1,w="strCommand: "+a+", strAppCode: "+t+", strVenueCode:"+n+", lngTransId:"+i+", strParam1: "+s+", strParam2: "+r+", strParam3: "+o+", strParam4:"+l+", strParam5:"+c+", strParam6:"+d+", strParam7:"+u+", strParam8:"+p+", strParam9: "+f+", strParam10: "+h+", blnSuppress: "+S;$("#glErrDiv").is(":visible")&&"CANCELTRANS"!=a&&$("#glErrDiv").hide(),BMS.Misc.fnAjax({data:{a:t,v:n,t:i,c:a,p1:s,p2:r,p3:o,p4:l,p5:c,p6:d,p7:u,p8:p,p9:f,p10:h},dataType:"xml",error:function(e,t,n){S||(BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:"Sorry, There is a problem with the internet connection. Please try after some time.",eCode:e.status,eCmd:w,eRFn:"function: BMS.Misc.fnDoTrans"}))},success:function(e){for(var t={},n=$(e).find("objExecuteResult").children().length,i=0;n>i;i++){var a=$(e).find("objExecuteResult").children().eq(i);t[a.get(0).nodeName]=a.text()}"true"==t.blnSuccess?g&&g(m?t:t.strData):(S||(BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:t.strException,eCode:t.intExceptionEx,eCmd:w,eRFn:"function: BMS.Misc.fnDoTrans"})),v&&v(y?t:t.strException))},suppress:S,type:"POST",url:"https:"==location.protocol||1==e.secure?"/serv/doSecureTrans.bms":"/serv/doTrans.bms"})}catch(b){BMS.Misc.fnErr({fnName:"BMS.Misc.fnDoTrans",fnParams:e,err:b})}},BMS.Misc.fnDoSecureTrans=function(e){try{var t=void 0!=e.AppC&&""!=e.AppC?e.AppC:global.strAppCode,n=void 0!=e.venCode&&""!=e.venCode?e.venCode:"",i=void 0!=e.transId&&""!=e.transId?e.transId:0,a=void 0!=e.cmd&&""!=e.cmd?e.cmd:"",s=void 0!=e.p1&&""!=e.p1?e.p1:"",r=void 0!=e.p2&&""!=e.p2?e.p2:"",o=void 0!=e.p3&&""!=e.p3?e.p3:"",l=void 0!=e.p4&&""!=e.p4?e.p4:"",c=void 0!=e.p5&&""!=e.p5?e.p5:"",d=void 0!=e.p6&&""!=e.p6?e.p6:"",u=void 0!=e.p7&&""!=e.p7?e.p7:"",p=void 0!=e.p8&&""!=e.p8?e.p8:"",f=void 0!=e.p9&&""!=e.p9?e.p9:"",h=void 0!=e.p10&&""!=e.p10?e.p10:"",g=(void 0!=e.type&&""!=e.type?e.type:"",void 0!=e.fnCC?e.fnCC:!1),v=void 0!=e.fnEC?e.fnEC:!1,m=void 0!=e.ccObj?e.ccObj:!1,y=void 0!=e.ecObj?e.ecObj:!1,S=void 0!=e.blnSupp?e.blnSupp:!1,w="strCommand: "+a+", strAppCode: "+t+", strVenueCode:"+n+", lngTransId:"+i+", strParam1:"+s+", strParam2: "+r+", strParam3: "+o+", strParam4:"+l+", strParam5:"+c+", strParam6:"+d+", strParam7:"+u+", strParam8:"+p+", strParam9: "+f+", strParam10: "+h+", blnSuppress: "+S,b=location.protocol+"//"+location.host,M="a="+encodeURIComponent(t)+"&v="+encodeURIComponent(n)+"&t="+encodeURIComponent(i)+"&c="+encodeURIComponent(a)+"&p1="+encodeURIComponent(s)+"&p2="+encodeURIComponent(r)+"&p3="+encodeURIComponent(o)+"&p4="+encodeURIComponent(l)+"&p5="+encodeURIComponent(c)+"&p6="+encodeURIComponent(d)+"&p7="+encodeURIComponent(u)+"&p8="+encodeURIComponent(p)+"&p9="+encodeURIComponent(f)+"&p10="+encodeURIComponent(h),C=b+"/serv/doSecureTrans.bms",k=BMS.Misc.fnBrowsVer();if(8>k)C=C+"?"+M,fnData=function(e){var t=$.parseXML(e.response),n=$(t).find("strData").text();if("true"==$(t).find("blnSuccess").text())g&&g(m?n:n);else{if(!S){$(t).find("strException").text(),$(t).find("intExceptionEx").text();BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:n.strException,eCode:n.intExceptionEx,eCmd:w,eRFn:"function: BMS.Misc.fnDoSecureTrans"})}v&&v(y?n:$(t).find("strException").text())}},$.getScript(C+"&type=jsonp&callback=fnData");else{var _=$("#xd_form");0==_.length&&(_=$("<form style='display:none;' id='xd_form' action='"+C+"?type=iframe#"+encodeURIComponent(document.location.href)+"' method='POST' enctype='multipart/form-data' target='xd_frame'></form>"),$("body").append(_)),_.html("");var x="<input type='hidden' name='a' value='"+t+"' />";x+="<input type='hidden' name='v' value='"+n+"' />",x+="<input type='hidden' name='t' value='"+i+"' />",x+="<input type='hidden' name='c' value='"+a+"' />",x+="<input type='hidden' name='p1' value='"+s+"' />",x+="<input type='hidden' name='p2' value='"+r+"' />",x+="<input type='hidden' name='p3' value='"+o+"' />",x+="<input type='hidden' name='p4' value='"+l+"' />",x+="<input type='hidden' name='p5' value='"+c+"' />",x+="<input type='hidden' name='p6' value='"+d+"' />",x+="<input type='hidden' name='p7' value='"+u+"' />",x+="<input type='hidden' name='p8' value='"+p+"' />",x+="<input type='hidden' name='p9' value='"+f+"' />",x+="<input type='hidden' name='p10' value='"+h+"' />",_.html(x);var E=$("#xd_frame");0==E.length&&(E=$('<iframe id="xd_frame" name="xd_frame" style="display:none;"></iframe>'),$("body").append(E)),_.submit(),XD.receiveMessage(function(e){for(var t=$.parseXML($.parseJSON(e.data).response),n={},i=$(t).find("objExecuteResult").children().length,a=0;i>a;a++){var s=$(t).find("objExecuteResult").children().eq(a);n[s.get(0).nodeName]=s.text()}if("true"==n.blnSuccess)g&&g(m?n:n.strData);else{if(!S){n.strException,n.intExceptionEx;BMS.Misc.fnBusy(!1),BMS.Misc.fnGlobalErr({eMess:n.strException,eCode:n.intExceptionEx,eCmd:w,eRFn:"function: BMS.Misc.fnDoSecureTrans"})}v&&v(y?n:n.strException)}},b)}}catch(B){BMS.Misc.fnErr({fnName:"BMS.Misc.fnDoSecureTrans",fnParams:e,err:B})}},BMS.Misc.fnWsData=function(e){try{var t=void 0!=e.AppC&&""!=e.AppC?e.AppC:global.strAppCode,n=void 0!=e.venCode&&""!=e.venCode?e.venCode:"",i=void 0!=e.transId&&""!=e.transId?e.transId:0,a=void 0!=e.cmd&&""!=e.cmd?e.cmd:"",s=void 0!=e.eventType&&""!=e.eventType?e.eventType:"",r=void 0!=e.evtCode&&""!=e.evtCode?e.evtCode:"",o=void 0!=e.srCode&&""!=e.srCode?e.srCode:"",l=void 0!=e.sessDet&&""!=e.sessDet?e.sessDet:"",c=void 0!=e.sessId&&""!=e.sessId?e.sessId:"",d=void 0!=e.email&&""!=e.email?e.email:"",u=void 0!=e.lsid&&""!=e.lsid?e.lsid:"",p=void 0!=e.compCode&&""!=e.compCode?e.compCode:"",f=void 0!=e.producer&&""!=e.producer?e.producer:"",h=void 0!=e.data&&""!=e.data?e.data:"",g=void 0!=e.retType&&""!=e.retType?e.retType:"js",v=void 0!=e.fnCC&&e.fnCC?e.fnCC:!1,m=void 0!=e.fnEC&&e.fnEC?e.fnEC:!1,y=void 0!=e.blnSupp?e.blnSupp:!1,S="strCommand: "+a+", strAppCode: "+t+", strVenueCode:"+n+", lngTransId"+i+", strEvent"+s+", strEventCodes: "+r+", strSRCode: "+o+", strSessDet:"+l+", lngSessId:"+c+", strEmail:"+d+", strLSID:"+u+", strCompCode:"+p+", strProducer: "+f+", strData: "+h+", strRetType: "+g;$("#glErrDiv").is(":visible")&&$("#glErrDiv").hide(),BMS.Misc.fnAjax({data:{strApp:t,strVC:n,lngTrans:i,strCmd:a,strET:s,strEC:r,strSRC:o,strSD:l,strSID:c,strLE:d,strLSID:u,strComp:p,strProducer:f,strData:unescape(h),strCase:g},dataType:"xml",error:function(t,n,i){BMS.Misc.fnErr({fnName:"wsData",fnParams:e})},success:function(e){var t=escape($(e).find("json"==g?"strGetDataForJSONResult":"strGetDataForJavaScriptResult").eq(0).text());if(""!=t)v&&v(t);else if(!y)if(m)m(t);else{BMS.Misc.fnBusy(!1);e.split("-");BMS.Misc.fnGlobalErr({eMess:"Sorry, there seems to be a connectivity problem with the cinema. Please try after some time.",eCmd:S,eRFn:"function: BMS.Misc.fnWsData"})}},type:"post",url:"/serv/wsData.bms"})}catch(w){BMS.Misc.fnErr({fnName:"BMS.Misc.fnWsData",fnParams:e,err:w})}},BMS.Misc.fnGVal=function(e){try{for(var t=e.key,n=e.data,i=void 0!=e.splitA&&""!=e.splitA?e.splitA:"|",a=void 0!=e.splitB&&""!=e.splitB?e.splitB:"=",s=void 0!=e.defVal&&""!=e.defVal?e.defVal:"",r=n.split(i),o="",l=0;l<r.length;l++){var c=r[l].split(a);if(c[0].toUpperCase()==t.toUpperCase()){o=c[1];break}}return""!=o?o:s}catch(d){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGVal",fnParams:arguments,err:d})}},BMS.Misc.fnGPipeDelimitedString=function(e){try{var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+e[n]);return t=0==t.length?"":"|"+t.join("|")+"|"}catch(i){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGPipeDelimitedString",fnParams:e,err:i})}},BMS.Misc.fnUrlName=function(e){try{return e=e.replace(/[^a-zA-Z 0-9]+/g,""),e=e.replace(new RegExp(" ","gi"),"-"),e=e.replace(/-+/gi,"-")}catch(t){BMS.Misc.fnErr({fnName:"BMS.Misc.fnUrlName",fnParams:e,err:t})}},BMS.Misc.fnGATracker=function(e){try{var t=location.pathname.replace(/\//g,""),n=""==t?"home":t,i=""!=e.location?"-"+e.location:"",a=""!=e.action?"-"+e.action:"",s=n+i+a;"undefined"!=typeof ga&&ga("send","pageview",s),"undefined"!=typeof wzrk_pushSiteEvent&&wzrk_pushSiteEvent(s)}catch(r){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGATracker",fnParams:arguments,err:r})}},BMS.Misc.fnBrowsVer=function(){try{if(rv=-1,"Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=t.exec(e)&&(rv=parseFloat(RegExp.$1))}else rv=999;return rv}catch(n){BMS.Misc.fnErr({fnName:"BMS.Misc.fnBrowsVer",err:n})}},BMS.Misc.fnCapitalName=function(e){try{for(var t=$.trim(e).split(" "),n="",i=0;i<t.length;i++)""!=t[i]&&(n+=t[i].substr(0,1).toUpperCase()+t[i].substr(1,t[i].length)+" ");return n}catch(a){BMS.Misc.fnErr({fnName:"BMS.Misc.fnCapitalName",err:a})}},BMS.Misc.fnGetUserImage=function(e,t){try{var n=e.SOCIALID,i="";i=global.strContentUrl+"/webin/common/default-user.png","FB"==n?(imageURL="https://graph.facebook.com/"+BMS.Misc.fnGVal({key:"FBID",data:BMS.Storage.get({name:"ld"})})+"/picture?width=100&height=100",t(imageURL)):"PLUS"==n?""==BMS.Storage.isset({name:"PLUSIMAGEURL"})?BMS.Misc.fnAjax({url:"https://www.googleapis.com/plus/v1/people/me",data:"access_token="+BMS.Misc.fnGVal({key:"PLUSACCESSTOKEN",data:BMS.Storage.get({name:"ld"})}),type:"GET",success:function(e){""!=e.image.url?(BMS.Storage.set({name:"PLUSIMAGEURL",value:e.image.url,storage:"C"}),t(e.image.url)):t(i)},error:function(e,n,a){t(i)}}):t(BMS.Storage.get({name:"PLUSIMAGEURL"})):t(i)}catch(a){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGetUserImage",err:a})}},BMS.Misc.fnGetSocialKeys=function(){try{BMS.Misc.fnAjax({url:global.getDataUrl,data:{cmd:"APPDETAILS",app:"ALL"},type:"GET",dataType:"json",success:function(e){global.fbAppId=BMS.Misc.fnGVal({key:"FB_APPID",data:e.FB}),global.FBPriviledges=BMS.Misc.fnGVal({key:"FB_PRIVILEGES",data:e.FB}),global.plusAppId=BMS.Misc.fnGVal({key:"PLUS_CLIENTID",data:e.PLUS}),global.plusPrivileges=BMS.Misc.fnGVal({key:"PLUS_PRIVILEGES",data:e.PLUS}).split("&nbsp;").join(" "),"undefined"!=typeof FB?FB.init({appId:global.fbAppId,status:!1,xfbml:!0,version:"v2.2"}):$.getScript(socialJS,function(){FB.init({appId:global.fbAppId,status:!1,xfbml:!0,version:"v2.2"})})},error:function(e){}})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGetSocialKeys",err:e})}},BMS.Misc.modal=function(e,t){try{$(document).scrollTop(),$(".modal .__overlay"),$(".main-body-wrapper"),$(".select-overlay");t?BMS.Modal.fnShowModal(e):BMS.Modal.fnHideModal()}catch(n){BMS.Misc.fnErr({fnName:"BMS.Misc.modal",fnParams:e+" "+t,err:n})}},BMS.Misc.fnShowSuccessModal=function(e,t){try{$("#popover-rating-msg").html(t),BMS.Modal.fnShowModal(e),setTimeout(function(){BMS.Modal.fnHideModal()},2500)}catch(n){BMS.Misc.fnErr({fnName:"BMS.Misc.fnShowSuccessModal",fnParams:e+""+t,err:n})}},BMS.Misc.fnBtnProcessing=function(e,t){try{t?$("#"+e).addClass("_processing"):$("#"+e).removeClass("_processing")}catch(n){BMS.Misc.fnErr({fnName:"BMS.Misc.fnBtnProcessing",fnParams:e+" "+t,err:n})}},BMS.Misc.fnDoFloat=function(){try{if("undefined"==typeof BMS.Modal.currentModal||null==BMS.Modal.currentModal)return void clearTimeout(BMS.Misc.fnDoFloat.objTimer);if(!global.blnIsTouchScreen){var e={x:parseInt(BMS.Modal.currentModal.css("padding-top").replace("px",""))+parseInt(BMS.Modal.currentModal.css("margin-top").replace("px",""))+parseInt(BMS.Modal.currentModal.css("border-top-width").replace("px","")),y:parseInt(BMS.Modal.currentModal.css("padding-left").replace("px",""))+parseInt(BMS.Modal.currentModal.css("margin-left").replace("px",""))+parseInt(BMS.Modal.currentModal.css("border-left-width").replace("px",""))},t={top:($(window).height()-BMS.Modal.currentModal.height())/2-e.x,left:($(window).width()-BMS.Modal.currentModal.width())/2-e.y};return BMS.Modal.currentModal.css({top:t.top}),clearTimeout(BMS.Misc.fnDoFloat.objTimer),BMS.Misc.fnDoFloat.objTimer=setTimeout("BMS.Misc.fnDoFloat()",50),BMS.Modal.currentModal}var n=BMS.Modal.currentModal.height();void 0;var i=$(window).height(),a=0;a=i>n?parseInt((i-n)/2)+window.pageYOffset:10+window.pageYOffset,BMS.Modal.currentModal.css({top:a})}catch(s){void 0}},BMS.Misc.fnGlobalErr=function(e){try{var t="Whoa there! Something went wrong with our script. Please refresh the page and try again",n=void 0!=e.eMess&&""!=e.eMess?e.eMess:t,i=void 0!=e.eCode&&""!=e.eCode?e.eCode:"GEN";void 0!=e.eCmd&&""!=e.eCmd?"Command: "+e.eCmd:"",void 0!=e.eRFn&&""!=e.eRFn?"Function: "+e.eRFn:"",void 0!=e.blnSucc&&""!=e.blnSucc?e.blnSucc:!1;void 0,""!=i?$("#globalErrMsg").html(n).show():$("#globalErrMsg").html(e).hide(),BMS.Misc.modal("error-div",!0)}catch(a){BMS.Misc.fnDispErr({fnName:"BMS.Misc.fnGlobalErr",fnParams:e,err:a})}},BMS.Misc.fnDispErr=function(e){return void 0,!1},BMS.Misc.fnErr=function(e){void 0!=e.supp?e.supp:!0,void 0!=e.fnParams&&""!=e.fnParams?e.fnParams:"";void 0,$("#globalErrMsg").html("Error : "+e.fnName+" Error is "+e.err),"undefined"!=typeof BMS.Modal.currentModal&&null!=BMS.Modal.currentModal&&BMS.Misc.modal("error-div",!0)},BMS.Misc.fnSCusErrDisplay=function(e,t,n){try{$("#"+e).clearQueue();var i="";"e"==n?(i+='<span class="__icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">;<use xlink:href="/icons/common-icons.svg#icon-error"></use></svg></span>',i+='<span class="__text">'+t+"</span>",$("#"+e).removeClass("_success").addClass("_error").html(i).show()):"w"==n?(i+='<span class="__icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">;<use xlink:href="/icons/common-icons.svg#icon-warning"></use></svg></span>',i+='<span class="__text">'+t+"</span>",$("#"+e).removeClass("_error").addClass("_warning").html(i).animate({height:"toggle",opacity:"show"},{queue:!1},"slow").delay(5e3).animate({height:"toggle",opacity:"hide"},"fast",function(e){$(this).hide()})):"i"==n?(i+='<span class="__icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">;<use xlink:href="/icons/common-icons.svg#icon-info"></use></svg></span>',i+='<span class="__text">'+t+"</span>",$("#"+e).removeClass("_error").addClass("_info").html(i).animate({height:"toggle",opacity:"show"},{queue:!1},"slow").delay(5e3).animate({height:"toggle",opacity:"hide"},"fast",function(e){$(this).hide()})):"s"==n&&(i+='<span class="__icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">;<use xlink:href="/icons/common-icons.svg#icon-success"></use></svg></span>',i+='<span class="__text">'+t+"</span>",$("#"+e).removeClass("_error").addClass("_success").html(i).show())}catch(a){BMS.Misc.fnErr({fnName:"BMS.Misc.fnSCusErrDisplay",fnParams:e+", "+t+", "+n,err:a})}},BMS.Misc.fnBusy=function(e,t){try{if(e)if(t){var n='<div class="qb-loader-wrapper"><div class="qb-loader">		    		<span class="reel __roll1">						<span class="mini-circle"></span>						<span class="mini-circle __center"></span>						<span class="mini-circle __left"></span>						<span class="mini-circle __right"></span>						<span class="mini-circle __bottom"></span>					</span>				</div></div>';t.addClass("_add-movie-spinner"),setTimeout(function(){t.prepend(n)},200)}else handlePopups.freezeDocument(),$("#dBusy").show(),$(".__busy-div-overlay").show();else if(t){var i=t.find(".qb-loader-wrapper");i.addClass("_fade-out"),setTimeout(function(){i.remove(),t.removeClass("_add-movie-spinner")},300)}else handlePopups.releaseDocument(),$("#dBusy").hide(),$(".__busy-div-overlay").hide()}catch(a){BMS.Misc.fnErr({fnName:"BMS.Misc.fnBusy",err:a})}},BMS.Misc.fnCover=function(e){try{void 0}catch(t){BMS.Misc.fnErr({fnName:"BMS.Misc.fnCover",err:t})}},BMS.Misc.fnGoTo=function(e){try{setTimeout("window.location.href='"+e+"'",0)}catch(t){BMS.Misc.fnErr({fnName:"BMS.Misc.fnGoTo",fnParams:arguments,err:t})}},BMS.Misc.IsValidDate=function(e,t,n){try{var i=t+"/"+e+"/"+n,a=new Date(i);return a.getDate()!=e?!1:a.getMonth()!=t-1?!1:a.getFullYear()!=n?!1:!0}catch(s){BMS.Misc.fnErr({fnName:"BMS.Misc.IsValidDate",fnParams:e+" "+t+" "+n,err:s})}},BMS.Misc.fnGQS=function(e,t){try{for(var t=void 0!=t?t:"",n=window.location.search.substring(1),i=n.split("&"),a=0;a<i.length;a++){var s=i[a].split("=");if(s[0]==e)return s[1]}return t}catch(r){BMS.Misc.fnErr({fnName:"misc.js - BMS.Misc.fnGQS",fnParams:arguments,err:r})}},BMS.Misc.fnPushEventDataToAnalytics=function(e,t,n,i){try{var a=$.extend(!0,{},n),s=$.extend(!0,{},n),r=$.extend(!0,{},i);-1!=$.inArray("WR",e)&&"undefined"!=typeof wizrocket&&"undefined"!=typeof wizrocket.event&&wizrocket.event.push(t,a),-1!=$.inArray("KM",e)&&"undefined"!=typeof _kmq&&_kmq.push(["record",t,s]),(-1!=$.inArray("GA",e)||-1!=$.inArray("GTM",e))&&"undefined"!=typeof dataLayer&&dataLayer.push(r)}catch(o){BMS.Misc.fnErr({fnName:"misc.js - BMS.Misc.fnPushEventDataToAnalytics",fnParams:arguments,err:o})}},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){return $.inArray(e,this)});var handlePopups={scrollPos:null,initialScrollPos:null,freezeDocument:function(e){this.scrollPos=$(document).scrollTop(),this.scrollPos<=0?this.initialScrollPos=Math.abs(parseInt($("body").css("margin-top"))):this.initialScrollPos=this.scrollPos,e&&($showCaseCarousel=$("#showcase-primary .showcase-carousel"),$showCaseCarousel.hasClass("slick-initialized")&&$showCaseCarousel.slick("slickPause"),pausePrimaryShowcase=!0),$("body").css("margin-top",-this.initialScrollPos),$("body").addClass("_fixed")},releaseDocument:function(){$("body").removeClass("_fixed"),$("body").css("margin-top",0),$(document).scrollTop(this.initialScrollPos),$("#showcase-primary .showcase-carousel").slick("slickPlay")}};BMS.Misc.fnPopup=function(e){try{var t=e.url,n=(void 0!=e.modal&&""!=e.modal?e.modal:!1,void 0!=e.height&&""!=e.height?e.height:552),i=void 0!=e.width&&""!=e.width?e.width:800,a="width="+i+"px, height="+n+"px, center=yes, status=no, toolbar=no, location=no, menubar=no, scrollbars=yes, resizable=no, position=absolute, left= 200px; top=135px;";return window.open(t,"_blank",a)}catch(s){BMS.Misc.fnErr({fnName:"misc.js - BMS.Misc.fnPopup",fnParams:arguments,err:s})}},BMS.Misc.Router=function(){var e={},t={},n=!0,i="",a=function(n,i,a,s){a&&"function"==typeof a&&(e.hasOwnProperty(n)||(e[n]=[]),e[n].push({key:i,callback:a})),s&&"function"==typeof s&&(t.hasOwnProperty(n)||(t[n]=[]),t[n].push({key:i,callback:s}))},s=function(n,i){if(!$.isEmptyObject(e)&&e.hasOwnProperty(n)){var a=null;e[n].forEach(function(e,t){return e.key===i?(a=t,!1):void 0}),null!==a&&e[n].splice(a,1)}if(!$.isEmptyObject(t)&&t.hasOwnProperty(n)){var s=null;t[n].forEach(function(e,t){return e.key===i?(s=t,!1):void 0}),null!==s&&t[n].splice(s,1)}},r=function(e,t){void 0===t&&(t=!0),n=!!t,n===!1&&setTimeout(function(){n=!0},100),""===e||void 0===e||null===e?window.history.back(1):window.location.hash="!"+e},o=function(a){if(!n)return void(n=!0);var s,r=!1;"undefined"!=typeof a.newURL?(s=a.newURL.split("#"),r=!0):s=window.location.hash.split("#");var o=s[1];void 0!==o&&(o=o.substr(1));var l;l="undefined"!=typeof a.oldURL?a.oldURL.split("#"):i.split("#");var c=l[1];void 0!==c&&(c=c.substr(1)),l.length<s.length?e.hasOwnProperty(o)&&e[o].forEach(function(e){e.callback.call()}):l.length===s.length?(t.hasOwnProperty(c)&&t[c].forEach(function(e){e.callback.call()}),e.hasOwnProperty(o)&&e[o].forEach(function(e){e.callback.call()})):t.hasOwnProperty(c)&&t[c].forEach(function(e){e.callback.call()}),i=window.location.hash};return window.addEventListener("hashchange",o),{registerRoute:a,unregisterRoute:s,triggerRoute:r}}(),function(e){e.fn.modal=function(){BMS.Modal.currentModal=null;var t=e(".modal .__overlay"),n=e(".main-body-wrapper"),i=(e(".modal .popover"),"_animateTop"),a="_make-blur",s=e(".select-overlay");e("[data-modal]").tap(function(){var t=e(this).attr("data-modal");BMS.Modal.fnShowModal(t)}),e(".__dismiss").tap(function(){BMS.Modal.fnHideModal()}),t.tap(function(){"qty-sel"!=e(BMS.Modal.currentModal).attr("id")&&BMS.Modal.fnHideModal()}),BMS.Modal.fnShowModal=function(r){e(document).scrollTop();if(null!=BMS.Modal.currentModal&&(BMS.Modal.currentModal.removeClass(i),BMS.Modal.currentModal.hide(),--handlePopups.activeModals),s.is(":visible")&&s.click(),BMS.Modal.currentModal=e("#"+r),t.css("opacity",0).show(),t.transition({opacity:1},200),n.addClass(a),handlePopups.freezeDocument(!0),BMS.Misc.fnDoFloat(),"dRatConf"!=r&&e(BMS.Modal.currentModal).find("input").val(""),BMS.Modal.currentModal.show(),"locationPopup"==r&&global.blnIsTouchScreen){void 0;var o=e(window).height()-(e(".location-header","#locationPopup").outerHeight()+20);void 0,e(".location-container","#locationPopup").css({"max-height":o}),BMS.Misc.fnDoFloat()}$focusElem=e(BMS.Modal.currentModal).find("input[type=text],input[type=email],input[type=number],textarea,select").filter(":visible:first"),""!=$focusElem&&setTimeout(function(){"signinPopup"==r&&global.blnIsTouchScreen||"locationPopup"==r&&global.blnIsTouchScreen||$focusElem.focus()},200)},BMS.Modal.fnHideModal=function(){t.fadeOut(),"undefined"!=typeof BMS.Modal.currentModal&&null!=BMS.Modal.currentModal&&(BMS.Misc.fnBusy(!1,BMS.Modal.currentModal),BMS.Modal.currentModal.hide(),handlePopups.releaseDocument(),n.removeClass(a),BMS.Modal.currentModal.removeClass(i),BMS.Modal.currentModal=null)}}}(jQuery),$(document).ready(function(){$("body").modal()}),BMS.Validate.address=function(e){try{var t=/^[a-zA-Z0-9 \\\/;:.,-]+$/g;return t.test(e)}catch(n){BMS.Misc.fnErr({fnName:"fnVal.address",fnParams:e,err:n})}},BMS.Validate.chkName=function(e){try{return e=$.trim(e),pattern=/^[A-z]+(([\s\'\,\.\-][A-z])?[A-z]*)*$/gi,pattern.test(e)}catch(t){BMS.Misc.fnErr({fnName:"fnVal.name",fnParams:e,err:t})}},BMS.Validate.email=function(e){try{var t=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i;return t.test(e)}catch(n){BMS.Misc.fnErr({fnName:"fnVal.email",fnParams:e,err:n})}},BMS.Validate.mob=function(e){try{var t=/^[789]\d{9}$/;return t.test(e)}catch(n){BMS.Misc.fnErr({fnName:"fnVal.mob",fnParams:e,err:n})}};var primaryShowcase=$("#showcase-primary .showcase-carousel"),pausePrimaryShowcase=!1,handlePopups={scrollPos:null,initialScrollPos:null,activeModals:0,escKeyHandler:function(e){(27==e.keyCode||27==e.which)&&(null!==BMS.Modal.currentModal?BMS.Modal.fnHideModal():$(".select-overlay").click())},freezeDocument:function(e){try{if(e=$.extend({},e),this.activeModals++,this.activeModals>1)return!1;$(document).bind("keyup",this.escKeyHandler),this.scrollPos=$(document).scrollTop(),this.scrollPos<=0?this.initialScrollPos=Math.abs(parseInt($("body").css("margin-top"))):this.initialScrollPos=this.scrollPos,primaryShowcase&&primaryShowcase.length&&primaryShowcase.hasClass("slick-initialized")&&primaryShowcase.slick("slickPause"),pausePrimaryShowcase=!0,global.blnIsTouchScreen&&!e.popover||($("body").css("margin-top",-this.initialScrollPos),$("body").addClass("_fixed"),primaryShowcase&&primaryShowcase.length&&primaryShowcase.hasClass("slick-initialized")&&primaryShowcase.slick("slickPause"))}catch(t){BMS.Misc.fnErr({fnName:"handlePopups.freezeDocument",err:t})}},releaseDocument:function(e){try{this.activeModals--,this.activeModals<1&&($("body").hasClass("_fixed")&&($("body").removeClass("_fixed"),$("body").css("margin-top",0),$(document).scrollTop(this.initialScrollPos)),primaryShowcase&&primaryShowcase.length&&primaryShowcase.hasClass("slick-initialized")&&primaryShowcase.slick("slickPlay"),$(document).unbind("keyup",this.escKeyHandler),this.activeModals=0)}catch(t){BMS.Misc.fnErr({fnName:"handlePopups.releaseDocument",err:t})}}},onPrimaryShowcaseInit=function(e,t){pausePrimaryShowcase&&$("#showcase-primary .showcase-carousel").slick("slickPause")},initCarousel={banner:function(){$("#showcase-primary .showcase-carousel").on("init",function(e,t){_.delay(onPrimaryShowcaseInit,500,e,t)}),$("#showcase-primary .showcase-carousel").slick({centerMode:!0,slidesToShow:1,arrows:!0,dots:!0,speed:1e3,autoplay:!0,pauseOnHover:!0,adaptiveHeight:!1,variableWidth:!0})},handpick:function(){$("#handpick-carousel .showcase-carousel")[0]&&$("#handpick-carousel .showcase-carousel").slick({centerMode:!0,slidesToShow:1,arrows:!0,dots:!1,speed:1e3,autoplay:!1,pauseOnHover:!1,adaptiveHeight:!1,variableWidth:!0})}},bannerInit=function(){var e=$("#showcase-primary .showcase-carousel").find(".showcase-card").eq(0).find("img");e[0]&&(window.stopWowLoad=!0,e.attr("src",e.attr("data-lazy")),e.one("load",function(){window.stopWowLoad=!1,setTimeout(function(){wow.scrolled=!0,wow.scrollCallback()},5),$(".bannerLoadCover").remove(),$("#showcase-primary .showcase-carousel").removeClass("_none");var e=$("#showcase-primary").find(".banner-container").length;2>e&&$("#showcase-primary").find(".banner-container").eq(0).clone().appendTo($("#showcase-primary").find(".showcase-carousel")),$("#showcase-primary .showcase-carousel").slick({centerMode:!0,slidesToShow:1,arrows:!0,dots:!0,speed:1e3,autoplay:!0,pauseOnHover:!0,adaptiveHeight:!1,variableWidth:!0})}),e.one("error",function(){window.stopWowLoad=!1,setTimeout(function(){wow.scrolled=!0,wow.scrollCallback()},5)}))},showcaseOverlay={init:function(e){var t=$("#showcase-primary .showcase-overlay").find(".overlay-card").eq(0).find("img");return t[0]?(void 0,window.stopWowLoad=!0,$(".home-wrapper").one("click",function(){showcaseOverlay.dismiss()}),$(".__dismiss","#showcase-primary").removeClass("_none").one("click",function(){showcaseOverlay.dismiss(),window.location.hash=""}),t.attr("src",t.attr("data-lazy")),t.one("load",function(){$("#showcase-primary .showcase-overlay").find(".__bg").css({"background-image":"url("+t.attr("src")+")"}),$(".bannerLoadCover").remove(),window.stopWowLoad=!1,setTimeout(function(){wow.scrolled=!0,wow.scrollCallback()},5);var e=$(".overlay-card","#showcase-primary");e.hasClass("_video")&&e.find(".__play").one("click",function(){setTimeout(function(){showcaseOverlay.dismiss()},100)})}),void t.one("error",function(){window.stopWowLoad=!1,setTimeout(function(){wow.scrolled=!0,wow.scrollCallback()},5)})):void e()},animate:function(){},dismiss:function(){$("#showcase-primary .showcase-overlay").addClass("puff-reverse"),$(".top-banner-wrapper").removeClass("_overlay"),setTimeout(function(){$("body").removeClass("_fixed"),global.blnIsTouchScreen||$("#quickbook-wrapper").removeClass("_curtain"),$(".home-wrapper").transition({opacity:1},300),$("#navbar").removeClass("none"),$("#showcase-primary .showcase-carousel").removeClass("_none")},305),bannerInit()}};$(document).ready(function(){$("#mob-toggle-menu ul");$(".navbar-toggle").on("click",function(){}),showcaseOverlay.init(function(){
bannerInit()}),"undefined"!=typeof WOW&&(window.wow=new WOW({boxClass:"wow",animateClass:"animated",offset:-50,live:!0,lazyLoad:!0,lazyLoadOffset:-100}),wow.init()),global.blnIsTouchScreen&&$("body").addClass("_touch");var e=$(".primary"),t=$(".secondary"),n=window.pageYOffset,i=(t.height(),$("#quickbook-wrapper")),a=0,s=!1,r=!1;i.length&&1!==i.data("always-fixed")&&(a=i.find(".search-container").offset().top-i.find(".search-box-container").height()-51);var o=null;$(document);global.blnIsTouchScreen||($(window).on("scroll",function(l){if(!BMS.ddOpen){var c=window.pageYOffset;o&&c>n+30&&clearTimeout(o),0!==a&&(window.pageYOffset>=a?s||(s=!0,i.addClass("_fixed")):s&&(s=!1,i.removeClass("_fixed"))),c>a?c>n+30?o=setTimeout(function(){r||(e.addClass("scroll-animation"),r=!0,t.addClass("scroll-animation"),i.addClass("_fixed _primary-hidden _animated"))},200):n-40>c&&(o=setTimeout(function(){r&&(e.removeClass("scroll-animation"),r=!1,t.removeClass("scroll-animation"),o=null,i.removeClass("_primary-hidden"))},300)):n>c&&(o&&clearTimeout(o),o=setTimeout(function(){e.removeClass("scroll-animation"),r=!1,t.removeClass("scroll-animation"),o=null,0==a?i.removeClass("_primary-hidden"):i.removeClass("_primary-hidden _fixed _animated")},200)),n=c}}),$(window).trigger("scroll")),initCarousel.handpick(),$(".universal-search-toggle").click(function(){$("#search-keywords").val("").focus(),$(this).is(":checked")?$(".__right").transition({opacity:0}):$(".__right").transition({opacity:1})}),$("#showcase-primary .showcase-carousel").on("mouseenter",'.banner-container[aria-hidden="false"]',function(){$("#showcase-primary .showcase-carousel").slick("slickPause")}),$("#showcase-primary .showcase-carousel").on("mouseleave",'.banner-container[aria-hidden="false"]',function(){$("#showcase-primary .showcase-carousel").slick("slickPlay")}),$(".play-trailer > svg").on("mouseenter",function(){$(this).closest(".showcase-card").find(".__hover-overlay").addClass("scale-up")}),$(".play-trailer > svg").on("mouseleave",function(){$(this).closest(".showcase-card").find(".__hover-overlay").removeClass("scale-up")}),$(".play-trailer > svg").click(function(){var e=($(window).height(),$(window).width(),$(this));$(".main").css({"-webkit-filter":"blur(10px)"}),$(".popup-overlay").append(e.parent(".play-trailer").siblings(".__bg").data("url")).fadeIn(),$(".popup-overlay").css({background:"rgba(0, 0, 0, 0.7)"}),$(".popup-overlay iframe").css({position:"absolute",left:0,right:0,margin:"auto",top:0,bottom:0})}),$(".popup-overlay").click(function(){$(".main").css({"-webkit-filter":"blur(0px)"}),$(".popup-overlay iframe").remove(),$(this).hide()}),$(".select-overlay").click(function(){BMS.Header.fnHideSelectOverlay()}),$(".__dismiss",".mobile-menu").click(function(){BMS.Header.fnHideSelectOverlay()}),$(".dd-tab-list").on("mouseenter",".tab-toggle",function(){var e=$(this).closest(".dd-tab");e.find(".dd-tab-list").find(".tab-toggle._active").removeClass("_active"),e.find(".dd-tab-content").find(".tab-content._active").removeClass("_active"),$(this).addClass("_active");var t,n;t=$(this).attr("data-toggle"),n=$(this).closest(".dd-tab").find("#"+t),n.addClass("_active"),wow&&setTimeout(function(){wow.scrolled=!0,wow.scrollHandler()},100)})}),BMS.Header.fnHeaderDD=function(e,t){try{if("toggle"==t){var n=$(e).attr("id"),i="";if($("[data-role=dHeaderDD]").each(function(){$(this).is(":visible")&&(i=$(this).attr("data-id"))}),$("[data-role=dHeaderDD]").hide(),""!=i&&n!=i&&handlePopups.releaseDocument({popover:!0}),n==i?("dTopRgnDD"==n?$("#"+n).removeClass("_active"):"dNotifDD"==n&&$(".notification-dropdown-wrapper").hide(),BMS.Header.fnHideSelectOverlay(),$("#quickbook-wrapper").removeClass("_inactive"),$("[data-id='"+n+"']").hide()):($(".notification-dropdown-wrapper").hide(),$(".select-overlay").show(),$("#quickbook-wrapper").addClass("_inactive"),handlePopups.freezeDocument({popover:!0}),$("[data-id='"+n+"']").show(),"dTopRgnDD"==n?$("#"+n).addClass("_active"):"dNotifDD"==n&&$(".notification-dropdown-wrapper").show()),"dTopRgnDD"==n)if(global.blnIsTouchScreen){var a=$(window).height()-$(".primary",".mobile-menu").height();a&&$(".location-search-container").css({"max-height":a})}else $("[data-id='"+n+"'] #inp_RegionSearch_top").focus();if("dNotifDD"==n&&global.blnIsTouchScreen){var a=$(window).height()-$(".primary",".mobile-menu").height();a&&$("#notification").css({"max-height":a})}}}catch(s){BMS.Misc.fnErr({fnName:"BMS.Header.fnHeaderDD",err:s})}},window.loop=0,BMS.Header.fnHideSelectOverlay=function(){try{window.loop++,$("[data-role=dHeaderDD]").hide(),$("#quickbook-wrapper").removeClass("_inactive"),$("#dTopRgnDD").removeClass("_active"),$(".notification-dropdown-wrapper").hide(),handlePopups.releaseDocument(),$(".select-overlay").hide()}catch(e){BMS.Misc.fnErr({fnName:"BMS.Header.fnHideSelectOverlay",err:e})}},$(document).ready(function(){$(".navbar-toggle, #main-body-wrapper-overlay, .mob-brand").on("tap",function(e){e.stopPropagation(),e.preventDefault();var t=$(this).data("navigationis");toggleMobileNavigation(t)})});var _scrollPos=0;!function(e){var t={sanitize:{date:function(e){return new Date(e.substr(0,4)+" "+e.substr(4,2)+" "+e.substr(6,2)+" "+e.substr(8,2)+":"+e.substr(10,2))},time:function(e){var t=e.getHours(),n=e.getMinutes(),i=!1;return t>12?(t-=12,i=!0):12===t?i=!0:0===t&&(t=12),10>n&&(n="0"+n),i=i?"pm":"am",t+":"+n+" "+i},"boolean":function(e){return"string"==typeof e?"Y"==e?e=!0:"N"==e?e=!1:e:(("object"==typeof e||"array"==typeof e)&&_.each(e,function(n,i){e[i]=t.sanitize["boolean"](n)}),e)}},venueName:function(e){return e.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/\s/g,"-").toLowerCase()+"/cinema"},render:function(e,t,n){e=e.split("\n").join("");var i,a,s,r,o,l,c=/([$\^\\\/()|?+*\[\]{}.\-])/g;return n=n||{},l="{{}}",r=l.length,o=Math.ceil(r/2),a=l.substr(0,o).replace(c,"\\$1"),s=l.substr(o,r).replace(c,"\\$1")||a,i=new RegExp(a+"[^"+a+s+"]+"+s,"g"),e.replace(i,function(e){var n,i=e.slice(o,-o),a=i.split("."),s=0,r=a.length;if(i in t)n=t[i];else for(n=t;r>s;s++){if(!(a[s]in n))return e;n=n[a[s]]}return n})},difference:function(e){for(var t=[],n=e.length-1,i=0;i<e.length-1;i++)if(i!=n)return parseInt(e[i])>parseInt(e[i+1])?t.push(parseInt(e[i])-parseInt(e[i+1])):t.push(parseInt(e[i+1])-parseInt(e[i]))},getLatLongDistance:function(e,t){var n=e.lat,i=t.lat,a=e.lng,s=t.lng,r=function(e){return e*(Math.PI/180)},o=6371,l=r(i-n),c=r(s-a),d=Math.sin(l/2)*Math.sin(l/2)+Math.cos(r(n))*Math.cos(r(i))*Math.sin(c/2)*Math.sin(c/2),u=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),p=o*u;return p.toFixed(2)},between:function(e,t){var n=Math.min.apply(Math,[e,t]),i=Math.max.apply(Math,[e,t]);return this>n&&i>this},getCatAvailability:function(e){e=parseInt(e),0>e&&(e=0);for(var t=0;t<availSeatRange.length;t++){var n=function(){var n=availSeatRange[t].range.split("-");return e>=parseInt(n[0])&&e<=parseInt(n[1])?!0:!1}();if(n)return availSeatRange[t]}}};BMS.Misc=BMS.Misc||{},BMS.Misc.Helpers=t}(jQuery),BMS.Region.fnPgLd=function(){try{"undefined"!=typeof pageName&&-1!=global.notReqRgnArr.indexOf(pageName)?BMS.Region.fnChkRgn(!1):BMS.Region.fnChkRgn(!0),$("#locationPopup .__icon-back").on("click",function(){$("#spnRgnHeadTxt").html("PICK YOUR STATE"),$("#div_States").fadeIn(),$(".city-list").fadeOut(),$(this).fadeOut()}),$("#inp_RegionSearch").on("blur",function(){$("[data-id=inp_RegionSearch]").hide()}),$("#inp_RegionSearch_top").on("blur",function(){$("[data-id=inp_RegionSearch_top]").hide()})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnPgLd",err:e})}},BMS.Region.fnChkRgn=function(e){try{if(0!=$("#locationPopup").length){if(!e)return;var t=BMS.Storage.get({name:"Rgn",key:"Code"});BMS.Storage.get({name:"Rgn",key:"Code"}),BMS.Storage.get({name:"Rgn",key:"text"});if(""==t||"ALL"==t)$("#spnSelectedRegion").html("SELECT A REGION"),BMS.Region.fnChkRegRequired(function(e){e?($("#dTopRgnDD").click(),$("#quickbook-wrapper").addClass("_inactive"),$(".select-overlay").unbind("click"),$("[data-group=top-nav]").removeAttr("onclick")):($("#dTopRgnDD").click(),$("#quickbook-wrapper").addClass("_inactive"))});else{var n=BMS.Storage.get({name:"Rgn",key:"text"});global.blnIsTouchScreen&&"NCR"===t?$("#spnSelectedRegion").html("NCR"):$("#spnSelectedRegion").html(n)}}}catch(i){BMS.Misc.fnErr({fnName:"BMS.Region.fnChkRgn",err:i})}},BMS.Region.fnChkRegRequired=function(e){try{var t=!0;e(t)}catch(n){BMS.Misc.fnErr({fnName:"BMS.Region.fnChkRegRequired",err:n})}},BMS.Region.fnRegionFilter=function(e){try{for(var t=e.which?e.which:e.keyCode,n=[8,13,46,37,38,39,40,9],i=65;90>=i;i++)n.push(i);for(var i=97;122>=i;i++)n.push(i);if($.inArray(t,n)<0)return!1;$("#uRgnLst_top > li.active");if(38==t){var a=$("[data-id=inp_RegionSearch_top] ul").children().first(),s=$("[data-id=inp_RegionSearch_top] ul .active").prev(),r=$(s).find("a").text();return void(s!=a?($(s).next().removeClass("active"),$(s).addClass("active"),$("#inp_RegionSearch_top").val(r)):$("#inp_RegionSearch_top").val($(a).find("a").text()))}if(40==t){var o=$("[data-id=inp_RegionSearch_top] ul").children().last(),s=$("[data-id=inp_RegionSearch_top] ul .active").next(),r=$(s).find("a").text();return void(s!=o?($(s).prev().removeClass("active"),$(s).addClass("active"),$("#inp_RegionSearch_top").val(r)):$("#inp_RegionSearch_top").val($(o).find("a").text()))}if(37==t||39==t)return;var l=e.target.value,c=e.target.id;if(""==l)return void $("#div_RegResponse").hide();var d=new RegExp("\\b"+l.toUpperCase()+"\\w*\\b","gi"),u=["Mumbai","Mumbai : Western","Mumbai : South Central","Navi Mumbai","Kalyan","Ulhasnagar","Delhi","Faridabad","Ghaziabad","Gurgaon","Noida","National Capital Region (NCR)"],p=new Array;$.each(regionlst,function(e,t){$.each(t,function(e,t){d=new RegExp("\\b"+l.toUpperCase()+"\\w*\\b","gi"),d.test(t.name.toUpperCase())&&-1==$.inArray(t.name,u)&&p.push(new Array(t.code,t.name))})});for(var f=0;f<regionalias.length;f++){for(var h=!1,g=0;g<regionalias[f].Alias.length;g++)if(d.test(regionalias[f].Alias[g].toUpperCase())){h=!0;break}h&&p.push(new Array(regionalias[f].code,regionalias[f].name))}(d.test("BOMBAY")||d.test("MUMBAI")||d.test("MUMBAI WESTERN")||d.test("Mumbai South Central")||d.test("NAVI MUMBAI")||d.test("KALYAN")||d.test("ULHASNAGAR"))&&p.push(new Array("MUMBAI","Mumbai")),(d.test("NATIONAL CAPITAL REGION")||d.test("NCR")||d.test("DELHI")||d.test("FARIDABAD")||d.test("GHAZIABAD")||d.test("GURGAON")||d.test("NOIDA"))&&p.push(new Array("NCR","National Capital Region (NCR)"));for(var v=[],m="",y=6,g=0,S=0;S<p.length;S++)-1==$.inArray(p[S][1],v)&&y>g&&(m+=""==m?'<li class="active" data-pos="1" style="width: 100%;" id="'+p[S][0]+'"><a href="javascript:BMS.Region.fnSTopReg(\''+p[S][0]+"','"+p[S][1]+"');\">"+p[S][1]+"</a></li>":'<li style="width: 100%;" id="'+p[S][0]+'"><a href="javascript:BMS.Region.fnSTopReg(\''+p[S][0]+"','"+p[S][1]+"');\">"+p[S][1]+"</a></li>",g++),v.push(p[S][1]);return""!=m?($("[data-id="+c+"] ul").html(m),$("[data-id="+c+"]").show()):$("[data-id="+c+"]").hide(),""==l&&$("[data-id="+c+"]").hide(),!0}catch(w){BMS.Misc.fnErr({fnName:"BMS.Region.fnRegionFilter",err:w})}},BMS.Region.fnSwStates=function(e){try{var t="",n="",i=0;if($("#div_States").children().each(function(){$(this).removeClass("_active")}),""==e.trim())$.each(regionlst,function(e,n){t+='<div class="location-pills" onClick="BMS.Region.fnSwStates(\''+e.trim()+'\')" data-name="'+BMS.Misc.fnUrlName(e.trim()).toLowerCase()+'">',t+='<span class="location-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">  <use xlink:href="/icons/regions-icons.svg#icon-'+BMS.Misc.fnUrlName(e.trim()).toLowerCase()+'"></use> </svg></span>',t+='<div class="location-name">'+e.toUpperCase()+"</div>",t+="</div>",i++}),$("#div_States").html(t),$(".city-list").hide(),$("#locationPopup .__icon-back").fadeOut(),$("#div_States").show(),$("#spnRgnHeadTxt").html("PICK YOUR STATE"),BMS.Misc.modal("locationPopup",!0);else{var a='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">  <use xlink:href="/icons/regions-icons.svg#icon-'+BMS.Misc.fnUrlName(e.trim()).toLowerCase()+'"></use> </svg>',s="";s+='<img src="'+global.strContentUrl+"/webin/common/region-banners/"+BMS.Misc.fnUrlName(e.trim()).toLowerCase()+'.jpg" alt="">',s+='<div class="overlay">',s+='<span class="location-icon"></span>',s+='<div class="location-name">'+e.trim()+"</div>",s+="</div>";var r=""!=e?e:Object.keys(regionlst)[0],n="",i=0;regionlst.hasOwnProperty(r)&&($.each(regionlst,function(e,t){if(e==r){for(var i=0;i<t.length;i++)i%6==0&&(n+='<div class="__list-col">'),n+='<p id="'+t[i].code+'" onclick="BMS.Region.fnSetRegion(\''+r+"', '"+t[i].code+'\')" data-name="'+t[i].name+'"> - '+t[i].name+"</p>",i%6==5&&(n+="</div>");n+="</div>"}}),$("#spnRgnHeadTxt").html("PICK YOUR CITY"),$(".city-list .__city-banner").html(s),$(".city-list .location-icon").html(a),$("#div_CityName").html(n),$("#div_States").fadeOut(),$(".city-list").fadeIn(),$("#locationPopup .__icon-back").fadeIn())}}catch(o){BMS.Misc.fnErr({fnName:"BMS.Region.fnSwStates",err:o})}},BMS.Region.fnSetRegion=function(e,t){try{BMS.Misc.fnBusy(!0);var n,i="undefined"!=typeof $("#"+t).attr("data-subreg")&&"Y"==$("#"+t).attr("data-subreg")?!0:!1;n="Maharashtra"==e&&i?"Mumbai":"NCR"==e&&i?"National Capital Region (NCR)":$("#"+t).attr("data-name"),global.tmpCk=BMS.Region.fnGRgn(),global.ck=t,$("#spnSelectedRegion").html(n),BMS.Storage.set({name:"Rgn",key:"text",value:n,storage:"C",sess:!1}),BMS.Storage.set({name:"Rgn",key:"Code",value:t,storage:"C",sess:!1}),"undefined"!=typeof blnIsRegionRouting&&1==blnIsRegionRouting?BMS.Region.fnUpdateUrl(n,!0):BMS.Region.fnUpdateUrl(n,!1)}catch(a){BMS.Misc.fnErr({fnName:"BMS.Region.fnSetRegion",err:a})}},BMS.Region.fnSTopReg=function(e,t){try{BMS.Misc.fnBusy(!0),global.tmpCk=BMS.Region.fnGRgn(),global.ck=e,$("#spnSelectedRegion").html(t),BMS.Storage.set({name:"Rgn",key:"text",value:t,storage:"C",sess:!1}),BMS.Storage.set({name:"Rgn",key:"Code",value:e,storage:"C",sess:!1}),"undefined"!=typeof blnIsRegionRouting&&1==blnIsRegionRouting?BMS.Region.fnUpdateUrl(t,!0):BMS.Region.fnUpdateUrl(t,!1)}catch(n){BMS.Misc.fnErr({fnName:"BMS.Region.fnSTopReg",err:n})}},BMS.Region.fnOtherRegionCallBack=function(){try{var e=(global.tmpCk,global.ck);fnUpdateUrl(e),BMS.Misc.fnBusy(!1)}catch(t){BMS.Misc.fnErr({fnName:"BMS.Region.fnOtherRegionCallBack",err:t})}},BMS.Region.fnUpdateUrl=function(e,t){if(t===!0){var n=location.pathname,i="/";i+=BMS.Misc.fnUrlName(e).toLowerCase(),i+=("/"+n.split("/").splice(2,n.split("/").length).join("/")).replace(/\/$/,""),i+=location.search,i+=location.hash,window.location.href=i}else window.location.reload()},BMS.Region.fnRedirectToRegionPage=function(){try{if("undefined"!=typeof blnIsRegionRouting&&1==blnIsRegionRouting){var e=location.pathname,t="/";t+=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"text"})).toLowerCase(),t+=("/"+e.split("/").splice(2,e.split("/").length).join("/")).replace(/\/$/,""),t+=location.search,t+=location.hash,BMS.Region.fnSendRegionData(function(){location.href=t})}else BMS.Region.fnSendRegionData(function(){BMS.Misc.fnBusy(!1)})}catch(n){BMS.Misc.fnErr({fnName:"BMS.Misc.fnErr",err:n})}},BMS.Region.fnSendRegionData=function(e){try{var t=BMS.Storage.get({name:"Rgn"}),n=BMS.Storage.get({name:"ld"});if(""!==n){var i=BMS.Misc.fnGVal({data:t,key:"Code"}),a=BMS.Misc.fnGVal({data:n,key:"MEMBERID"}),s=BMS.Misc.fnGVal({data:n,key:"LSID"});BMS.Misc.fnDoSecureTrans({cmd:"SETPROFILE",p1:"SETPROFILE",p2:a,p3:s,p10:"|REGIONCODE="+i+"|",fnCC:function(t){e()},fnEC:function(t){e()},blnSupp:!0})}else e()}catch(r){BMS.Misc.fnErr({fnName:"BMS.Region.fnSendRegionData",err:r})}},BMS.Region.fnHideRegSel=function(){try{$("#locationPopup").is(":visible")?BMS.Misc.modal("locationPopup",!1):$("[data-id=dTopRgnDD]").is(":visible")&&BMS.Header.fnHideSelectOverlay(),$(".select-overlay").click(function(){BMS.Header.fnHideSelectOverlay()})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnHideRegSel",err:e})}},BMS.Region.fnGRgn=function(){try{return BMS.Storage.get({name:"Rgn",key:"Code"})}catch(e){BMS.Misc.fnErr({fnName:"BMS.Region.fnGRgn",err:e})}},$(document).ready(function(){BMS.Region.fnPgLd()}),BMS.Notifications.notifCount=0,BMS.Notifications.generateHTML=function(e,t){try{var n="";BMS.Storage.isset({name:"ld",key:"MEMBERID",storage:"C"});if(BMS.Storage.get({name:"markedViewId",key:"marked",storage:"L"}))var i=BMS.Storage.get({name:"markedViewId",key:"marked",storage:"L"}).split(",");else var i=BMS.Storage.get({name:"notificationId",key:"Viewed",storage:"L"}).split(",");for(var a in e)if(e.hasOwnProperty(a)){var s=i?$.inArray(e[a]._id+"-"+t,i):-1;if("N"==t)var r=0==e[a].viewed&&-1==s;else if("A"==t)var r=-1==s;var o=r?'<span class="new-notification-btn">NEW</span>':"",l="",c=""!=e[a].imgURL?"btn _offer":"btn _offer-normal",d=""!=e[a].imgURL?"_notification-time-c":"_notification-time";o=o+'<svg  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-'+e[a].type.toLowerCase()+'"></use></svg>';for(var u in e[a].callToAction)"object"==typeof e[a].callToAction[u]&&""!=e[a].callToAction[u].text&&(""==e[a].callToAction[u].text&&(c=""),l+='<a class="'+c+'" href="'+e[a].callToAction[u].link+'" target="'+e[a].callToAction[u].target+'">'+e[a].callToAction[u].text+"</a> ");if(""!=e[a].imgURL){var p=r?"_unread":"";n+='<div class="banner-notification child-notifications '+p+'" notif_id="'+e[a]._id+"-"+t+'"><div><img alt="banner" src="'+e[a].imgURL+'" onerror="this.src=\'//in.bmscdn.com/Events/Large/NoImage.jpg\'" ><div class="b-notification-content type-1"><div class="col20"><div class="_not-icon">'+o+'</div></div><div class="col80 _notification-detail"><p><strong>'+e[a].shortTxt+"</strong> "+e[a].longTxt+'</p><div class="btn-container">'+l+'<span class="'+d+'"> '+e[a].timeAgo+" </span></div></div></div></div></div>"}else{var f="";switch(e[a].type){case"events":f="type-1";break;default:f="type-2"}n+='<div class="text-notification child-notifications '+f+'" notif_id="'+e[a]._id+"-"+t+'"><div class="col20"><div class="_not-icon">'+o+'</div></div><div class="col80"><p><strong>'+e[a].shortTxt+"</strong> "+e[a].longTxt+'</p><div class="btn-container">'+l+'<span class="'+d+'"> '+e[a].timeAgo+" </span></div></div></div>"}r&&++BMS.Notifications.notifCount}return n}catch(h){BMS.Misc.fnErr({fnName:"BMS.Notifications.generateHTML",err:h})}},BMS.Notifications.getData=function(){try{var e=BMS.Storage.get({name:"notificationId",key:"Viewed",storage:"L"});BMS.Misc.fnAjax({url:"/serv/getData",type:"GET",data:{cmd:"GETNOTIF",viewed_notif:e,v:Math.random().toString().substr(0,6)},success:function(e){if(e.error);else{var t="";if(null==e.announcements&&null==e.notifications||0==e.announcements.length&&0==e.notifications.length?t+="":(null==e.announcements&&(e.announcements=[]),null==e.notifications&&(e.notifications=[]),t+=BMS.Notifications.generateHTML(e.announcements,"A")+BMS.Notifications.generateHTML(e.notifications,"N")),$("#notification").html(t),0==BMS.Notifications.notifCount&&""==t){var n='<div class="empty-notification"><div class="notif-bell"><span class="__icon" style="height: 50px; width: 50px;"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><g><path fill="#1CBAB1" d="M77.5,79.3c-1.6,0-3.4-3.4-3.4-7.8V48.7h0C73.9,35.2,63.3,24,49.4,21.6c-0.3-2.8-2.7-5-5.5-5s-5.3,2.2-5.5,5C24.3,24,13.7,35.2,13.6,48.7h0v22.7c0,4.5-1.8,7.8-3.4,7.8c-1.9,0-3.4,1.5-3.4,3.4c0,1.9,1.5,3.4,3.4,3.4h23.7c0.6,5,4.8,9,10,9s9.4-3.9,10-9h23.7c1.9,0,3.4-1.5,3.4-3.4C80.8,80.8,79.3,79.3,77.5,79.3z M43.8,18.8c1.5,0,2.8,1,3.2,2.5c-1.1-0.1-2.1-0.2-3.2-0.2s-2.2,0.1-3.2,0.2C41,19.8,42.3,18.8,43.8,18.8z M15.8,71.5V49c0-14.2,12.6-25.7,28-25.7s28,11.5,28,25.7v22.4c0,3.3,0.8,6,2,7.8H13.8C15,77.5,15.8,74.7,15.8,71.5z M43.8,92.8c-3.9,0-7.2-2.9-7.7-6.7h15.5C51,89.8,47.8,92.8,43.8,92.8zM77.5,83.8H10.2c-0.6,0-1.1-0.5-1.1-1.1s0.5-1.1,1.1-1.1h67.3c0.6,0,1.1,0.5,1.1,1.1S78.1,83.8,77.5,83.8z"/><path fill="#1CBAB1" d="M50.6,63.6c-0.6,0-1.1,0.5-1.1,1.1c0,3.1-2.5,5.6-5.6,5.6s-5.6-2.5-5.6-5.6c0-0.6-0.5-1.1-1.1-1.1c-0.6,0-1.1,0.5-1.1,1.1c0,4.3,3.5,7.8,7.8,7.8s7.8-3.5,7.8-7.8C51.7,64.1,51.2,63.6,50.6,63.6z"/><path fill="#1CBAB1" d="M34.9,56.9h-4.5c-0.6,0-1.1,0.5-1.1,1.1c0,0.6,0.5,1.1,1.1,1.1h4.5c0.6,0,1.1-0.5,1.1-1.1C36,57.4,35.5,56.9,34.9,56.9z"/><path fill="#1CBAB1" d="M57.3,56.9h-4.5c-0.6,0-1.1,0.5-1.1,1.1c0,0.6,0.5,1.1,1.1,1.1h4.5c0.6,0,1.1-0.5,1.1-1.1C58.4,57.4,57.9,56.9,57.3,56.9z"/><polygon fill="#56798C" points="73.2,18.9 67.5,18.9 73.2,14 73.2,10.7 61.8,10.7 61.8,14 67.4,14 61.8,18.7 61.8,22.1 73.2,22.1"/><polygon fill="#56798C" points="76.1,10.3 80.2,10.3 76,13.9 76,16.4 84.6,16.4 84.6,14 80.3,14 84.6,10.3 84.6,7.9 76.1,7.9"/><polygon fill="#56798C" points="87.5,6.6 90.2,6.6 87.5,9 87.4,10.7 93.1,10.7 93.1,9.1 90.3,9.1 93.1,6.6 93.2,5 87.5,5"/></g><path fill="#F4F4F4" stroke="#1CBAB1" stroke-width="2" stroke-miterlimit="10" d="M-32.6-26.2c0-3,2.4-5.5,5.5-5.5v-13.4c0-3.4-2.7-6.1-6.1-6.1H-93c-3.4,0-6.1,2.7-6.1,6.1v13.4c3,0,5.5,2.4,5.5,5.5c0,3-2.4,5.5-5.5,5.5v13.4c0,3.4,2.7,6.1,6.1,6.1h59.8c3.4,0,6.1-2.7,6.1-6.1v-13.4C-30.2-20.7-32.6-23.2-32.6-26.2z"/></svg></span></div><div class="empty-notif"><p class="__text">Nothing that rings a <span class="__red-text">bell!</span></p></div></div>';$("#notification-count").html("").removeClass("__alerts-bubble"),$("#notification").html(n)}else BMS.Notifications.notifCount>0&&($("#notification-count").html(BMS.Notifications.notifCount),$("#notification-count").hasClass("__alerts-bubble")||$("#notification-count").addClass("__alerts-bubble"));BMS.Storage.isset({name:"ld"})&&BMS.Storage.set({name:"notificationId",key:"Viewed",storage:"L",value:""})}},error:function(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.getData.fnAjax.error",err:e})}})}catch(t){BMS.Misc.fnErr({fnName:"BMS.Notifications.getData",err:t})}},BMS.Notifications.callMarkNotif=function(e){try{var t=BMS.Storage.get({name:"notificationId",key:"Viewed",storage:"L"}),n={notificationId:t};BMS.Misc.fnAjax({url:"/serv/getData",type:"GET",data:{cmd:"MARKNOTIFVIEWED",id:n.notificationId},success:function(t){var i=BMS.Storage.get({name:"markedViewId",key:"marked",storage:"L"});if(i){var a=n.notificationId.split(","),s="";$.each(a,function(e,t){var n=t&&-1==i.indexOf(t)?","+t:"";s+=n});var r=i+s}else if(n.notificationId)var r=n.notificationId;r&&BMS.Storage.set({name:"markedViewId",key:"marked",storage:"L",value:r}),1==e&&BMS.Notifications.getData()},error:function(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.callMarkNotif.fnAjax.error",err:e})}})}catch(i){BMS.Misc.fnErr({fnName:"BMS.Notifications.callMarkNotif",err:i})}},BMS.Notifications.setAndGetData=function(){try{BMS.Notifications.callMarkNotif(1)}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.setAndGetData",err:e})}},BMS.Notifications.setViewed=function(){try{BMS.Notifications.callMarkNotif(0),$("#notification-count").html("").removeClass("__alerts-bubble")}catch(e){BMS.Misc.fnErr({fnName:"BMS.Notifications.setViewed",err:e})}},BMS.Notifications.callSetViewed=function(){try{var e=BMS.Storage.isset({name:"ld",key:"MEMBERID",storage:"C"}),t=[];if(BMS.Storage.get({name:"markedViewId",key:"marked",storage:"L"}))var n=BMS.Storage.get({name:"markedViewId",key:"marked",storage:"L"}).split(",");else var n=[];$(".child-notifications").each(function(){var e=$(this).attr("notif_id");-1==$.inArray(e,n)&&t.push(e)}),BMS.Storage.set({name:"notificationId",key:"Viewed",storage:"L",value:t}),e&&BMS.Notifications.setViewed(),$("#notification-count").html("").removeClass("__alerts-bubble")}catch(i){BMS.Misc.fnErr({fnName:"BMS.Notifications.callSetViewed",err:i})}};var retInt="";BMS.Notifications.checkNotif=function(){try{if($("#notification").length>0){var e=BMS.Storage.isset({name:"ld",key:"MEMBERID",storage:"C"});e?BMS.Notifications.setAndGetData():BMS.Notifications.getData()}}catch(t){BMS.Misc.fnErr({fnName:"BMS.Notifications.checkNotif",err:t})}},$(function(){BMS.Notifications.checkNotif(),global.SignInCallBack.push(function(){setTimeout(function(){BMS.Notifications.notifCount=0,$(".notification-dropdown-wrapper").hide(),BMS.Notifications.setAndGetData()},50)}),$(".notification-alert").click(function(){BMS.Notifications.callSetViewed()})}),window.stopWowLoad=!1,function(){var e,t,n,i,a,s=function(e,t){return function(){return e.apply(t,arguments)}},r=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};t=function(){function e(){}return e.prototype.extend=function(e,t){var n,i;for(n in t)i=t[n],null==e[n]&&(e[n]=i);return e},e.prototype.isMobile=function(e){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)},e.prototype.createEvent=function(e,t,n,i){var a;return null==t&&(t=!1),null==n&&(n=!1),null==i&&(i=null),null!=document.createEvent?(a=document.createEvent("CustomEvent"),a.initCustomEvent(e,t,n,i)):null!=document.createEventObject?(a=document.createEventObject(),a.eventType=e):a.eventName=e,a},e.prototype.emitEvent=function(e,t){return null!=e.dispatchEvent?e.dispatchEvent(t):t in(null!=e)?e[t]():"on"+t in(null!=e)?e["on"+t]():void 0},e.prototype.addEvent=function(e,t,n){return null!=e.addEventListener?e.addEventListener(t,n,!1):null!=e.attachEvent?e.attachEvent("on"+t,n):e[t]=n},e.prototype.removeEvent=function(e,t,n){return null!=e.removeEventListener?e.removeEventListener(t,n,!1):null!=e.detachEvent?e.detachEvent("on"+t,n):delete e[t]},e.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},e}(),n=this.WeakMap||this.MozWeakMap||(n=function(){function e(){this.keys=[],this.values=[]}return e.prototype.get=function(e){var t,n,i,a,s;for(s=this.keys,t=i=0,a=s.length;a>i;t=++i)if(n=s[t],n===e)return this.values[t]},e.prototype.set=function(e,t){var n,i,a,s,r;for(r=this.keys,n=a=0,s=r.length;s>a;n=++a)if(i=r[n],i===e)return void(this.values[n]=t);return this.keys.push(e),this.values.push(t)},e}()),e=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(e=function(){function e(){"undefined"!=typeof console&&null!==console&&void 0,"undefined"!=typeof console&&null!==console&&void 0}return e.notSupported=!0,e.prototype.observe=function(){},e}()),i=this.getComputedStyle||function(e,t){return this.getPropertyValue=function(t){var n;return"float"===t&&(t="styleFloat"),a.test(t)&&t.replace(a,function(e,t){return t.toUpperCase()}),(null!=(n=e.currentStyle)?n[t]:void 0)||null},this},a=/(\-([a-z]){1})/g,this.WOW=function(){function a(e){null==e&&(e={}),this.scrollCallback=s(this.scrollCallback,this),this.scrollHandler=s(this.scrollHandler,this),this.resetAnimation=s(this.resetAnimation,this),this.start=s(this.start,this),this.scrolled=!0,this.config=this.util().extend(e,this.defaults),this.animationNameCache=new n,this.wowEvent=this.util().createEvent(this.config.boxClass)}return a.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!1,live:!0,lazyLoad:!0,lazyLaodOffset:-100,callback:null},a.prototype.init=function(){void 0;var e;return this.element=window.document.documentElement,"interactive"===(e=document.readyState)||"complete"===e?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},a.prototype.start=function(){var t,n,i,a;if(this.stopped=!1,this.boxes=function(){var e,n,i,a;for(i=this.element.querySelectorAll("."+this.config.boxClass),a=[],e=0,n=i.length;n>e;e++)t=i[e],a.push(t);return a}.call(this),void 0,this.all=function(){var e,n,i,a;for(i=this.boxes,a=[],e=0,n=i.length;n>e;e++)t=i[e],a.push(t);return a}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(a=this.boxes,this.mobile()&&this.resetStyle(),n=0,i=a.length;i>n;n++)t=a[n],this.mobile()||this.applyStyle(t,!0),this.isClosetoViewport(t)&&!stopWowLoad&&this.lazyLoad(t);return this.disabled()||(this.util().addEvent(window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live?new e(function(e){return function(t){var n,i,a,s,r;for(r=[],n=0,i=t.length;i>n;n++)s=t[n],r.push(function(){var e,t,n,i;for(n=s.addedNodes||[],i=[],e=0,t=n.length;t>e;e++)a=n[e],i.push(this.doSync(a));return i}.call(e));return r}}(this)).observe(document.body,{childList:!0,subtree:!0}):void 0},a.prototype.stop=function(){return this.stopped=!0,this.util().removeEvent(window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval?clearInterval(this.interval):void 0},a.prototype.sync=function(t){return e.notSupported?this.doSync(this.element):void 0},a.prototype.doSync=function(e){var t,n,i,a,s;if(null==e&&(e=this.element),1===e.nodeType){for(e=e.parentNode||e,a=e.querySelectorAll("."+this.config.boxClass),s=[],n=0,i=a.length;i>n;n++)t=a[n],r.call(this.all,t)<0?(this.boxes.push(t),this.all.push(t),this.stopped||this.disabled()||this.mobile()?this.resetStyle():this.applyStyle(t,!0),s.push(this.scrolled=!0)):s.push(void 0);return s}},a.prototype.lazyLoad=function(e){var t,n,i,a;if(a=this.mobile()?"data-mobile":"data-src",i=e.querySelectorAll("img["+a+"]"),i&&this.config.lazyLoad)for(var s=0;s<i.length;s++)if(n=i[s],t=n.getAttribute(a),""!=t){var r=$(n);r.parent().find(".img-placeholder").hide(),n.setAttribute("src",t),r.one("error",function(e){var t=$(this).attr("data-error");this.setAttribute("src",t)}),r.one("load",function(){$(this).parents(".is-loading").removeClass("is-loading")})}},a.prototype.show=function(e){return this.applyStyle(e),e.className=e.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(e),this.util().emitEvent(e,this.wowEvent),this.util().addEvent(e,"animationend",this.resetAnimation),this.util().addEvent(e,"oanimationend",this.resetAnimation),this.util().addEvent(e,"webkitAnimationEnd",this.resetAnimation),this.util().addEvent(e,"MSAnimationEnd",this.resetAnimation),e},a.prototype.applyStyle=function(e,t){var n,i,a;return i=e.getAttribute("data-wow-duration"),n=e.getAttribute("data-wow-delay"),a=e.getAttribute("data-wow-iteration"),this.animate(function(s){return function(){return s.customStyle(e,t,i,n,a)}}(this))},a.prototype.animate=function(){return"requestAnimationFrame"in window?function(e){return window.requestAnimationFrame(e)}:function(e){return e()}}(),a.prototype.resetStyle=function(){var e,t,n,i,a;for(i=this.boxes,a=[],t=0,n=i.length;n>t;t++)e=i[t],a.push(e.style.visibility="visible");return a},a.prototype.resetAnimation=function(e){var t;return e.type.toLowerCase().indexOf("animationend")>=0?(t=e.target||e.srcElement,t.className=t.className.replace(this.config.animateClass,"").trim()):void 0},a.prototype.customStyle=function(e,t,n,i,a){return t&&this.cacheAnimationName(e),e.style.visibility=t?"hidden":"visible",n&&this.vendorSet(e.style,{animationDuration:n}),i&&this.vendorSet(e.style,{animationDelay:i}),a&&this.vendorSet(e.style,{animationIterationCount:a}),this.vendorSet(e.style,{animationName:t?"none":this.cachedAnimationName(e)}),e},a.prototype.vendors=["moz","webkit"],a.prototype.vendorSet=function(e,t){var n,i,a,s;i=[];for(n in t)a=t[n],e[""+n]=a,i.push(function(){var t,i,r,o;for(r=this.vendors,o=[],t=0,i=r.length;i>t;t++)s=r[t],o.push(e[""+s+n.charAt(0).toUpperCase()+n.substr(1)]=a);return o}.call(this));return i},
a.prototype.vendorCSS=function(e,t){var n,a,s,r,o,l;for(o=i(e),r=o.getPropertyCSSValue(t),s=this.vendors,n=0,a=s.length;a>n;n++)l=s[n],r=r||o.getPropertyCSSValue("-"+l+"-"+t);return r},a.prototype.animationName=function(e){var t;try{t=this.vendorCSS(e,"animation-name").cssText}catch(n){t=i(e).getPropertyValue("animation-name")}return"none"===t?"":t},a.prototype.cacheAnimationName=function(e){return this.animationNameCache.set(e,this.animationName(e))},a.prototype.cachedAnimationName=function(e){return this.animationNameCache.get(e)},a.prototype.scrollHandler=function(){return this.scrolled=!0},a.prototype.scrollCallback=function(){var e;return!this.scrolled||(this.scrolled=!1,this.boxes=function(){var t,n,i,a;for(i=this.boxes,a=[],t=0,n=i.length;n>t;t++)e=i[t],e&&(this.isClosetoViewport(e)&&!stopWowLoad&&this.lazyLoad(e),this.isVisible(e)&&this.isClosetoViewport(e)&&(this.show(e),!stopWowLoad)||a.push(e));return a}.call(this),this.boxes.length||this.config.live)?void 0:this.stop()},a.prototype.offsetTop=function(e){for(var t;void 0===e.offsetTop;)e=e.parentNode;for(t=e.offsetTop;e=e.offsetParent;)t+=e.offsetTop;return t},a.prototype.isPositionFixed=function(e){var t;for(t=i(e).position;e.parentNode&&"body"!==e.parentNode.localName&&"fixed"!==t&&(t=i(e).position,"fixed"!==t);)e=e.parentNode;return"fixed"===t?!0:!1},a.prototype.isVisible=function(e){var t,n,i,a,s,r=window.pageYOffset,o=$(e),l=e.className;if(l.indexOf("fixed-card")>-1){var c=o.parents(".fixed-wrapper");if(!c.is(":visible"))return!1;r=c.scrollTop()}return n=e.getAttribute("data-wow-offset")||this.config.offset,s=r,a=s+Math.min(this.element.clientHeight,this.util().innerHeight())-n,i=this.offsetTop(e),t=i+e.clientHeight,a>=i&&t>=s},a.prototype.isClosetoViewport=function(e){var t,n,i,a,s,r=window.pageYOffset,o=$(e),l=e.className;if(l.indexOf("fixed-card")>-1){var c=o.parents(".fixed-wrapper");if(!c.is(":visible"))return!1;r=c.scrollTop()}return n=parseInt(this.config.lazyLoadOffset),s=r,a=s+Math.min(this.element.clientHeight,this.util().innerHeight())-n,i=this.offsetTop(e),0==e.clientHeight?!1:(t=i+e.clientHeight,a>=i&&t>=s)},a.prototype.util=function(){return null!=this._util?this._util:this._util=new t},a.prototype.disabled=function(){return!1},a.prototype.mobile=function(){return this.util().isMobile(navigator.userAgent)},a}()}.call(this),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){function t(e){if(e in u.style)return e;for(var t=["Moz","Webkit","O","ms"],n=e.charAt(0).toUpperCase()+e.substr(1),i=0;i<t.length;++i){var a=t[i]+n;if(a in u.style)return a}}function n(){return u.style[p.transform]="",u.style[p.transform]="rotateY(90deg)",""!==u.style[p.transform]}function i(e){return"string"==typeof e&&this.parse(e),this}function a(e,t,n){t===!0?e.queue(n):t?e.queue(t,n):e.each(function(){n.call(this)})}function s(t){var n=[];return e.each(t,function(t){t=e.camelCase(t),t=e.transit.propertyMap[t]||e.cssProps[t]||t,t=l(t),p[t]&&(t=l(p[t])),-1===e.inArray(t,n)&&n.push(t)}),n}function r(t,n,i,a){var r=s(t);e.cssEase[i]&&(i=e.cssEase[i]);var o=""+d(n)+" "+i;parseInt(a,10)>0&&(o+=" "+d(a));var l=[];return e.each(r,function(e,t){l.push(t+" "+o)}),l.join(", ")}function o(t,n){n||(e.cssNumber[t]=!0),e.transit.propertyMap[t]=p.transform,e.cssHooks[t]={get:function(n){var i=e(n).css("transit:transform");return i.get(t)},set:function(n,i){var a=e(n).css("transit:transform");a.setFromString(t,i),e(n).css({"transit:transform":a})}}}function l(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function c(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function d(t){var n=t;return"string"!=typeof n||n.match(/^[\-0-9\.]+/)||(n=e.fx.speeds[n]||e.fx.speeds._default),c(n,"ms")}e.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var u=document.createElement("div"),p={},f=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;p.transition=t("transition"),p.transitionDelay=t("transitionDelay"),p.transform=t("transform"),p.transformOrigin=t("transformOrigin"),p.filter=t("Filter"),p.transform3d=n();var h={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},g=p.transitionEnd=h[p.transition]||null;for(var v in p)p.hasOwnProperty(v)&&"undefined"==typeof e.support[v]&&(e.support[v]=p[v]);return u=null,e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new i},set:function(t,n){var a=n;a instanceof i||(a=new i(a)),"WebkitTransform"!==p.transform||f?t.style[p.transform]=a.toString():t.style[p.transform]=a.toString(!0),e(t).data("transform",a)}},e.cssHooks.transform={set:e.cssHooks["transit:transform"].set},e.cssHooks.filter={get:function(e){return e.style[p.filter]},set:function(e,t){e.style[p.filter]=t}},e.fn.jquery<"1.8"&&(e.cssHooks.transformOrigin={get:function(e){return e.style[p.transformOrigin]},set:function(e,t){e.style[p.transformOrigin]=t}},e.cssHooks.transition={get:function(e){return e.style[p.transition]},set:function(e,t){e.style[p.transition]=t}}),o("scale"),o("scaleX"),o("scaleY"),o("translate"),o("rotate"),o("rotateX"),o("rotateY"),o("rotate3d"),o("perspective"),o("skewX"),o("skewY"),o("x",!0),o("y",!0),i.prototype={setFromString:function(e,t){var n="string"==typeof t?t.split(","):t.constructor===Array?t:[t];n.unshift(e),i.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=c(e,"deg")},rotateX:function(e){this.rotateX=c(e,"deg")},rotateY:function(e){this.rotateY=c(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=c(e,"deg")},skewY:function(e){this.skewY=c(e,"deg")},perspective:function(e){this.perspective=c(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==e&&void 0!==e&&(this._translateX=c(e,"px")),null!==t&&void 0!==t&&(this._translateY=c(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;3>=t;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=c(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,i){t.setFromString(n,i)})},toString:function(e){var t=[];for(var n in this)if(this.hasOwnProperty(n)){if(!p.transform3d&&("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n))continue;"_"!==n[0]&&(e&&"scale"===n?t.push(n+"3d("+this[n]+",1)"):e&&"translate"===n?t.push(n+"3d("+this[n]+",0)"):t.push(n+"("+this[n]+")"))}return t.join(" ")}},e.fn.transition=e.fn.transit=function(t,n,i,s){var o=this,l=0,c=!0,u=e.extend(!0,{},t);"function"==typeof n&&(s=n,n=void 0),"object"==typeof n&&(i=n.easing,l=n.delay||0,c="undefined"==typeof n.queue?!0:n.queue,s=n.complete,n=n.duration),"function"==typeof i&&(s=i,i=void 0),"undefined"!=typeof u.easing&&(i=u.easing,delete u.easing),"undefined"!=typeof u.duration&&(n=u.duration,delete u.duration),"undefined"!=typeof u.complete&&(s=u.complete,delete u.complete),"undefined"!=typeof u.queue&&(c=u.queue,delete u.queue),"undefined"!=typeof u.delay&&(l=u.delay,delete u.delay),"undefined"==typeof n&&(n=e.fx.speeds._default),"undefined"==typeof i&&(i=e.cssEase._default),n=d(n);var f=r(u,n,i,l),h=e.transit.enabled&&p.transition,v=h?parseInt(n,10)+parseInt(l,10):0;if(0===v){var m=function(e){o.css(u),s&&s.apply(o),e&&e()};return a(o,c,m),o}var y={},S=function(t){var n=!1,i=function(){n&&o.unbind(g,i),v>0&&o.each(function(){this.style[p.transition]=y[this]||null}),"function"==typeof s&&s.apply(o),"function"==typeof t&&t()};v>0&&g&&e.transit.useTransitionEnd?(n=!0,o.bind(g,i)):window.setTimeout(i,v),o.each(function(){v>0&&(this.style[p.transition]=f),e(this).css(u)})},w=function(e){this.offsetWidth,S(e)};return a(o,c,w),this},e.transit.getTransitionValue=r,e}),function(e){e.fn.tabs=function(t){var n,i,a=e(this),s=a.find(".tab-toggle");s.on("click",function(t){n=e(this).attr("data-toggle"),i=a.find("#"+n),a.find(".tab-content._active").removeClass("_active"),a.find(".tab-toggle._active").removeClass("_active"),i.addClass("_active"),i.find(".dd-cards"),e(this).addClass("_active")})}}(jQuery),function(){var e={mailcheck:{threshold:5,defaultDomains:["gmail.com","yahoo.com","yahoo.co.in","hotmail.com","in.com","sify.com","rediffmail.com","ymail.com","yahoo.in","rediff.com","rocketmail.com","live.com","live.in","google.com","indiatimes.com","mail.com","bookmyshow.com","bigtree.in","ovi.com","aol.com","aol.in","indiya.com","vsnl.net","india.com","eth.net","talktalk.com","airtelmail.in","inbox.com","hotmail.co.uk","yahoomail.co.in","msn.com","satyam.com","live.co.uk","yahoo.com.au","hotmail.ca","cooltoad.com","zmail.com","sifymail.com","facebook.com","rediffmail.co.in","gmail.co.in","bsnl.co.in","hotmail.in","boxbe.com","webdunia.com","mail.yahoo.co.in","outlook.in","outlook.com","rediffmail.in","comcast.net","yahoo.co.uk","yahoo.ca","btinternet.com","zoho.com","me.com","mac.com","live.com","googlemail.com","verizon.net","sbcglobal.net","att.net","gmx.com"],defaultTopLevelDomains:["co.uk","co.in","com","net","org","info","edu","gov","mil","in","ca","com.au"],run:function(t){t.domains=t.domains||e.mailcheck.defaultDomains,t.topLevelDomains=t.topLevelDomains||e.mailcheck.defaultTopLevelDomains,t.distanceFunction=t.distanceFunction||e.sift3Distance;var n=e.mailcheck.suggest(encodeURI(t.email),t.domains,t.topLevelDomains,t.distanceFunction);n?t.suggested&&t.suggested(n):t.empty&&t.empty()},suggest:function(e,t,n,i){e=e.toLowerCase();var a=this.splitEmail(e),s=this.findClosestDomain(a.domain,t,i);if(s){if(s!=a.domain)return{address:a.address,domain:s,full:a.address+"@"+s}}else{var r=this.findClosestDomain(a.topLevelDomain,n);if(a.domain&&r&&r!=a.topLevelDomain){var o=a.domain;return s=o.substring(0,o.lastIndexOf(a.topLevelDomain))+r,{address:a.address,domain:s,full:a.address+"@"+s}}}return!1},findClosestDomain:function(e,t,n){var i,a=99,s=null;if(!e||!t)return!1;n||(n=this.sift3Distance);for(var r=0;r<t.length;r++){if(e===t[r])return e;i=n(e,t[r]),a>i&&(a=i,s=t[r])}return a<=this.threshold&&null!==s?s:!1},sift3Distance:function(e,t){if(null==e||0===e.length)return null==t||0===t.length?0:t.length;if(null==t||0===t.length)return e.length;for(var n=0,i=0,a=0,s=0,r=5;n+i<e.length&&n+a<t.length;){if(e.charAt(n+i)==t.charAt(n+a))s++;else{i=0,a=0;for(var o=0;r>o;o++){if(n+o<e.length&&e.charAt(n+o)==t.charAt(n)){i=o;break}if(n+o<t.length&&e.charAt(n)==t.charAt(n+o)){a=o;break}}}n++}return(e.length+t.length)/2-s},splitEmail:function(e){var t=e.split("@");if(t.length<2)return!1;for(var n=0;n<t.length;n++)if(""===t[n])return!1;var i=t.pop(),a=i.split("."),s="";if(0==a.length)return!1;if(1==a.length)s=a[0];else{for(var n=1;n<a.length;n++)s+=a[n]+".";a.length>=2&&(s=s.substring(0,s.length-1))}return{topLevelDomain:s,domain:i,address:t.join("@")}}}};"undefined"!=typeof module&&module.exports&&(module.exports=e.mailcheck),"undefined"!=typeof window&&window.jQuery&&!function(t){t.fn.mailcheck=function(t){var n=this;if(t.suggested){var i=t.suggested;t.suggested=function(e){i(n,e)}}if(t.empty){var a=t.empty;t.empty=function(){a.call(null,n)}}t.email=this.val(),e.mailcheck.run(t)}}(jQuery)}(),function(e){e.fn.setAltText=function(t){var n=e(this);return window.navigator.userAgent.indexOf("MSIE ")>-1?n:n.each(function(n,i){i=e(i);var a=i.attr("placeholder")||"",s=void 0!=a?a:t&&t.text&&""!=t.text?t.text:"Enter text",r=t&&t.blurcolor?t.blurcolor:"#7F7F7F",o=t&&t.focuscolor?t.focuscolor:i.css("color");i.bind({blur:function(){i.val()==s||""==i.val()?i.val(s).css("color",r):i.css("color",o)},focus:function(){i.val()==s&&i.val("").css("color",o)}}),i.is(":focus")||i.val(s).css("color",r)})}}(jQuery),function(e){e.fn.doEnter=function(t){return e(this).unbind("keypress"),e(this).bind("keypress",function(e){var n=e.keyCode||e.which;13==n&&t&&t.callback&&t.callback()})}}(jQuery);var xhrQueue=[];if(function(){function e(e){function t(t,n,i,a,s,r){for(;s>=0&&r>s;s+=e){var o=a?a[s]:s;i=n(i,t[o],o,t)}return i}return function(n,i,a,s){i=S(i,s,4);var r=!x(n)&&y.keys(n),o=(r||n).length,l=e>0?0:o-1;return arguments.length<3&&(a=n[r?r[l]:l],l+=e),t(n,i,a,r,l,o)}}function t(e){return function(t,n,i){n=w(n,i);for(var a=_(t),s=e>0?0:a-1;s>=0&&a>s;s+=e)if(n(t[s],s,t))return s;return-1}}function n(e,t,n){return function(i,a,s){var r=0,o=_(i);if("number"==typeof s)e>0?r=s>=0?s:Math.max(s+o,r):o=s>=0?Math.min(s+1,o):s+o+1;else if(n&&s&&o)return s=n(i,a),i[s]===a?s:-1;if(a!==a)return s=t(d.call(i,r,o),y.isNaN),s>=0?s+r:-1;for(s=e>0?r:o-1;s>=0&&o>s;s+=e)if(i[s]===a)return s;return-1}}function i(e,t){var n=A.length,i=e.constructor,a=y.isFunction(i)&&i.prototype||o,s="constructor";for(y.has(e,s)&&!y.contains(t,s)&&t.push(s);n--;)s=A[n],s in e&&e[s]!==a[s]&&!y.contains(t,s)&&t.push(s)}var a=this,s=a._,r=Array.prototype,o=Object.prototype,l=Function.prototype,c=r.push,d=r.slice,u=o.toString,p=o.hasOwnProperty,f=Array.isArray,h=Object.keys,g=l.bind,v=Object.create,m=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):a._=y,y.VERSION="1.8.3";var S=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,a){return e.call(t,n,i,a)};case 4:return function(n,i,a,s){return e.call(t,n,i,a,s)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return null==e?y.identity:y.isFunction(e)?S(e,t,n):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return w(e,t,1/0)};var b=function(e,t){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var a=1;i>a;a++)for(var s=arguments[a],r=e(s),o=r.length,l=0;o>l;l++){var c=r[l];t&&void 0!==n[c]||(n[c]=s[c])}return n}},M=function(e){if(!y.isObject(e))return{};if(v)return v(e);m.prototype=e;var t=new m;return m.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},k=Math.pow(2,53)-1,_=C("length"),x=function(e){var t=_(e);return"number"==typeof t&&t>=0&&k>=t};y.each=y.forEach=function(e,t,n){t=S(t,n);var i,a;if(x(e))for(i=0,a=e.length;a>i;i++)t(e[i],i,e);else{var s=y.keys(e);for(i=0,a=s.length;a>i;i++)t(e[s[i]],s[i],e)}return e},y.map=y.collect=function(e,t,n){t=w(t,n);for(var i=!x(e)&&y.keys(e),a=(i||e).length,s=Array(a),r=0;a>r;r++){var o=i?i[r]:r;s[r]=t(e[o],o,e)}return s},y.reduce=y.foldl=y.inject=e(1),y.reduceRight=y.foldr=e(-1),y.find=y.detect=function(e,t,n){var i;return i=x(e)?y.findIndex(e,t,n):y.findKey(e,t,n),void 0!==i&&-1!==i?e[i]:void 0},y.filter=y.select=function(e,t,n){var i=[];return t=w(t,n),y.each(e,function(e,n,a){t(e,n,a)&&i.push(e)}),i},y.reject=function(e,t,n){return y.filter(e,y.negate(w(t)),n)},y.every=y.all=function(e,t,n){t=w(t,n);for(var i=!x(e)&&y.keys(e),a=(i||e).length,s=0;a>s;s++){var r=i?i[s]:s;if(!t(e[r],r,e))return!1}return!0},y.some=y.any=function(e,t,n){t=w(t,n);for(var i=!x(e)&&y.keys(e),a=(i||e).length,s=0;a>s;s++){var r=i?i[s]:s;if(t(e[r],r,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,i){return x(e)||(e=y.values(e)),("number"!=typeof n||i)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=function(e,t){var n=d.call(arguments,2),i=y.isFunction(t);return y.map(e,function(e){var a=i?t:e[t];return null==a?a:a.apply(e,n)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var i,a,s=-1/0,r=-1/0;if(null==t&&null!=e){e=x(e)?e:y.values(e);for(var o=0,l=e.length;l>o;o++)i=e[o],i>s&&(s=i)}else t=w(t,n),y.each(e,function(e,n,i){a=t(e,n,i),(a>r||a===-1/0&&s===-1/0)&&(s=e,r=a)});return s},y.min=function(e,t,n){var i,a,s=1/0,r=1/0;if(null==t&&null!=e){e=x(e)?e:y.values(e);for(var o=0,l=e.length;l>o;o++)i=e[o],s>i&&(s=i)}else t=w(t,n),y.each(e,function(e,n,i){a=t(e,n,i),(r>a||1/0===a&&1/0===s)&&(s=e,r=a)});return s},y.shuffle=function(e){for(var t,n=x(e)?e:y.values(e),i=n.length,a=Array(i),s=0;i>s;s++)t=y.random(0,s),t!==s&&(a[s]=a[t]),a[t]=n[s];return a},y.sample=function(e,t,n){return null==t||n?(x(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,n){return t=w(t,n),y.pluck(y.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var E=function(e){return function(t,n,i){var a={};return n=w(n,i),y.each(t,function(i,s){var r=n(i,s,t);e(a,i,r)}),a}};y.groupBy=E(function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=E(function(e,t,n){e[n]=t}),y.countBy=E(function(e,t,n){y.has(e,n)?e[n]++:e[n]=1}),y.toArray=function(e){return e?y.isArray(e)?d.call(e):x(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:x(e)?e.length:y.keys(e).length},y.partition=function(e,t,n){t=w(t,n);var i=[],a=[];return y.each(e,function(e,n,s){(t(e,n,s)?i:a).push(e)}),[i,a]},y.first=y.head=y.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var B=function(e,t,n,i){for(var a=[],s=0,r=i||0,o=_(e);o>r;r++){var l=e[r];if(x(l)&&(y.isArray(l)||y.isArguments(l))){t||(l=B(l,t,n));var c=0,d=l.length;for(a.length+=d;d>c;)a[s++]=l[c++]}else n||(a[s++]=l)}return a};y.flatten=function(e,t){return B(e,t,!1)},y.without=function(e){return y.difference(e,d.call(arguments,1))},y.uniq=y.unique=function(e,t,n,i){y.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=w(n,i));for(var a=[],s=[],r=0,o=_(e);o>r;r++){var l=e[r],c=n?n(l,r,e):l;t?(r&&s===c||a.push(l),s=c):n?y.contains(s,c)||(s.push(c),a.push(l)):y.contains(a,l)||a.push(l)}return a},y.union=function(){return y.uniq(B(arguments,!0,!0))},y.intersection=function(e){for(var t=[],n=arguments.length,i=0,a=_(e);a>i;i++){var s=e[i];if(!y.contains(t,s)){for(var r=1;n>r&&y.contains(arguments[r],s);r++);r===n&&t.push(s)}}return t},y.difference=function(e){var t=B(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,_).length||0,n=Array(t),i=0;t>i;i++)n[i]=y.pluck(e,i);return n},y.object=function(e,t){for(var n={},i=0,a=_(e);a>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},y.findIndex=t(1),y.findLastIndex=t(-1),y.sortedIndex=function(e,t,n,i){n=w(n,i,1);for(var a=n(t),s=0,r=_(e);r>s;){var o=Math.floor((s+r)/2);n(e[o])<a?s=o+1:r=o}return s},y.indexOf=n(1,y.findIndex,y.sortedIndex),y.lastIndexOf=n(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),a=Array(i),s=0;i>s;s++,e+=n)a[s]=e;return a};var T=function(e,t,n,i,a){if(!(i instanceof t))return e.apply(n,a);var s=M(e.prototype),r=e.apply(s,a);return y.isObject(r)?r:s};y.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,d.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),i=function(){return T(e,i,t,this,n.concat(d.call(arguments)))};return i},y.partial=function(e){var t=d.call(arguments,1),n=function(){for(var i=0,a=t.length,s=Array(a),r=0;a>r;r++)s[r]=t[r]===y?arguments[i++]:t[r];for(;i<arguments.length;)s.push(arguments[i++]);return T(e,n,this,this,s)};return n},y.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(t=1;i>t;t++)n=arguments[t],e[n]=y.bind(e[n],e);return e},y.memoize=function(e,t){var n=function(i){var a=n.cache,s=""+(t?t.apply(this,arguments):i);return y.has(a,s)||(a[s]=e.apply(this,arguments)),a[s]};return n.cache={},n},y.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var i,a,s,r=null,o=0;n||(n={});var l=function(){o=n.leading===!1?0:y.now(),r=null,s=e.apply(i,a),r||(i=a=null)};return function(){var c=y.now();o||n.leading!==!1||(o=c);var d=t-(c-o);return i=this,a=arguments,0>=d||d>t?(r&&(clearTimeout(r),r=null),o=c,s=e.apply(i,a),r||(i=a=null)):r||n.trailing===!1||(r=setTimeout(l,d)),s}},y.debounce=function(e,t,n){var i,a,s,r,o,l=function(){var c=y.now()-r;t>c&&c>=0?i=setTimeout(l,t-c):(i=null,n||(o=e.apply(s,a),i||(s=a=null)))};return function(){s=this,a=arguments,r=y.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(o=e.apply(s,a),s=a=null),o}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},y.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},y.once=y.partial(y.before,2);var $=!{toString:null}.propertyIsEnumerable("toString"),A=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(e){if(!y.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return $&&i(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return $&&i(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,i=Array(n),a=0;n>a;a++)i[a]=e[t[a]];return i},y.mapObject=function(e,t,n){t=w(t,n);for(var i,a=y.keys(e),s=a.length,r={},o=0;s>o;o++)i=a[o],r[i]=t(e[i],i,e);return r},y.pairs=function(e){for(var t=y.keys(e),n=t.length,i=Array(n),a=0;n>a;a++)i[a]=[t[a],e[t[a]]];return i},y.invert=function(e){for(var t={},n=y.keys(e),i=0,a=n.length;a>i;i++)t[e[n[i]]]=n[i];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()},y.extend=b(y.allKeys),y.extendOwn=y.assign=b(y.keys),y.findKey=function(e,t,n){t=w(t,n);for(var i,a=y.keys(e),s=0,r=a.length;r>s;s++)if(i=a[s],t(e[i],i,e))return i},y.pick=function(e,t,n){var i,a,s={},r=e;if(null==r)return s;y.isFunction(t)?(a=y.allKeys(r),i=S(t,n)):(a=B(arguments,!1,!1,1),i=function(e,t,n){return t in n},r=Object(r));for(var o=0,l=a.length;l>o;o++){var c=a[o],d=r[c];i(d,c,r)&&(s[c]=d)}return s},y.omit=function(e,t,n){if(y.isFunction(t))t=y.negate(t);else{var i=y.map(B(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(i,t)}}return y.pick(e,t,n)},y.defaults=b(y.allKeys,!0),y.create=function(e,t){var n=M(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),i=n.length;if(null==e)return!i;for(var a=Object(e),s=0;i>s;s++){var r=n[s];if(t[r]!==a[r]||!(r in a))return!1}return!0};var I=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var a=u.call(e);if(a!==u.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s="[object Array]"===a;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var r=e.constructor,o=t.constructor;if(r!==o&&!(y.isFunction(r)&&r instanceof r&&y.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),s){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!I(e[l],t[l],n,i))return!1}else{var c,d=y.keys(e);if(l=d.length,y.keys(t).length!==l)return!1;for(;l--;)if(c=d[l],!y.has(t,c)||!I(e[c],t[c],n,i))return!1}return n.pop(),i.pop(),!0};y.isEqual=function(e,t){return I(e,t)},y.isEmpty=function(e){return null==e?!0:x(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=f||function(e){return"[object Array]"===u.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===u.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&p.call(e,t)},y.noConflict=function(){return a._=s,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=C,y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var i=Array(Math.max(0,e));t=S(t,n,1);for(var a=0;e>a;a++)i[a]=t(a);return i},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=y.invert(R),P=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",i=RegExp(n),a=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(a,t):e}};y.escape=P(R),y.unescape=P(D),y.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),y.isFunction(i)?i.call(e):i};var L=0;y.uniqueId=function(e){var t=++L+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g,U=function(e){return"\\"+O[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var i=RegExp([(t.escape||N).source,(t.interpolate||N).source,(t.evaluate||N).source].join("|")+"|$","g"),a=0,s="__p+='";e.replace(i,function(t,n,i,r,o){return s+=e.slice(a,o).replace(F,U),a=o+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var r=new Function(t.variable||"obj","_",s)}catch(o){throw o.source=s,o}var l=function(e){return r.call(this,e,y)},c=t.variable||"obj";return l.source="function("+c+"){\n"+s+"}",l},y.chain=function(e){var t=y(e);return t._chain=!0,t};var j=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),j(this,n.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],j(this,n)}}),y.each(["concat","join","slice"],function(e){var t=r[e];y.prototype[e]=function(){return j(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this),function(e,t){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(this,function(e){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"==typeof e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(t){return t instanceof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function i(e,t){return n(t,e)}e.each(t,i)},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,function(e,a){return(i=n.call(null,a,e,t))?void 0:!1}),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,function(e,a){return(i=n.call(null,a,e,t))?!1:void 0}),!!i):i},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(!0,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(t){function n(){return String(t)}return e.isFunction(t)?t:n},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,a;return function(){var s,r,o=this,l=arguments;return s=function(){i=null,n||(a=e.apply(o,l))},r=n&&!i,clearTimeout(i),i=setTimeout(s,t),r&&(a=e.apply(o,l)),a}},throttle:function(e,t){var n,i,a,s,r,o;return r=0,o=function(){r=new Date,a=null,s=e.apply(n,i)},function(){var l=new Date,c=t-(l-r);return n=this,i=arguments,0>=c?(clearTimeout(a),a=null,r=l,s=e.apply(n,i)):a||(a=setTimeout(o,c)),
s}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),n=function(){"use strict";function e(e){var r,o;return o=t.mixin({},s,e),r={css:a(),classes:o,html:n(o),selectors:i(o)},{css:r.css,html:r.html,classes:r.classes,selectors:r.selectors,mixin:function(e){t.mixin(e,r)}}}function n(e){return{wrapper:'<span class="'+e.wrapper+'"></span>',menu:'<div class="'+e.menu+'"></div>'}}function i(e){var n={};return t.each(e,function(e,t){n[t]="."+e}),n}function a(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e}var s={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight",category:"tt-category"};return e}(),i=function(){"use strict";function n(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}var i,a;return i="typeahead:",a={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},t.mixin(n.prototype,{_trigger:function(t,n){var a;return a=e.Event(i+t),(n=n||[]).unshift(a),this.$el.trigger.apply(this.$el,n),a},before:function(e){var t,n;return t=[].slice.call(arguments,1),n=this._trigger("before"+e,t),n.isDefaultPrevented()},trigger:function(e){var t;this._trigger(e,[].slice.call(arguments,1)),(t=a[e])&&this._trigger(t,[].slice.call(arguments,1))}}),n}(),a=function(){"use strict";function e(e,t,n,i){var a;if(!n)return this;for(t=t.split(l),n=i?o(n,i):n,this._callbacks=this._callbacks||{};a=t.shift();)this._callbacks[a]=this._callbacks[a]||{sync:[],async:[]},this._callbacks[a][e].push(n);return this}function t(t,n,i){return e.call(this,"async",t,n,i)}function n(t,n,i){return e.call(this,"sync",t,n,i)}function i(e){var t;if(!this._callbacks)return this;for(e=e.split(l);t=e.shift();)delete this._callbacks[t];return this}function a(e){var t,n,i,a,r;if(!this._callbacks)return this;for(e=e.split(l),i=[].slice.call(arguments,1);(t=e.shift())&&(n=this._callbacks[t]);)a=s(n.sync,this,[t].concat(i)),r=s(n.async,this,[t].concat(i)),a()&&c(r);return this}function s(e,t,n){function i(){for(var i,a=0,s=e.length;!i&&s>a;a+=1)i=e[a].apply(t,n)===!1;return!i}return i}function r(){var e;return e=window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}function o(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var l=/\s+/,c=r();return{onSync:n,onAsync:t,off:i,trigger:a}}(),s=function(e){"use strict";function n(e,n,i){for(var a,s=[],r=0,o=e.length;o>r;r++)s.push(t.escapeRegExChars(e[r]));return a=i?"\\b("+s.join("|")+")\\b":"("+s.join("|")+")",n?new RegExp(a):new RegExp(a,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(a){function s(t){var n,i,s;return(n=o.exec(t.data))&&(s=e.createElement(a.tagName),a.className&&(s.className=a.className),i=t.splitText(n.index),i.splitText(n[0].length),s.appendChild(i.cloneNode(!0)),t.parentNode.replaceChild(s,i)),!!n}function r(e,t){for(var n,i=3,a=0;a<e.childNodes.length;a++)n=e.childNodes[a],n.nodeType===i?a+=t(n)?1:0:r(n,t)}var o;a=t.mixin({},i,a),a.node&&a.pattern&&(a.pattern=t.isArray(a.pattern)?a.pattern:[a.pattern],o=n(a.pattern,a.caseSensitive,a.wordsOnly),r(a.node,s))}}(window.document),r=function(){"use strict";function n(n,a){n=n||{},n.input||e.error("input is missing"),a.mixin(this),this.$hint=e(n.hint),this.$input=e(n.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=i(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop)}function i(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function s(e,t){return n.normalizeQuery(e)===n.normalizeQuery(t)}function r(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var o;return o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(e){return t.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(n.prototype,a,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(e){var t=o[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(e,t){var n;switch(e){case"up":case"down":n=!r(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!r(t);break;default:n=!0}return n},_checkLanguageDirection:function(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function(e,t){var n,i;n=s(e,this.query),i=n?this.query.length!==e.length:!1,this.query=e,t||n?!t&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var e,n,i,a,s=this;return e=t.bind(this._onBlur,this),n=t.bind(this._onFocus,this),i=t.bind(this._onKeydown,this),a=t.bind(this._onInput,this),this.$input.on("blur.tt",e).on("focus.tt",n).on("keydown.tt",i),!t.isMsie()||t.isMsie()>9?this.$input.on("input.tt",a):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){o[e.which||e.keyCode]||t.defer(t.bind(s._onInput,s,e))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(e,t){this.setInputValue(e),this._setQuery(e,t)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n,i;e=this.getInputValue(),t=this.getHint(),n=e!==t&&0===t.indexOf(e),i=""!==e&&n&&!this.hasOverflow(),!i&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,n,i;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:document.selection?(i=document.selection.createRange(),i.moveStart("character",-e),e===i.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=e("<div>")}}),n}(),o=function(){"use strict";function n(n,a){n=n||{},n.templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||e.error("missing source"),n.node||e.error("missing node"),n.name&&!o(n.name)&&e.error("invalid dataset name: "+n.name),a.mixin(this),this.highlight=!!n.highlight,this.name=n.name||c(),this.limit=n.limit||5,this.displayFn=i(n.display||n.displayKey),this.displayCategory=n.displayCategory||!1,this.templates=r(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=t.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=e(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function i(e){function n(t){return t[e]}return e=e||t.stringify,t.isFunction(e)?e:n}function r(n,i){function a(t){return e("<div>").text(i(t))}function s(t){return e("<div>").text(t)}return{notFound:n.notFound&&t.templatify(n.notFound),pending:n.pending&&t.templatify(n.pending),header:n.header&&t.templatify(n.header),footer:n.footer&&t.templatify(n.footer),suggestion:n.suggestion||a,category:{header:n.category&&n.category.header||s}}}function o(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var l,c;return l={val:"tt-selectable-display",obj:"tt-selectable-object"},c=t.getIdGenerator(),n.extractData=function(t){var n=e(t);return n.data(l.obj)?{val:n.data(l.val)||"",obj:n.data(l.obj)||null}:null},t.mixin(n.prototype,a,{_overwrite:function(e,t){t=t||[],t.length?this._renderSuggestions(e,t):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",this.name,t,!1)},_append:function(e,t){t=t||[],t.length&&this.$lastSuggestion.length?this._appendSuggestions(e,t):t.length?this._renderSuggestions(e,t):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",this.name,t,!0)},_renderSuggestions:function(e,t){var n;n=this.displayCategory?this._getCategorizedSuggestionsFragment(e,t):this._getSuggestionsFragment(e,t),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(e,t)).append(this._getFooter(e,t))},_appendSuggestions:function(e,t){var n,i;n=this._getSuggestionsFragment(e,t),i=n.children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(e){var t=this.templates.pending;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_renderNotFound:function(e){var t=this.templates.notFound;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(n,i){var a,r=this;return a=document.createDocumentFragment(),t.each(i,function(t){var i,s;s=r._injectQuery(n,t),i=e(r.templates.suggestion(s)).data(l.obj,t).data(l.val,r.displayFn(t)).addClass(r.classes.suggestion+" "+r.classes.selectable),a.appendChild(i[0])}),this.highlight&&s({className:this.classes.highlight,node:a,pattern:n}),e(a)},_getCategorizedSuggestionsFragment:function(n,i){var a,r=this,o={},c=[];a=document.createDocumentFragment(),t.each(i,function(e,t){var n;n="function"==typeof r.displayCategory?r.displayCategory(e):e[r.displayCategory],"undefined"==typeof o[n]&&(o[n]=[],c.push(n)),o[n].push(e)});for(var d=c.length,u=0;d>u;u++){var p,f=c[u],h=document.createDocumentFragment(),g=o[f];p=e(r.templates.category.header(f)).data(l.obj,f).data(l.val,f).addClass(r.classes.category),t.each(g,function(t){var i,a;a=r._injectQuery(n,t),i=e(r.templates.suggestion(a)).data(l.obj,t).data(l.val,r.displayFn(t)).addClass(r.classes.suggestion+" "+r.classes.selectable),h.appendChild(i[0])}),this.highlight&&s({className:this.classes.highlight,node:h,pattern:n}),a.appendChild(p[0]),a.appendChild(h)}return e(a)},_getFooter:function(e,t){return this.templates.footer?this.templates.footer({query:e,suggestions:t,dataset:this.name}):null},_getHeader:function(e,t){return this.templates.header?this.templates.header({query:e,suggestions:t,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=e()},_injectQuery:function(e,n){return t.isObject(n)?t.mixin({_query:e},n):n},update:function(t){function n(e){r||(r=!0,e=(e||[]).slice(0,a.limit),o=e.length,a._overwrite(t,e),o<a.limit&&a.async&&a.trigger("asyncRequested",t))}function i(n){n=n||[],!s&&o<a.limit&&(a.cancel=e.noop,a._append(t,n.slice(0,a.limit-o)),o+=n.length,a.async&&a.trigger("asyncReceived",t))}var a=this,s=!1,r=!1,o=0;this.cancel(),this.cancel=function(){s=!0,a.cancel=e.noop,a.async&&a.trigger("asyncCanceled",t)},this.source(t,n,i),!r&&n([])},cancel:e.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=e("<div>")}}),n}(),l=function(){"use strict";function n(n,i){function a(t){var n=s.$node.find(t.node).first();return t.node=n.length?n:e("<div>").appendTo(s.$node),new o(t,i)}var s=this;n=n||{},n.node||e.error("node is required"),i.mixin(this),this.$node=e(n.node),this.query=null,this.datasets=t.map(n.datasets,a)}return t.mixin(n.prototype,a,{_onSelectableClick:function(t){this.trigger("selectableClicked",e(t.currentTarget))},_onRendered:function(e,t,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",t,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function e(e){return e.isEmpty()}return t.every(this.datasets,e)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function(e){var t,n,i,a;t=e.position().top,n=t+e.outerHeight(!0),i=this.$node.scrollTop(),a=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>t?this.$node.scrollTop(i+t):n>a&&this.$node.scrollTop(i+(n-a))},bind:function(){var e,n=this;return e=t.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,e),t.each(this.datasets,function(e){e.onSync("asyncRequested",n._propagate,n).onSync("asyncCanceled",n._propagate,n).onSync("asyncReceived",n._propagate,n).onSync("rendered",n._onRendered,n).onSync("cleared",n._onCleared,n)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function(e){var t,n,i,a;return n=this.getActiveSelectable(),t=this._getSelectables(),i=n?t.index(n):-1,a=i+e,a=(a+1)%(t.length+1)-1,a=-1>a?t.length-1:a,-1===a?null:t.eq(a)},setCursor:function(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function(e){return e&&e.length?o.extractData(e):null},getActiveSelectable:function(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function(){var e=this._getSelectables().first();return e.length?e:null},update:function(e){function n(t){t.update(e)}var i=e!==this.query;return i&&(this.query=e,t.each(this.datasets,n)),i},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function n(e){e.destroy()}this.$node.off(".tt"),this.$node=e("<div>"),t.each(this.datasets,n)}}),n}(),c=function(){"use strict";function e(){l.apply(this,[].slice.call(arguments,0))}var n=l.prototype;return t.mixin(e.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),n.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),n.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(e){return this.$node.css("ltr"===e?this.css.ltr:this.css.rtl),n.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),e}(),d=function(){"use strict";function n(n,a){var s,r,o,l,c,d,u,p,f,h,g;n=n||{},n.input||e.error("missing input"),n.menu||e.error("missing menu"),n.eventBus||e.error("missing event bus"),a.mixin(this),this.eventBus=n.eventBus,this.minLength=t.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),s=i(this,"activate","open","_onFocused"),r=i(this,"deactivate","_onBlurred"),o=i(this,"isActive","isOpen","_onEnterKeyed"),l=i(this,"isActive","isOpen","_onTabKeyed"),c=i(this,"isActive","_onEscKeyed"),d=i(this,"isActive","open","_onUpKeyed"),u=i(this,"isActive","open","_onDownKeyed"),p=i(this,"isActive","isOpen","_onLeftKeyed"),f=i(this,"isActive","isOpen","_onRightKeyed"),h=i(this,"_openIfActive","_onQueryChanged"),g=i(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",s,this).onSync("blurred",r,this).onSync("enterKeyed",o,this).onSync("tabKeyed",l,this).onSync("escKeyed",c,this).onSync("upKeyed",d,this).onSync("downKeyed",u,this).onSync("leftKeyed",p,this).onSync("rightKeyed",f,this).onSync("queryChanged",h,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this)}function i(e){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);t.each(n,function(t){return e[t].apply(e,i)})}}return t.mixin(n.prototype,{_hacks:function(){var n,i;n=this.input.$input||e("<div>"),i=this.menu.$node||e("<div>"),n.on("blur.tt",function(e){var a,s,r;a=document.activeElement,s=i.is(a),r=i.has(a).length>0,t.isMsie()&&(s||r)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){n.focus()}))}),i.on("mousedown.tt",function(e){e.preventDefault()})},_onSelectableClicked:function(e,t){this.select(t)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(e,t,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,t)},_onAsyncRequested:function(e,t,n){this.eventBus.trigger("asyncrequest",n,t)},_onAsyncCanceled:function(e,t,n){this.eventBus.trigger("asynccancel",n,t)},_onAsyncReceived:function(e,t,n){this.eventBus.trigger("asyncreceive",n,t)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&t.preventDefault()},_onTabKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&t.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&t.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(e,t){this._minLengthMet(t)?this.menu.update(t):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(e,t){this.dir!==t&&(this.dir=t,this.menu.setLanguageDirection(t))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(e){return e=t.isString(e)?e:this.input.getQuery()||"",e.length>=this.minLength},_updateHint:function(){var e,n,i,a,s,o,l;e=this.menu.getTopSelectable(),n=this.menu.getSelectableData(e),i=this.input.getInputValue(),!n||t.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(a=r.normalizeQuery(i),s=t.escapeRegExChars(a),o=new RegExp("^(?:"+s+")(.+$)","i"),l=o.exec(n.val),l&&this.input.setHint(i+l[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(e){this.input.setQuery(t.toStr(e))},getVal:function(){return this.input.getQuery()},select:function(e){var t=this.menu.getSelectableData(e);return t&&!this.eventBus.before("select",t.obj)?(this.input.setQuery(t.val,!0),this.eventBus.trigger("select",t.obj),this.close(),!0):!1},autocomplete:function(e){var t,n,i;return t=this.input.getQuery(),n=this.menu.getSelectableData(e),i=n&&t!==n.val,i&&!this.eventBus.before("autocomplete",n.obj)?(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),!0):!1},moveCursor:function(e){var t,n,i,a,s;return t=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(e),i=this.menu.getSelectableData(n),a=i?i.obj:null,s=this._minLengthMet()&&this.menu.update(t),s||this.eventBus.before("cursorchange",a)?!1:(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",a),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),n}();!function(){"use strict";function a(t,n){t.each(function(){var t,i=e(this);(t=i.data(g.typeahead))&&n(t,i)})}function s(e,t){return e.clone().addClass(t.classes.hint).removeData().css(t.css.hint).css(u(e)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function o(e,t){e.data(g.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass(t.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!e.attr("dir")&&e.attr("dir","auto")}catch(n){}return e}function u(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function p(e){var n,i;n=e.data(g.www),i=e.parent().filter(n.selectors.wrapper),t.each(e.data(g.attrs),function(n,i){t.isUndefined(n)?e.removeAttr(i):e.attr(i,n)}),e.removeData(g.typeahead).removeData(g.www).removeData(g.attr).removeClass(n.classes.input),i.length&&(e.detach().insertAfter(i),i.remove())}function f(n){var i,a;return i=t.isJQuery(n)||t.isElement(n),a=i?e(n).first():[],a.length?a:null}var h,g,v;h=e.fn.typeahead,g={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},v={initialize:function(a,u){function p(){var n,p,v,m,y,S,w,b,M,C,k;t.each(u,function(e){e.highlight=!!a.highlight}),n=e(this),p=e(h.html.wrapper),v=f(a.hint),m=f(a.menu),y=a.hint!==!1&&!v,S=a.menu!==!1&&!m,y&&(v=s(n,h)),S&&(m=e(h.html.menu).css(h.css.menu)),v&&v.val(""),n=o(n,h),(y||S)&&(p.css(h.css.wrapper),n.css(y?h.css.input:h.css.inputWithNoHint),n.wrap(p).parent().prepend(y?v:null).append(S?m:null)),k=S?c:l,w=new i({el:n}),b=new r({hint:v,input:n},h),M=new k({node:m,datasets:u},h),C=new d({input:b,menu:M,eventBus:w,minLength:a.minLength},h),n.data(g.www,h),n.data(g.typeahead,C)}var h;return u=t.isArray(u)?u:[].slice.call(arguments,1),a=a||{},h=n(a.classNames),this.each(p)},isEnabled:function(){var e;return a(this.first(),function(t){e=t.isEnabled()}),e},enable:function(){return a(this,function(e){e.enable()}),this},disable:function(){return a(this,function(e){e.disable()}),this},isActive:function(){var e;return a(this.first(),function(t){e=t.isActive()}),e},activate:function(){return a(this,function(e){e.activate()}),this},deactivate:function(){return a(this,function(e){e.deactivate()}),this},isOpen:function(){var e;return a(this.first(),function(t){e=t.isOpen()}),e},open:function(){return a(this,function(e){e.open()}),this},close:function(){return a(this,function(e){e.close()}),this},select:function(t){var n=!1,i=e(t);return a(this.first(),function(e){n=e.select(i)}),n},autocomplete:function(t){var n=!1,i=e(t);return a(this.first(),function(e){n=e.autocomplete(i)}),n},moveCursor:function(e){var t=!1;return a(this.first(),function(n){t=n.moveCursor(e)}),t},val:function(e){var t;return arguments.length?(a(this,function(t){t.setVal(e)}),this):(a(this.first(),function(e){t=e.getVal()}),t)},destroy:function(){return a(this,function(e,t){p(t),e.destroy()}),this}},e.fn.typeahead=function(e){return v[e]?v[e].apply(this,[].slice.call(arguments,1)):v.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=h,this}}()}),function(e){var t=13;e.fn.typeaheadWrapper=function(n){var i=e(this),a=e.extend(!0,{config:{hint:!0,highlight:!0,minLength:2},dataSet:{name:"result",source:function(){return[]},templates:{notFound:'<div class="tt-no-results">No matching results</div>',pending:'<div class="tt-searching">Searching...</div>'}},onResultSelection:function(e,t){}},n),s=function(n){var s=e(this),r=s.typeahead("val");r.length<a.config.minLength||n.keyCode!==t||i.parent().find(".tt-cursor").trigger("click")},r=function(){i.parent().find(".tt-suggestion").first().addClass("tt-cursor")};return i.typeahead(a.config,a.dataSet),i.bind("keyup",s),i.bind("typeahead:render",r),i.bind("typeahead:open",r),_.isFunction(a.onResultSelection)&&i.bind("typeahead:select",a.onResultSelection),i}}(jQuery),function(e){"use strict";e(function(){function t(e){_.isArray(e)||(e=[e]),O.resolveWith({type:U},e)}function n(e){_.isArray(e)||(e=[e]),O.rejectWith({type:U},e)}function i(e,t){return a(e.recommendedData),_.isEmpty(e.moviesData)&&_.isEmpty(e.cinemas)?void(_.isEmpty(O)||n({error:"no-data"})):(g=e.moviesData&&e.moviesData.BookMyShow||{},m=g.arrEvents,S=g.arrLanguages,_.isEmpty(e.cinemas)||_.isEmpty(e.cinemas.BookMyShow)||(v=e.cinemas.BookMyShow,y=v.aiVN||{}),o.events=o.getEvents(),o.languages=o.getLanguages(),o.dimensions=o.getDimensions(),o.langSequence=o.getLangSequence(),o.cinemas=o.getCinemas(),o.subRegions=o.getSubRegions(),void(t!==!0&&(u.quickBook(),p.dispatchRecommendWizEvent())))}function a(e){_.isUndefined(e)||_.isNull(e)||_.isEmpty(e.data)||_.isEmpty(e.data.QUICKBOOK)||(M=e.data.QUICKBOOK.MT,o.recommendEvents=o.getRecommendedEvents(),_.isEmpty(BMS.Misc)||_.isEmpty(BMS.Misc.Showtimes)||!_.isFunction(BMS.Misc.Showtimes.renderRecommendations)||BMS.Misc.Showtimes.renderRecommendations(e))}function s(e){if(!_.isEmpty(g))return u.filters.clearFilters(),u.quickBook(),void p.dispatchRecommendWizEvent();d.container.find(".grid").html(r.render("temp-qb-loader"));var t="/serv/getData",a={url:t,data:{cmd:"QUICKBOOK",type:"MT"}};BMS.Storage.isset({name:"ld"})===!0&&w===!0&&(a.data.getSeenData=1),b&&(a.data.getRecommendedData=1);var s=r.makeAjaxCall(a);s.done(function(t){i(t,e)}),s.fail(function(){_.isEmpty(O)||n({error:"ajax"})})}var r={},o={},l={},c={},d={container:{},filters:{},grid:{},tabs:{},cinemas:{grid:{}}},u={},p={},f=!0,h=!1,g=null,v=null,m=null,y=null,S=null,w=!0,b=!0,M=null,C=!1,k=!0,x=["2D","3D"],E="IMAX",B=4,T=null,$=null,A=2,I=3,R="quickbook-movies",D=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"text"})),P=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"Code"})),L={},N={matchesFilter:100,recommendedEvent:90,newEvent:80,seenEvent:-20,ratedEvent:-30,preferredCinema:90},O=null,F=!1,U="movies",j=new Date,q=j.getDay(),G=new Date(j),H=5,z=null;if(z=q>H?q-H:q==H?0:6-H+(q+1),2>=z)G.setDate(j.getDate()-z);else{var V=H-q;G.setDate(j.getDate()+V)}G.setHours(0,0,0,0),r={sanitize:{date:function(e){return new Date(e.substr(0,4)+" "+e.substr(4,2)+" "+e.substr(6,2)+" "+e.substr(8,2)+":"+e.substr(10,2))},time:function(e){var t=e.getHours(),n=e.getMinutes(),i=!1;return t>12&&(t-=12,i=!0),10>n&&(n="0"+n),t+":"+n+" pm"},"boolean":function(e){return"string"==typeof e?"Y"==e?e=!0:"N"==e?e=!1:e:(("object"==typeof e||"array"==typeof e)&&_.each(e,function(t,n){e[n]=r.sanitize["boolean"](t)}),e)}},render:function(t,n,i){var a=e("#"+t).html();if(!e.isEmptyObject(a)){t=a.split("\n").join("");var s,r,o,l,c,d,u=/([$\^\\\/()|?+*\[\]{}.\-])/g;return i=i||{},d="{{}}",l=d.length,c=Math.ceil(l/2),r=d.substr(0,c).replace(u,"\\$1"),o=d.substr(c,l).replace(u,"\\$1")||r,s=new RegExp(r+"[^"+r+o+"]+"+o,"g"),t.replace(s,function(e){var t,i=e.slice(c,-c),a=i.split("."),s=0,r=a.length;if(i in n)t=n[i];else for(t=n;r>s;s++){if(!(a[s]in t))return e;t=t[a[s]]}return t})}},eventMatchesFilter:function(e){var t=!0;return L.hasOwnProperty("dimension")&&(t=-1!==L.dimension.indexOf(e.dimension)),t&&L.hasOwnProperty("isAtmosEnabled")&&(t=e.isAtmosEnabled===!0),t},cinemaMatchesFilter:function(e){var t=!0;return L.hasOwnProperty("subRegion")&&(t=-1!==L.subRegion.indexOf(e.subRegionCode)),t},isNewEvent:function(e){var t=new Date(e);return t.setHours(0,0,0,0),t>=G},formattedDate:function(e,t){e=e instanceof Date?e:new Date(e),t=t||"-";var n=e.getMonth()+1;return n=10>n?"0"+n:n,e.getFullYear()+t+n+t+e.getDate()},sortDimensions:function(e){var t=/^\d+/,n=[],i=[],a={};e.forEach(function(e,s){var r=e.match(t);null!==r?void 0===a[r]?(a[r]=[e],n.push(r)):a[r].push(e):i.push(e)});var s=n.sort(function(e,t){return e-t}),r=[];s.forEach(function(e){var t=a[e];1===t.length?r.push(t[0]):(t.sort(),r=r.concat(t))});var o=i.sort();return r.concat(o)},makeAjaxCall:function(t){var n=e.ajax({url:t.url,data:t.data,dataType:t.responseType||"JSON",method:t.method||"GET",cache:!1});return n}},o.getCinemas=function(){var e={},t=BMS.Misc.QuickbookModal.getPreferredCinemas();return _.isEmpty(y)||y.forEach(function(n){var i=n.VenueCode,a=n.VenueName,s="/buytickets/"+BMS.Misc.fnUrlName(a)+"-"+D.toLowerCase()+"/cinema-"+P.toLowerCase()+"-"+i+"-MT";e[i]={venueCode:i,companyCode:n.CompanyCode,name:a,isAtmosEnabled:n.IsATMOSEnabled,url:s,isPreferred:!_.isUndefined(t[i]),latitude:n.VenueLatitude,longitude:n.VenueLongitude,subRegionCode:n.VenueSubRegionCode,subRegionName:n.VenueSubRegionName}}),e},o.getSubRegions=function(){var e={};return _.each(o.cinemas,function(t){_.isEmpty(t.subRegionName)||_.isEmpty(t.subRegionCode)||(e[t.subRegionCode]=t.subRegionName)}),_.map(e,function(e,t){return{code:t,name:e}})},o.eventTitleDim={},o.getEvents=function(){var e={};if(_.isEmpty(m))return e;var t=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"text"}));return t=t.toLowerCase(),m.forEach(function(n,i){var a=n.EventTitle,s=n.ChildEvents,l=n.eventGroup;_.isUndefined(s)||s.forEach(function(s,c){var d=s.EventCode,u=s.EventURL||"#",p="/buytickets/"+u+"-"+t+"/movie-"+P.toLowerCase()+"-"+d+"-MT",f=r.sanitize["boolean"](s.isDefault),h=s.EventDimension.trim().toUpperCase(),g=s.EventDate,v=!_.isEmpty(o.recommendEvents)&&o.recommendEvents.hasOwnProperty(d);e[d]={id:d,lang:s.EventLanguage,group:l,censor:s.EventCensor,genre:s.JsonGenre,url:p,syno:s.EventSyno,
title:a,eventName:s.EventName,trailerUrl:s.TrailerURL,eventDate:g,isAtmosEnabled:r.sanitize["boolean"](s.EventIsAtmosEnabled),duration:s.Duration,dimension:h,isDefault:f,isNew:r.isNewEvent(g),sequence:i,isSeen:n.isSeen,isRated:n.isRated,isRecommended:v},f&&(o.eventTitleDim[a]={dim:h,eventId:d})})}),e},o.getRecommendedEvents=function(){var e={};return M.forEach(function(t){var n=t.EventCode;e[n]={id:n,venueCode:t.VenueCode,dates:t.Dates}}),e},o.getLanguages=function(){var e=[];return _.each(S,function(t){var n={};n.code=t.EventLangCode,n.name=t.EventLangName,e.push(n)}),e},o.getDimensions=function(){var e={};return _.each(o.events,function(t){_.isEmpty(t.dimension)||(e[t.dimension]=!0)}),_.map(e,function(e,t){return t})},o.getLangSequence=function(){var e=[];return _.each(o.languages,function(t){e.push(t.name)}),e},o.languagesEvents=null,o.getLanguagesEvents=function(){var e={},t=o.events;o.langSequence;return _.each(t,function(t,n){var i=null;i=r.eventMatchesFilter(t)?!0:!1;var a=t.lang;(_.isUndefined(e[a])||_.isUndefined(e[a].events))&&(e[a]={events:{}});var s=e[t.lang].events,l=t.title;if(_.isUndefined(s[l])&&(s[l]={firstChildEventId:t.id},t.isFirstChild=!0),i===!0){var c=s[l].firstChildEventId,d=o.events[c];d.matchesFilter=!0,o.events[c]=d}else t.isFirstChild&&(t.matchesFilter=i);if(!_.isEmpty(t.dimension)){_.isEmpty(s[l].dimensions)&&(s[l].dimensions=[]);var u={dim:t.dimension,eventId:t.id};s[l].dimensions.push(u)}}),e},o.calculateEventScore=function(e){var t=0;return e.matchesFilter===!0&&(t+=N.matchesFilter),e.isSeen===!0&&(t+=N.seenEvent),e.isRecommended===!0&&(t+=N.recommendedEvent),t},o.calculateCinemaScore=function(e){var t=0;return e.matchesFilter===!0&&(t+=N.matchesFilter),e.isPreferred===!0&&(t+=N.preferredCinema),t},o.getScoredLanguagesEvents=function(){var t=e.extend(!0,{},o.getLanguagesEvents()),n={};return _.each(t,function(e,t){var i=e.events,a=[],s=[];_.each(i,function(e,t){var n=e.firstChildEventId,i={title:t,dimensions:e.dimensions,firstChildEventId:n},s=o.events[n];i.score=o.calculateEventScore(s),a.push(i)}),s=_(a).chain().sortBy(function(e){return e.title}).sortBy(function(e){return-e.score}).value(),n[t]={},n[t].events=s}),n},l.rows=function(){var t=[];o.languagesEvents=o.getScoredLanguagesEvents();for(var n=o.languagesEvents,i=0;i<o.langSequence.length;i++){var a=o.langSequence[i],s=n[a];if(!_.isEmpty(s)&&!_.isEmpty(s.events)){var r=!0;if(_.each(s.events,function(t){!_.isUndefined(t)&&e.isEmptyObject(t.firstChildEventId)&&(r=!1)}),r){var l=s.events;t.push({text:a,type:"header"});var c=l.length;_.each(l,function(n,i){var a=n.title;if(!_.isEmpty(n.firstChildEventId)){var s={firstChildEventId:n.firstChildEventId,type:"evt",url:o.events[n.firstChildEventId].url};i==c-1&&(s.isLastRowForHeader=!0);var r=!1;if(!_.isUndefined(n.dimensions)&&!_.isEmpty(n.dimensions)){r=!0,s.hasDimensions=!0;var l=null;n.dimensions.forEach(function(t){var n=o.eventTitleDim[a];return e.isEmptyObject(n)||t.dim!==n.dim?void 0:void(l=t.eventId)}),_.isEmpty(l)||(s.url=o.events[l].url),s.dimensions=n.dimensions}t.push(s)}})}}}return t},l.cinemaRows=function(){var e=[],t=_(o.cinemas).chain().each(function(e){e.matchesFilter=r.cinemaMatchesFilter(e),e.score=o.calculateCinemaScore(e)}).sortBy(function(e){return e.name}).sortBy(function(e){return-e.score}).value();return _.each(t,function(t){e.push({type:"venue",venueCode:t.venueCode})}),e},l.gridBasedOnAverage=function(){var e={},t=l.rows();T=t.length,$=Math.ceil(T/B);for(var n=1,i=0,a=0;T>i;)_.isUndefined(e[n])&&(e[n]={rows:[]}),e[n].rows.push(t[i]),i++,a++,a===$&&(n++,a=0);return e},l.grid=function(){var t=e.extend(!0,{},l.gridBasedOnAverage()),n={},i=2*A,a=null,s=0,r=0;return _.each(t,function(e,o){o=parseInt(o);var l=e.rows;_.isEmpty(n[o])&&(n[o]={rows:[]});var c=n[o].rows;l.forEach(function(e,d){var u=!1;if(a=I>r&&$>i?i:A,"header"==e.type){if(d>=l.length-a&&B>o&&r>0&&d>0){var p=o+1;_.isEmpty(n[p])&&(n[p]={rows:[]}),_.isEmpty(t[p])&&(t[p]={rows:[]});var f=l.splice(d,l.length);s+=f.length,u=!0,t[p].rows=f.concat(t[p].rows)}r++}if(!u&&0==d&&"evt"==e.type&&e.isLastRowForHeader){var p=o-1;n[p].rows.push(e),u=!0}u||c.push(e)})}),n},l.cinemasGrid=function(){for(var e={},t=1,n=l.cinemaRows(),i=Math.ceil(n.length/B),a=0;a<n.length;)_.isEmpty(e[t])&&(e[t]={rows:[]}),e[t].rows.push(n[a]),a++,a>=i*t&&t++;return e},c.grid=l.grid,c.cinemasGrid=l.cinemasGrid,u.filters={},u.filters.clearFilters=function(){L={}},u.filters.dimensions=function(e,t){if(e||(e=_.clone(o.dimensions)),!(_.isEmpty(e)||e.length<=1)){e=e.filter(function(e){return-1!==x.indexOf(e.toUpperCase())||-1!==e.toUpperCase().indexOf(E)&&k===!0}),e=r.sortDimensions(e);var n='<div class="__label">Filter</div>';_.each(e,function(e){n+=r.render("temp-filter",{text:e,filterValue:e,filterKey:"dimension"})}),t&&(n+=r.render("temp-filter",{text:"DOLBY ATMOS",filterValue:!0,filterKey:"isAtmosEnabled"})),u.filters.appendFilterSet(n,"movie-listing-filter",p.click.applyDimensionFilter)}},u.filters.subRegions=function(e){if(e||(e=_.clone(o.subRegions)),!(_.isEmpty(e)||e.length<=1)){var t='<div class="__label">Filter</div>';_.each(e,function(e){t+=r.render("temp-filter",{text:e.name,filterValue:e.code,filterKey:"subRegion"})}),u.filters.appendFilterSet(t,"cinema-listing-filter",p.click.applySubRegionsFilter)}},u.filters.appendFilterSet=function(t,n,i){var a=r.render("temp-filter-set",{filters:t,cssClasses:n}),s=e(a);s.find(".__filter").click(i),d.filters.append(s)},u.getEventTitleForEvt=function(e,t){var n=o.events[e],i=n.title.trim();return _.isEmpty(t)||(i+=" - "+t+" "),n.isDefault===!1&&(i+=" - "+n.lang),_.isEmpty(n.censor)||(i+=" ("+n.censor+")"),i},u.evt=function(e){var t=o.events[e.firstChildEventId],n=t.isNew===!0?"new-event":"",i="",a="";t.matchesFilter===!1?(n+=" filter-false",i+=" filter-false"):_.isEmpty(L)||(i+=" matches-filter");var s,l=e.dimensions;if(!_.isUndefined(l)&&1==l.length){var c=l[0].dim;"2D"!==c&&(s=c)}var d=u.getEventTitleForEvt(t.id,s),p="";t.isSeen===!0?(i+=" _seen",a=r.render("temp-seen-evt-svg")):!_.isUndefined(l)&&l.length>1&&(p=u.dimensions(e.dimensions));var f="";t.isSeen===!0&&t.isRated===!1,t.isRecommended===!0&&(i+=" _recommended");var h=r.render("temp-event",{seenContent:a,text:d,eventURL:e.url,cssClass:n,containerCssClass:i,dimensions:p,ratingHTML:f,eventId:t.id});return h},u.label=function(e){return r.render("temp-label",{text:e.text.toUpperCase()})},u.dimensions=function(e){var t="",n=e[0];o.events[n.eventId].title;if(1==e.length)return"";var i="",a=_.map(e,function(e){return e.dim}),s=r.sortDimensions(a),l=_.uniq(s);if(l.length<=1)return"";var c=[];return e.forEach(function(e){c[s.indexOf(e.dim)]=e}),_.each(c,function(e){var n=o.events[e.eventId];_.isEmpty(i)&&n.matchesFilter===!1&&(i="filter-false"),t+=r.render("temp-dimension",{text:e.dim,eventURL:n.url,eventId:n.id})}),_.isEmpty(t)||(t='<div class="dimension-container '+i+'">'+t+"</div>"),t},u.grid=function(){var t="",n=[];_.each(c.grid(),function(t,i){var a="";if(t.rows.forEach(function(e){if(!_.isUndefined(e)){var t=null;switch(e.type){case"header":t="label";break;case"evt":t="evt";break;case"dimension":t="dimension"}var n=u[t](e);_.isEmpty(n)||(a+='<li class="'+t+'-container">'+n+"</li>")}}),!_.isEmpty(a)){var s=r.render("temp-grid-col",{listHtml:a,viewMore:""}),o=e(s);n.push({domObj:o})}});var t="";0===n.length?t=_.isEmpty(L)?r.render("temp-no-results"):r.render("temp-no-results-with-filters"):n.forEach(function(e){t+=e.domObj.wrap("<div/>").parent().html()}),d.grid.html(t),d.grid.find(".__event").on("click",p.click.handleEventClick),d.grid.find(".__dimension").on("click",p.click.handleDimensionClick)},u.applyFilter=function(e,t,n){if(t===!0)switch(e.filterKey){case"dimension":if(!_.isEmpty(L[e.filterKey])){var i=L[e.filterKey].indexOf(e.filterValue);L[e.filterKey].splice(i,1)}0==L[e.filterKey].length&&delete L[e.filterKey];break;default:delete L[e.filterKey]}else if(!_.isEmpty(e))switch(e.filterKey){case"dimension":_.isEmpty(L[e.filterKey])&&(L[e.filterKey]=[]);var a=L[e.filterKey];a.push(e.filterValue),L[e.filterKey]=_.uniq(a);break;default:L[e.filterKey]=e.filterValue}u.grid(),BMS.Misc.QuickbookModal.postRender(d.container);var s=_.values(L).join(",");BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{"Filter Used":s,"Event Type":"MT",Appcode:window.global.strAppCode}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"filters",category:"Quickbook",action:"Movies-Filter",label:s})},u.cinemas={},u.cinemas.venue=function(e){var t=o.cinemas[e.venueCode],n="",i="";return t.matchesFilter===!1?(n+=" filter-false",i+=" filter-false"):_.isEmpty(L)||(i+=" matches-filter"),t.isPreferred&&t.matchesFilter===!0&&(n+="preferred-venue"),r.render("temp-venue",{text:t.name,venueUrl:t.url,cssClass:n,containerCssClass:i,venueCode:t.venueCode})},u.cinemas.grid=function(){var t,n="";_.each(c.cinemasGrid(),function(i,a){var s="";i.rows.forEach(function(e,t){if(!_.isUndefined(e)){var n=null;switch(e.type){case"venue":n="venue"}var i=u.cinemas[n](e),a=[n+"-container"];_.isEmpty(i)||(s+='<li class="'+a.join(" ")+'">'+i+"</li>")}}),_.isEmpty(s)||(n+=r.render("temp-grid-col",{listHtml:s,viewMore:""}),t=e(n))}),_.isEmpty(t)?d.cinemas.grid.html(r.render("temp-no-results")):(d.cinemas.grid.html(t),d.cinemas.grid.find(".__venue").on("click",p.click.handleVenueClick))},u.cinemas.applyFilter=function(e,t,n){if(t===!0)switch(e.filterKey){case"subRegion":if(!_.isEmpty(L[e.filterKey])){var i=L[e.filterKey].indexOf(e.filterValue);L[e.filterKey].splice(i,1)}0==L[e.filterKey].length&&delete L[e.filterKey];break;default:delete L[e.filterKey]}else if(!_.isEmpty(e))switch(e.filterKey){case"subRegion":_.isEmpty(L[e.filterKey])&&(L[e.filterKey]=[]);var a=L[e.filterKey];a.push(e.filterValue),L[e.filterKey]=_.uniq(a);break;default:L[e.filterKey]=e.filterValue}u.cinemas.grid(),BMS.Misc.QuickbookModal.postRender(d.container)},u.renderMoviesFilters=function(){u.filters.dimensions(null,C)},u.renderCinemasFilters=function(){u.filters.subRegions()},u.renderTabs=function(){var t=r.render("temp-qb-listing-tabs",{primaryButtonText:"Movies",secondaryButtonText:"Cinemas"});d.tabs.html(t).removeClass("none"),d.tabs.find("button").click(function(){var t=e(this);t.hasClass("_active")||(t.addClass("_active"),t.hasClass("primary-tab")?u.showPrimaryTabContent():u.showSecondaryTabContent(),t.siblings().removeClass("_active"))})},u.toggleMovieListing=function(e){e===!0?(d.grid.removeClass("none"),d.filters.find(".movie-listing-filter").removeClass("none")):(d.grid.addClass("none"),d.filters.find(".movie-listing-filter").addClass("none"))},u.toggleCinemaListing=function(e){e===!0?(d.cinemas.grid.removeClass("none"),d.filters.find(".cinema-listing-filter").removeClass("none"),BMS.Misc.QuickbookModal.hidePreferredCinemasContainer()):(d.cinemas.grid.addClass("none"),d.filters.find(".cinema-listing-filter").addClass("none"),BMS.Misc.QuickbookModal.showPreferredCinemasContainer())},u.showPrimaryTabContent=function(){h=!0,u.toggleMovieListing(!0),u.toggleCinemaListing()},u.showSecondaryTabContent=function(){h=!1,u.toggleMovieListing(),u.toggleCinemaListing(!0)},u.renderTabsContent=function(){u.renderTabs(),u.renderMoviesListing(),u.renderCinemasListing(),u.showPrimaryTabContent(),d.container.addClass("_has-tabs"),d.filters.removeClass("none")},u.renderMoviesListing=function(){d.clearContainers(),u.renderMoviesFilters(),u.grid()},u.renderCinemasListing=function(){d.clearCinemaContainers(),u.renderCinemasFilters(),u.cinemas.grid()},u.quickBook=function(){d.clearContainers(),d.prepareContainer(),f===!0?u.renderTabsContent():(u.renderMoviesListing(),u.toggleMovieListing(!0),d.filters.removeClass("none")),t(d.container)},u.quickBookPostRender=function(){if(f!==!0||h===!0){var t=[],n=[],i={index:0,width:0},a=0;d.grid.find("ul").each(function(s,r){var o=e(r);n.push(o);var l=o.width();t.push(parseInt(l)),a+=parseInt(l),l>i.width&&(i.index=s,i.width=l)});var s=parseInt(d.container.width()),r=(s-a)/(2*n.length);if(n.forEach(function(e,n){var i=t[n]+2*r+1;e.parent().css({width:i+"px","padding-left":r+"px","padding-right":r+"px"})}),d.grid.css({"margin-left":-r+"px","margin-right":-r+"px"}),a>s){var o=n[i.index],l=(a-s)/2,c=r-l,u=i.width+2*c+1;o.css({width:u+"px","padding-left":c+"px","padding-right":c+"px"})}}},d.prepareContainer=function(){var t=e(r.render("temp-quickbook-container",{quickbookType:R,containerClass:""}));d.container=t,d.tabs=d.container.find(".qb-tabs"),d.filters=d.container.find(".filters"),d.grid=d.container.find(".grid"),d.cinemas.grid=d.container.find(".venue-grid")},d.prepareContainer(),d.clearContainers=function(){d.filters.addClass("none").find(".movie-listing-filter").remove(),d.grid.empty().addClass("none")},d.clearCinemaContainers=function(){d.filters.addClass("none").find(".cinema-listing-filter").remove(),d.cinemas.grid.empty().addClass("none")},p.click={},p.click.applyDimensionFilter=function(t){var n=e(this),i=n.data("filter-key"),a=n.data("filter-value"),s=n.data("active")===!0,r={};if("All"!=a?(r.filterKey=i,r.filterValue=a):u.filters.clearFilters(),u.applyFilter(r,s,t),"dimension"===i)if("All"==a)n.parent().siblings().find("._active").removeClass("_active").data("active",!1);else{var o=n.parent().siblings().find("[data-filter-value=All]");o.data("active")&&(o.data("active",!1),o.removeClass("_active"))}return n.data("active",!s),s?n.removeClass("_active"):n.addClass("_active"),!1},p.click.applySubRegionsFilter=function(t){var n=e(this),i=n.data("filter-key"),a=n.data("filter-value"),s=n.data("active")===!0,r={};if("All"!=a?(r.filterKey=i,r.filterValue=a):u.filters.clearFilters(),u.cinemas.applyFilter(r,s,t),"All"==a)n.parent().siblings().find("._active").removeClass("_active").data("active",!1);else{var o=n.parent().siblings().find("[data-filter-value=All]");o.data("active")&&(o.data("active",!1),o.removeClass("_active"))}return n.data("active",!s),s?n.removeClass("_active"):n.addClass("_active"),!1},p.click.handleEventClick=function(){var t=e(this).data("id"),n=o.events[t];BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{ProductID:t,"Event Name":n.eventName,"Event Type":"MT",Appcode:window.global.strAppCode});var i;i=n.isNew?"New-Movie-Click":"Movies-Click",BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"event_click",category:"Quickbook",action:i,label:n.eventName})},p.click.handleVenueClick=function(){},p.click.handleDimensionClick=function(){var t=e(this).data("id"),n=o.events[t],i={ProductID:t,"Event Name":n.eventName,"Experience Clicked":n.dimension,"Event Type":"MT",Appcode:window.global.strAppCode};BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",i)},p.dispatchRecommendWizEvent=function(){if(F!==!0){F=!0;var e=_.isEmpty(M)?"No":"Yes",t={"Recommendation Shown":e,Appcode:window.global.strAppCode};BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",t)}};var W=function(){return O=null,O=new e.Deferred,_.delay(s,1),O.promise()},Q=function(){u.filters.clearFilters(),g=null,F=!1,s(!0)},K=function(){s(!0)};BMS.Misc.Quickbook=BMS.Misc.Quickbook||{},BMS.Misc.Quickbook.movies={getFragment:W,resetData:Q,prefetchAPIData:K,postRender:u.quickBookPostRender}})}(jQuery),function(e){"use strict";e(function(){function t(e){_.isArray(e)||(e=[e]),D.resolveWith({type:o},e)}function n(e){_.isArray(e)||(e=[e]),D.rejectWith({type:o},e)}function i(e,t){r[o]=e,a(t)}function a(e){var t=r[o];return _.isEmpty(t)||_.isEmpty(t.data)?void(_.isEmpty(D)||n({error:"no-data"})):(!_.isEmpty(t.featured)&&b?(M=t.featured[0],k=!0):(M=null,f.featuredEvents={}),x=t.data.BookMyShow,E=x.arrEvent,B=x.arrLanguages,f.labels=f.getLabels(),f.events=f.getEvents(),f.genres=f.getGenres(),f.featuredEvents=f.getFeaturedEvents(),f.languages=f.getLanguages(),void(e!==!0&&y.quickBook()))}function s(t){if(!_.isEmpty(r[o])&&!_.isEmpty(r[o].data))return void a();var s="/serv/getData",c={timestamp:e.now(),cmd:"QUICKBOOK",type:l[o]},d="json",u=e.get(s,c,function(e){i(e,t)},d);u.fail(function(){_.isEmpty(D)||n({error:"ajax"})})}var r={},o=null,l={events:"CT",sports:"SP",plays:"PL"},c={events:"ET",plays:"PL",sports:"ST"},d={events:{event_click:"Events-Click"},plays:{event_click:"Plays-Click"},sports:{event_click:"Sports-Click"}},u={events:"events",sports:"sports",plays:"plays"},p={},f={},h={},g={},v={filters:{},container:{},grid:{}},m={},y={},S={},w={matchesFilter:100},b=!0,M=null,C="Featured Events",k=!1,x=null,E=null,B=null,T=4,$=6,A=e(window).height();A>500&&700>A?$=8:A>700&&1050>A?$=18:A>1050&&($=25);var I=!1,R={today:"Today",tomorrow:"Tomorrow",thisWeekend:"This Weekend",nextWeekend:"Next Weekend"},D=null,P=[l.sports],L={};L[l.events]=["genres"],L[l.plays]=["language"];var N=["GenreMeta"],O=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"text"}));p={getLabelByDate:function(e){var t=f.labels,n="";return p.date.isToday(e)&&-1!==t.indexOf(R.today)?n=R.today:p.date.isTomorrow(e)&&-1!==t.indexOf(R.tomorrow)?n=R.tomorrow:p.date.isThisWeekend(e)&&-1!==t.indexOf(R.thisWeekend)?n=R.thisWeekend:p.date.isNextWeekend(e)&&-1!==t.indexOf(R.nextWeekend)&&(n=R.nextWeekend),n},date:{isToday:function(e){var t=p.formattedDate(e);return t===U},isTomorrow:function(e){var t=p.formattedDate(e);return t===q},isThisWeekend:function(e){var t=p.formattedDate(e);return t==H||t==V},isNextWeekend:function(e){var t=p.formattedDate(e);return t==Q||t==Y}},formattedDate:function(e,t){e=e instanceof Date?e:new Date(e),t=t||"-";var n=e.getMonth()+1;return n=10>n?"0"+n:n,e.getFullYear()+t+n+t+e.getDate()},daysInMonth:function(e,t){return new Date(year,e,0).getDate()},weekendDates:function(){},sanitize:{date:function(e){return new Date(e.substr(0,4),Number(e.substr(4,2))-1,e.substr(6,2),e.substr(8,2),e.substr(10,2))},time:function(e){var t=e.getHours(),n=e.getMinutes(),i=!1;return t>12&&(t-=12,i=!0),10>n&&(n="0"+n),t+":"+n+" pm"},"boolean":function(e){return"string"==typeof e?"Y"==e?e=!0:"N"==e?e=!1:e:(("object"==typeof e||"array"==typeof e)&&_.each(e,function(t,n){e[n]=p.sanitize["boolean"](t)}),e)}},render:function(t,n,i){var a=e("#"+t).html();if(!e.isEmptyObject(a)){t=a.split("\n").join("");var s,r,o,l,c,d,u=/([$\^\\\/()|?+*\[\]{}.\-])/g;return i=i||{},d="{{}}",l=d.length,c=Math.ceil(l/2),r=d.substr(0,c).replace(u,"\\$1"),o=d.substr(c,l).replace(u,"\\$1")||r,s=new RegExp(r+"[^"+r+o+"]+"+o,"g"),t.replace(s,function(e){var t,i=e.slice(c,-c),a=i.split("."),s=0,r=a.length;if(i in n)t=n[i];else for(t=n;r>s;s++){if(!(a[s]in t))return e;t=t[a[s]]}return t})}},eventMatchesFilter:function(e){var t=_.isEmpty(S);f.labels;return _.each(S,function(n,i){switch(i){case"parent-genre":(e.genre.hasOwnProperty(n)||e.genre.hasOwnProperty(_.escape(n)))&&(t=!0);break;case"sub-genre":var a=S["parent-genre"],s=[],r=S[i],o=[];r.forEach(function(e,t){o.push(e);var n=_.escape(e);e!==n&&o.push(n)}),_.isEmpty(e.genre)||(s=e.genre[a]);var l=_.intersection(s,o);t=l.length>0;break;default:t=-1!==n.indexOf(e[i])}}),t},sortLanguagesForFilters:function(e){var t=_.clone(e);return t.sort()}};var F=new Date,U=p.formattedDate(F),j=new Date(F);j.setDate(j.getDate()+1);var q=p.formattedDate(j),G=new Date(F);G.setDate(G.getDate()+(6-F.getDay()));var H=p.formattedDate(G),z=new Date(G);z.setDate(z.getDate()+1);var V=p.formattedDate(z),W=new Date(z);W.setDate(W.getDate()+6);var Q=p.formattedDate(W),K=new Date(W);K.setDate(K.getDate()+1);var Y=p.formattedDate(K);f.getFeaturedEvents=function(){var e={};return _.isEmpty(M)?e:(M.forEach(function(t,n){e[t.EventCode]={eventId:t.ID,id:t.EventCode,title:t.EventName,details:t.EventDetails,arrDates:t.EventDates,fromDate:t.DateFrom,toDate:t.DateTo,url:t.RedirectURL,location:t.EventLocation,regionCode:t.RegCode,isFeatured:!0,sequence:n}}),e)},f.getEvents=function(){var e={};return E.forEach(function(t,n){var i=t.EventTitle,a=t.EventCode,s=BMS.Misc.fnUrlName(i).toLowerCase(),r="";u[o]!==u.sports||_.isEmpty(O)||_.isUndefined(O)||(r="/"+O.toLowerCase()),r+="/"+u[o]+"/"+s+"/"+a;var l={},c=t.jsonGenre;_.isEmpty(c)||(_.isObject(c)?l=c:_.isString(c)&&(l=JSON.parse(c)));var d=[],f=[],h={},g=t.arrDates;g.forEach(function(e){var t=e.ShowDateCode,n=p.sanitize.date(t),i=p.getLabelByDate(n);d.push(n),_.isEmpty(i)||(h[i]=!0)}),f=_.keys(h),e[a]={id:a,type:t.EventType,title:i,language:t.Language,arrDates:t.arrDates,eventDates:d,ratings:t.Ratings,url:r,viewLabels:f,genre:l,sequence:n}}),e},f.getLanguages=function(){if(l[o]!==l.plays)return[];var e={};return _.each(f.events,function(t){var n=_.intersection(t.viewLabels,f.labels);0!==n.length&&(e[t.language]=!0)}),_.keys(e)},f.getLabels=function(){var e=[R.today],t=F.getDay(),n=5===t;if(n)e.push(R.thisWeekend,R.nextWeekend);else{var i=0===t||6===t;i?e.push(R.tomorrow,R.nextWeekend):e.push(R.tomorrow,R.thisWeekend)}return k&&e.push(C),e},f.labelsEvents=function(){var e={};f.labels.forEach(function(t){e[t]={events:[]}});var t=f.events;if(_.each(t,function(t,n){t.matchesFilter=p.eventMatchesFilter(t),t.viewLabels.forEach(function(n){if(!_.isUndefined(e[n])){var i=e[n].events;i.push(t.id)}})}),k){var n=[];_.each(f.featuredEvents,function(e){n.push(e.id)}),e[C]={events:n}}return e},f.calculateEventScore=function(e){var t=0;(e.matchesFilter===!0||e.isFeatured===!0)&&(t+=w.matchesFilter);var n=e.viewLabels;return!_.isUndefined(n)&&n.length>1&&(t-=n.length),t},f.getScoredLabelsEvents=function(){var t=e.extend(!0,{},f.labelsEvents()),n={};return _.each(t,function(e,t){var i=e.events,a=[],s=[];_.each(i,function(e,n){var i;i=k&&t===C?f.featuredEvents[e]:f.events[e];var s={id:e};s.score=f.calculateEventScore(i),a.push(s)}),s=_(a).chain().sortBy(function(e){return t===C?f.featuredEvents[e.id].title:f.events[e.id].title}).sortBy(function(e){return-e.score}).value(),n[t]={},n[t].events=s}),n},f.getGenres=function(){var e={};return _.each(f.events,function(t){var n=_.intersection(t.viewLabels,f.labels);if(0!==n.length){var i=t.genre;_.each(i,function(t,n){_.isEmpty(e[n])&&(e[n]=[]),t=t.concat(e[n]),t=_.uniq(t),_.isEmpty(t)||(e[n]=t)})}}),e},h.rows=function(){for(var e=[],t=f.getScoredLabelsEvents(),n=0;n<f.labels.length;n++){var i=f.labels[n],a=t[i];if(!(_.isUndefined(a)||_.isUndefined(a.events)||_.isEmpty(a.events))){e.push({text:i,type:"header"});var s=a.events;_.each(s,function(t){e.push({type:"event",id:t.id,isFeatured:i===C&&k})})}}return e},h.grid=function(){for(var e={},t=1,n=h.rows(),i=0;i<n.length;)_.isEmpty(e[t])&&(e[t]={rows:[]}),e[t].rows.push(n[i]),i++,_.isUndefined(n[i])||"header"!=n[i].type||t++;return e},h.sportRows=function(){var e=[];return _.each(f.events,function(t){e.push({type:"event",id:t.id,isFeatured:!1})}),e},h.sportsGrid=function(){for(var e={},t=1,n=h.sportRows(),i=Math.ceil(n.length/T),a=0;a<n.length;)_.isEmpty(e[t])&&(e[t]={rows:[]}),e[t].rows.push(n[a]),a++,a>=i*t&&t++;return e},g.grid=function(){return l[o]===l.sports?h.sportsGrid():h.grid()},y.filters={},y.filters.clearFilters=function(){_.isEmpty("sub-genre")||y.filters.hideSubgenres(),S={}},y.filters.genres=function(e){if(e||(e=_.clone(f.genres)),!(_.isEmpty(e)||e.length<=1)){var t=_.keys(e);N.forEach(function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}),t.sort();var n="";t.forEach(function(e){n+=y.filters.getFilterItemHtml("parent-genre",e,e)}),v.genreFilters=y.filters.appendFilterSet(n)}},y.filters.getFilterItemHtml=function(e,t,n){return p.render("temp-filter",{text:n,filterValue:t,filterKey:e})},y.filters.subGenres=function(e){var t=f.genres[e];if(_.isEmpty(t)||(t=_.clone(t)),_.isEmpty(t)||t.length<=1)return void y.filters.hideSubgenres();t.sort();var n="";_.each(t,function(e){n+=y.filters.getFilterItemHtml("sub-genre",e,e)}),y.filters.hideSubgenres(),v.subGenreFilters=y.filters.appendFilterSet(n,"child-filters")},y.filters.hideSubgenres=function(){_.isEmpty(v.subGenreFilters)||v.subGenreFilters.empty().addClass("none")},y.filters.appendFilterSet=function(t,n){var i=p.render("temp-filter-set",{filters:t,cssClasses:n||""}),a=e(i);return a.find(".__filter").click(m.click.applyFilters),v.filters.append(a),I||(v.filters.removeClass("none"),I=!0),a},y.filters.languages=function(e){if(e||(e=_.clone(f.languages)),!(_.isEmpty(e)||e.length<=1)){e=_.filter(e,function(e){return e.indexOf("/")<0}),e=p.sortLanguagesForFilters(e);var t=e.indexOf("Others");if(-1===t&&(t=e.indexOf("others")),-1!==t){var n=e.splice(t,1);e.push(n)}var i='<div class="__label">Language</div>';_.each(e,function(e){i+=p.render("temp-filter",{text:e,filterValue:e,filterKey:"language"})}),v.languageFilters=y.filters.appendFilterSet(i)}},y.evt=function(e){var t;t=e.isFeatured?f.featuredEvents[e.id]:f.events[e.id];var n={},i="",a="",s="";return t.matchesFilter===!1?i+=" filter-false":e.isFeatured===!0?i+=" featured-event":_.isEmpty(S)||(s+=" matches-filter"),n.html=p.render("temp-event",{seenContent:"",text:t.title,eventURL:t.url,cssClass:a,containerCssClass:s,dimensions:"",ratingHTML:"",eventId:e.id}),n.cssClass=i,n},y.label=function(e){return p.render("temp-label",{text:e.text.toUpperCase()})},y.grid=function(){var t,i="";_.each(g.grid(),function(n,a){var s="",r=!1;if(n.rows.forEach(function(e,t){if(!_.isUndefined(e)){var n=null;switch(e.type){case"header":n="label";break;case"event":n="evt"}var i=y[n](e),a=[n+"-container"];_.isEmpty(i)||(t>$&&(r=!0,a.push("_hidden")),_.isObject(i)?(a.push(i.cssClass),s+='<li class="'+a.join(" ")+'">'+i.html+"</li>"):s+='<li class="'+a.join(" ")+'">'+i+"</li>")}}),!_.isEmpty(s)){var o="";r===!0&&(o+=p.render("temp-view-more")),i+=p.render("temp-grid-col",{listHtml:s,viewMore:o}),t=e(i),t.find(".__view-more").click(m.click.handleViewMoreLink)}}),_.isEmpty(t)?n({error:"no-data"}):(v.grid.html(t).removeClass("none"),v.grid.find(".__event").on("click",m.click.handleEventClick))},y.applyFilter=function(e,t,n){if(t===!0)switch(e.filterKey){case"parent-genre":_.isEmpty(S[e.filterKey])||delete S[e.filterKey],_.isEmpty(S["sub-genre"])||delete S["sub-genre"],y.filters.hideSubgenres();break;case"sub-genre":var i=S[e.filterKey].indexOf(e.filterValue);S[e.filterKey].splice(i,1),0===S[e.filterKey].length&&delete S[e.filterKey];break;default:var i=S[e.filterKey].indexOf(e.filterValue);S[e.filterKey].splice(i,1),0===S[e.filterKey].length&&delete S[e.filterKey]}else if(!_.isEmpty(e))switch(e.filterKey){case"parent-genre":S[e.filterKey]=e.filterValue,_.isEmpty(S["sub-genre"])||delete S["sub-genre"],y.filters.subGenres(S["parent-genre"]);break;case"sub-genre":_.isEmpty(S[e.filterKey])&&(S[e.filterKey]=[]);var a=S[e.filterKey];a.push(e.filterValue),S[e.filterKey]=_.uniq(a);break;default:_.isEmpty(S[e.filterKey])&&(S[e.filterKey]=[]);var s=S[e.filterKey];s.push(e.filterValue),S[e.filterKey]=_.uniq(s)}y.grid();var r=_.values(S).join(",");BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{"Filter Used":r,"Event Type":c[o],Appcode:window.global.strAppCode}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"filters",category:"Quickbook",action:"Movies-Filter",label:r})},y.generateFilters=function(){-1===P.indexOf(l[o])&&(-1!==L[l[o]].indexOf("genres")&&y.filters.genres(),-1!==L[l[o]].indexOf("language")&&y.filters.languages())},y.quickBook=function(){var e=r[o];return _.isEmpty(e)||_.isEmpty(e.data)?void n({error:"no-data"}):(y.generateFilters(),y.grid(),void t(v.container))},v.prepareContainer=function(){var t=e(p.render("temp-quickbook-container",{quickbookType:"quickbook-"+o,containerClass:"other-events"}));v.container=t,v.filters=v.container.find(".filters"),v.grid=v.container.find(".grid")},v.clearContainers=function(){I=!1,v.filters.empty().addClass("none"),v.grid.empty().addClass("none"),v.prepareContainer()},m.click={},m.click.applyFilters=function(t){var n=e(this),i=n.data("filter-key"),a=n.data("filter-value"),s={},r=n.data("active")===!0;if("All"!==a?(s.filterKey=i,s.filterValue=a):(delete S[i],i==["parent-genre"]&&(delete S["sub-genre"],y.filters.hideSubgenres())),y.applyFilter(s,r,t),"parent-genre"===i||"sub-genre"===i&&"All"===a)n.parent().siblings().find("._active").removeClass("_active").data("active",!1);else if("sub-genre"==i){var o=n.parent().siblings().find("[data-filter-value=All]");o.data("active")&&(o.data("active",!1),o.removeClass("_active"))}return n.data("active",!r),r?n.removeClass("_active"):n.addClass("_active"),!1},m.click.handleEventClick=function(){var t=e(this).data("id"),n=f.events[t];BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{ProductID:t,"Event Name":n.title,"Event Type":c[o],Appcode:window.global.strAppCode}),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"event_click",category:"Quickbook",action:d[o].event_click,label:n.eventName})},m.click.handleViewMoreLink=function(){var t=e(this);return t.addClass("none").prev().find("._hidden").removeClass("_hidden"),!1};var X=function(t){return D=new e.Deferred,o=t,v.prepareContainer(),v.clearContainers(),y.filters.clearFilters(),_.delay(s,1),D.promise()},J=function(){r={},y.filters.clearFilters(),v.clearContainers()},Z=function(e){o=e,s(!0)};BMS.Misc.Quickbook=BMS.Misc.Quickbook||{},BMS.Misc.Quickbook.events={getFragment:X,resetData:J,prefetchAPIData:Z}})}(jQuery),function(e){e(function(){function t(){var t=f.modal.find(".modal-header").outerHeight(),n=e(window).height();f.modal.find(".qb-overflow-wrapper").css({height:n-t+"px"})}var n,i={},a=!1,s={},r="",o=!1,l=["favourites","mostRecentlyBooked","mostRecentlySurfed","popular"],c={favourites:"favourites"},d=3,u=[],p={movies:"movies",events:"events",sports:"sports",plays:"plays"},f={mainBodyWrapper:e("body > .main-body-wrapper"),showCaseCarousel:e("#showcase-primary .showcase-carousel")};f.quickbookWrapper=e("#quickbook-wrapper"),f.modalOverlay=f.quickbookWrapper.find(".qb-modal-overlay"),f.modal=e(".modal",f.quickbookWrapper),f.searchBoxContainer=e(".qb-search-box-container"),f.searchDropdown=f.searchBoxContainer.find("#btn-dd-search"),f.region=f.searchBoxContainer.find(".qb-region"),f.preferredCinemas=e(".preferred-cinemas-container",f.quickbookWrapper),f.quickbookOverFlowWrapper=f.modal.find(".modal-body .qb-overflow-wrapper"),f.quickbookBody=f.quickbookWrapper.find(".quickbook-body"),f.topTrending=f.modal.find(".modal-body #qb-top-trending"),f.qbSearchListIcon=f.searchBoxContainer.find("#search-list-icon"),r=f.searchDropdown.data("type"),s.render=function(t,n,i){var a=e("#"+t).html();if(!e.isEmptyObject(a)){t=a.split("\n").join("");var s,r,o,l,c,d,u=/([$\^\\\/()|?+*\[\]{}.\-])/g;return i=i||{},d="{{}}",l=d.length,c=Math.ceil(l/2),r=d.substr(0,c).replace(u,"\\$1"),o=d.substr(c,l).replace(u,"\\$1")||r,s=new RegExp(r+"[^"+r+o+"]+"+o,"g"),t.replace(s,function(e){var t,i=e.slice(c,-c),a=i.split("."),s=0,r=a.length;if(i in n)t=n[i];else for(t=n;r>s;s++){if(!(a[s]in t))return e;t=t[a[s]]}return t})}},i.isOpen=function(){return a},i.updateIsOpen=function(e){a=e},i.show=function(e){r=e;var n=i.isOpen();f.qbSearchListIcon.hide(),n?(i.clearQuickbookBody(),r!==p.movies?(i.hideTopTrendingMovies(),i.hidePreferredCinemas(!0)):i.showPreferredCinemas(!0),i.showLoaderTemplate(),i.unbindResizeHandler()):(handlePopups.freezeDocument(),i.doShowAnimation(),i.showSearchbox(),r===p.movies?i.showPreferredCinemas(!0):i.hidePreferredCinemas(!0)),t(),n||i.showLoaderTemplate(),i.showQuickbook(r),n||i.updateIsOpen(!0)},i.doShowAnimation=function(){f.modal.removeClass("none"),f.modalOverlay.removeClass("none"),f.quickbookWrapper.hasClass("_fixed")&&(o=!0,f.quickbookWrapper.removeClass("_fixed")),f.quickbookWrapper.addClass("_active")},i.hide=function(){handlePopups.releaseDocument(),i.clearQuickbookBody(),i.unbindResizeHandler(),f.qbSearchListIcon.show(),r===p.movies&&i.hideTopTrendingMovies(),i.hideSearchbox(),i.showPreferredCinemasContainer(),i.hidePreferredCinemas(),i.updateIsOpen(!1),i.doHideAnimation()},i.doHideAnimation=function(){f.mainBodyWrapper.removeClass("_blur"),o===!0&&(o=!1,f.quickbookWrapper.addClass("_fixed")),f.quickbookWrapper.removeClass("_active"),setTimeout(function(){},10),f.modalOverlay.addClass("none")},i.getCurrentQuickbookObject=function(){var e=null;return _.isEmpty(r)&&(r=f.searchDropdown.data("type")),e=r!==p.movies?BMS.Misc.Quickbook.events:BMS.Misc.Quickbook[r]},i.showQuickbook=function(){var e=i.getCurrentQuickbookObject(),t=e.getFragment(r);
t.done(function(e){this.type===r&&i.renderQuickbookContent(e,r)}),t.fail(function(e){this.type===r&&i.showNoResultsTemplate(e)})},i.renderQuickbookContent=function(e){r===p.movies&&f.quickbookBody.css("visibility","hidden"),f.quickbookBody.html(e),i.postRender(),f.quickbookBody.css("visibility","visible"),r===p.movies&&i.showTopTrendingMovies(),i.bindResizeHandler()},i.bindResizeHandler=function(){n=_.debounce(function(){i.postRender(),t()},400),e(window).bind("resize",n)},i.unbindResizeHandler=function(){e(window).unbind("resize",n)},i.postRender=function(){var e=i.getCurrentQuickbookObject();_.isUndefined(e)||_.isUndefined(e.postRender)||e.postRender.call(this)},i.clearQuickbookBody=function(){f.quickbookBody.html("")},i.showNoResultsTemplate=function(){f.quickbookBody.html(s.render("temp-no-results"))},i.showLoaderTemplate=function(){f.quickbookBody.html(s.render("temp-qb-loader"))},i.showRegion=function(){_.isEmpty(f.region.find(".region-name").html())||f.region.removeClass("none")},i.hideRegion=function(){f.region.addClass("none")},i.showPreferredCinemas=function(e){f.preferredCinemas.html().trim().length>0&&f.preferredCinemas.removeClass("none"),e===!0&&f.preferredCinemas.addClass("qb-active")},i.hidePreferredCinemas=function(e){f.preferredCinemas.removeClass("qb-active"),1==e&&f.preferredCinemas.addClass("none")},i.showSearchbox=function(){f.searchBoxContainer.addClass("_fixed"),f.searchBoxContainer.addClass("_shift")},i.hideSearchbox=function(){f.searchBoxContainer.removeClass("_shift"),setTimeout(function(){f.searchBoxContainer.removeClass("_fixed")},200)},i.showTopTrendingMovies=function(){},i.hideTopTrendingMovies=function(){},i.resetQuickbookListingData=function(){BMS.Misc.Quickbook[p.movies].resetData(),BMS.Misc.Quickbook[p.events].resetData(),i.getPreferredCinemasData()},i.prefetchAPIData=function(){var e=i.getCurrentQuickbookObject();e.prefetchAPIData(r)},i.getPreferredCinemasData=function(){var t=e.ajax({url:"/serv/getData",data:{cmd:"GETPREFERREDCINEMAS"},dataType:"json",cache:!1});t.done(function(e){i.processPreferredCinemas(e)})},i.processPreferredCinemas=function(e){if(!_.isEmpty(e)){try{BMS.Storage.set({name:"userCine",key:"pop",value:_.keys(e.popular).join(";"),storage:"C",sess:!1})}catch(t){}var n,a,s=0,r={};for(n=0;n<l.length;n++){if(s>=d)break;var o=l[n];o===c.favourites&&(a="Favourite Cinemas");var p=e[o];_.each(p,function(e,t){return s===d?!1:void(r.hasOwnProperty(t)||(r[t]=e,s++))})}_.isEmpty(a)&&(a="Preferred Cinemas");var f=_.map(r,function(e){return e});f=_.compact(f),f.length<1||(u=f,i.renderPreferredCinemas({label:a,data:f}))}},i.renderPreferredCinemas=function(e){var t="",n=[];e.data.forEach(function(e){var t="/buytickets/"+BMS.Misc.fnUrlName(e.venueName.toLowerCase())+"-"+BMS.Misc.fnUrlName(e.regionName.toLowerCase())+"/cinema-"+e.regionCode.toLowerCase()+"-"+e.venueCode+"-MT";n.push(s.render("temp-preferred-cinema-item",{url:t,name:e.venueName}))});var t=s.render("temp-preferred-cinemas",{label:e.label.trim(),data:n.join(", ")});f.preferredCinemas.html(t),r===p.movies&&i.showPreferredCinemas()},i.getPreferredCinemasObject=function(){var e={};return u.forEach(function(t){e[t.venueCode]=t}),e},i.showPreferredCinemasContainer=function(){f.preferredCinemas.removeClass("none")},i.hidePreferredCinemasContainer=function(){f.preferredCinemas.addClass("none")},global.blnIsTouchScreen!==!0&&BMS.SignIn.fnRegister("quickbook-preferred-cinemas",i.getPreferredCinemasData),f.quickbookWrapper.length>0&&(i.prefetchAPIData(),i.getPreferredCinemasData()),BMS.Misc.QuickbookModal={show:i.show,hide:i.hide,postRender:i.postRender,getPreferredCinemas:i.getPreferredCinemasObject,showPreferredCinemasContainer:i.showPreferredCinemasContainer,hidePreferredCinemasContainer:i.hidePreferredCinemasContainer},global.blnIsTouchScreen!==!0&&BMS.SignIn.fnRegister("quickbook-listing",i.resetQuickbookListingData),global.blnIsTouchScreen!==!0&&global.RgnCallBack.push(i.resetQuickbookListingData)})}(jQuery),function(e){e(function(){function t(e,t){var n=[];return n.push(p[e]),n[0]===p.NCPA&&n.push(t),n.join("-")}function n(e){27!=e.keyCode&&27!=e.which||d||!w().length?d=!1:(d=!0,e.stopPropagation())}function i(e){(27==e.keyCode||27==e.which)&&C(!1)}var a=8,s=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"text"})),r=BMS.Misc.fnUrlName(BMS.Storage.get({name:"Rgn",key:"Code"})),o={MT:"MT",CT:"ET",PL:"PL",SP:"ST"},l={All:"All-Search",MT:"Movies-Search",CT:"Events-Search",PL:"Plays-Search",SP:"Sports-Search"},c=null,d=!1,u={url:"/quickbook-search.bms",type:"GET",headers:{"x-requested-from":"WEB"},data:{},dataType:"json"},p={NCPA:"/venue/Tata-Theatre-NCPA/NCPA"},f=[],h={};h.searchBoxContainer=e(".qb-search-box-container"),h.searchBox=h.searchBoxContainer.find(".search-box"),h.dropdownButton=h.searchBoxContainer.find("#btn-dd-search"),h.dropdownMenu=h.searchBoxContainer.find(".search-dropdown-menu"),h.searchDropdown=h.searchBoxContainer.find(".search-dropdown");var g=null,v={options:{config:{minLength:1},dataSet:{name:"quickbook",source:function(t,n,i){c&&c.abort(),g=t;var s=h.dropdownButton.data("value"),o={q:t,sz:a,st:"ON"};1!==h.dropdownButton.data("isall")&&(o.sc=s),-1===f.indexOf(s)&&(o.r=r),u.data=o,c=e.ajax(u).done(function(e){var t=v.getProcessedSearchResults(e);i(t)})},limit:a,display:function(e){return e.title},templates:{suggestion:function(t){return e("<div>").text(t.title)},category:{header:function(t){var n=t.split("-"),i=n[0].toLowerCase(),a=n[1].toUpperCase();if("event"==i)switch(a){case"MT":header="Movies";break;case"CT":header="Events";break;case"PL":header="Plays";break;case"SP":header="Sports"}else if("venue"==i)switch(a){case"MT":header="Cinemas";break;case"PL":header="Theaters";break;default:header="Venues"}return e("<div>").text(header)}}},displayCategory:function(e){var t=[];return t.push(e.ttGroup.group,e.ttGroup.type),t.join("-")}},onResultSelection:function(e,t){v.processSelectedResult(t)}},getProcessedSearchResults:function(t){var n=t.hits;return _.map(n,function(t){var n;if(-1!==t.Type.indexOf("|")){var i=t.Type.split("|");n=i[1]}else n=t.Type;var a={group:t.Group,type:n,title:t.Title,groupCode:t.Code,companyCode:t.CompanyCode,status:t.Status,ttGroup:{group:t.Group,type:n}},s=null,r=null;return _.isUndefined(t.inner_hits)||e.isEmptyObject(t.inner_hits)||(s=t.inner_hits.map(function(e,t){return 0===t?r=e.Code:"Y"===e.IsDefault&&(r=e.Code),{isDefault:e.IsDefault,dimension:e.Format,language:e.Language,code:e.code}}),a.defaultEventCode=r),_.isNull(r)&&(r=t.Code),a.innerHits=s,a})},processSelectedResult:function(e,n){var i="",a=e.title,c=e.defaultEventCode,d=e.groupCode,u=e.ttGroup.group.toLowerCase(),f=e.type.toUpperCase();if("event"===u)switch(f){case"MT":_.isEmpty(e.status)||"CS"!==e.status?i="/buytickets/"+BMS.Misc.fnUrlName(a.toLowerCase())+"-"+s.toLowerCase()+"/movie-"+r.toLowerCase()+"-"+c+"-MT":(_.isEmpty(s)||_.isUndefined(s)||(i="/"+s.toLowerCase()),i+="/movies/"+BMS.Misc.fnUrlName(a.toLowerCase())+"/"+c);break;case"CT":i="/events/"+BMS.Misc.fnUrlName(a)+"/"+c;break;case"PL":i="/plays/"+BMS.Misc.fnUrlName(a)+"/"+c;break;case"SP":_.isEmpty(s)||_.isUndefined(s)||(i="/"+s.toLowerCase()),i+="/sports/"+BMS.Misc.fnUrlName(a)+"/"+c}else if("venue"===u)switch(f){case"MT":i="/buytickets/"+BMS.Misc.fnUrlName(a)+"-"+s.toLowerCase()+"/cinema-"+r.toLowerCase()+"-"+d+"-MT";break;default:i=p.hasOwnProperty(e.companyCode)?t(e.companyCode,e.groupCode):"/venue/"+BMS.Misc.fnUrlName(a)+"/"+e.companyCode}BMS.Misc.fnBusy(!0),"venue"===u&&(c=e.groupCode),BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",{"Is Search":"Yes","Search Term":g,ProductID:c,"Event Name":a,"Event Type":o[f],Appcode:window.global.strAppCode});var v=h.dropdownButton.data(),m=null;m=_.isEmpty(v)?f:1===v.isall?"All":v.value,BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"search",category:"Quickbook",action:l[m],label:g}),window.location.assign(i)}},m=h.searchBox.typeaheadWrapper(v.options);m.on("keyup",n);var y=function(){S("")},S=function(e){m.typeahead("val",e)},w=function(){return m.typeahead("val")},b=function(t){_.isUndefined(t)&&(t=h.dropdownButton.data("type"));var n=e(".coach-mark-overlay"),a=!!BMS.Storage.get({name:"home-page-coached"});if(n.length>0&&a===!1)return n.addClass("none"),e(".secondary .__overlay").hide(),BMS.Storage.set({name:"home-page-coached",value:!0}),handlePopups.releaseDocument(),void h.searchBox.blur();var s,r=h.dropdownButton.data("isall");s=1===r?h.searchBoxContainer.find('li [data-type="'+t+'"][data-isall=1]').data("search-placeholder"):h.searchBoxContainer.find('li [data-type="'+t+'"][data-isall=0]').data("search-placeholder"),h.searchBox.attr("placeholder",s),BMS.Misc.QuickbookModal.show(t),h.searchBox.focus(),e(document).bind("keyup",i)},M=function(t){if(_.isUndefined(t)&&(t=h.dropdownButton.data("type"),h.dropdownMenu.find("[data-type="+t+"][data-isall=0]").parent().removeClass("none")),!e("#quickbook-wrapper .qb-modal-overlay").hasClass("none")){BMS.Misc.QuickbookModal.hide();var n=h.dropdownMenu.find("[data-isall=1]"),a=n.data("type"),s=n.data("value"),r=n.data("placeholder"),o=(n.data("search-placeholder"),n.text());h.searchBox.attr("placeholder",r),n.parent().addClass("none"),h.dropdownButton.data({type:a,value:s,isall:1}).find(".icon-type").html(n.find(".icon-type").html()).next().text(o),y(),h.searchBox.blur(),e(document).unbind("keyup",i)}},C=function(e){e===!0?(BMS.Misc.Router.triggerRoute("quickbook",!1),b()):(BMS.Misc.Router.triggerRoute("",!1),M())};h.dropdownMenu.find(".__item").click(function(){var t=e(this),n=t.data("type"),i=t.data("value");h.searchDropdown.removeClass("_hovered"),y();var a=0;1===t.data("isall")&&(a=1),h.dropdownButton.data({type:n,value:i,isall:a}).find(".icon-type").html(t.find(".icon-type").html()).next().text(t.text()),h.dropdownMenu.children().removeClass("none"),t.parent().addClass("none"),C(!0);var s={"Category Selected":h.dropdownButton.text().trim(),Appcode:window.global.strAppCode};return BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"QuickBook",s),!1}),h.dropdownButton.on("click",function(t){e("#quickbook-wrapper .qb-modal-overlay").hasClass("none")&&(C(!0),h.searchDropdown.removeClass("_hovered"))}),h.searchBox.on("focus",function(t){e("#quickbook-wrapper .qb-modal-overlay").hasClass("none")&&e("#quickbook-wrapper").length>0&&C(!0)}),e("#search-list-icon",h.searchBoxContainer).on("click",function(){C(!0)}),h.searchBoxContainer.on("click","#qb-region-link",function(){return BMS.Region.fnSwStates(""),!1}),h.searchDropdown.on("mouseover",function(){h.searchDropdown.addClass("_hovered")}),h.searchDropdown.on("mouseleave",function(){h.searchDropdown.removeClass("_hovered")}),e(".qb-modal-overlay #btn-close").click(function(){C(!1)}),e(".qb-modal-overlay #btn-back").click(function(){C(!1)});var k=function(){C(!0)};BMS.Misc.Router.registerRoute("quickbook","quickbookSearchBox",b,M),BMS.Misc.Quickbook=BMS.Misc.Quickbook||{},BMS.Misc.Quickbook.searchBox={getVal:w,setVal:S,triggerQuickbook:k}})}(jQuery),!function(e){var t=e(window);e.fn.visible=function(e,n,i){if(!(this.length<1)){var a=this.length>1?this.eq(0):this,s=a.get(0),r=t.width(),o=t.height(),i=i?i:"both",l=n===!0?s.offsetWidth*s.offsetHeight:!0;if("function"==typeof s.getBoundingClientRect){var c=s.getBoundingClientRect(),d=c.top>=0&&c.top<o,u=c.bottom>0&&c.bottom<=o,p=c.left>=0&&c.left<r,f=c.right>0&&c.right<=r,h=e?d||u:d&&u,g=e?p||f:p&&f;if("both"===i)return l&&h&&g;if("vertical"===i)return l&&h;if("horizontal"===i)return l&&g}else{var v=t.scrollTop(),m=v+o,y=t.scrollLeft(),S=y+r,w=a.offset(),b=w.top,M=b+a.height(),C=w.left,k=C+a.width(),_=e===!0?M:b,x=e===!0?b:M,E=e===!0?k:C,B=e===!0?C:k;if("both"===i)return!!l&&m>=x&&_>=v&&S>=B&&E>=y;if("vertical"===i)return!!l&&m>=x&&_>=v;if("horizontal"===i)return!!l&&S>=B&&E>=y}}}}(jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=window.Slick||{};t=function(){function t(t,i){var a,s=this;s.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(t),appendDots:e(t),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button"><svg version="1.1" style="stroke-width: 10px; stroke: #FFF; fill: #FFF;" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-prev-arrow"></use></svg></button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"><svg version="1.1" style="stroke-width: 5px; stroke: #FFF; fill: #FFF;" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-next-arrow"></use></svg></button>',autoplay:!0,autoplaySpeed:3e3,centerMode:!0,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(t+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",offset:-75,mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},s.initials={animating:!1,dragging:!1,autoPlayTimer:500,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},e.extend(s,s.initials),s.activeBreakpoint=null,s.animType=null,s.animProp=null,s.breakpoints=[],s.breakpointSettings=[],s.cssTransitions=!1,s.hidden="hidden",s.paused=!1,s.positionProp=null,s.respondTo=null,s.rowCount=1,s.shouldClick=!0,s.$slider=e(t),s.$slidesCache=null,s.transformType=null,s.transitionType=null,s.visibilityChange="visibilitychange",s.windowWidth=0,s.windowTimer=null,s.visibleDiv=!1,a=e(t).data("slick")||{},s.options=e.extend({},s.defaults,a,i),s.currentSlide=s.options.initialSlide,s.originalSettings=s.options,"undefined"!=typeof document.mozHidden?(s.hidden="mozHidden",s.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(s.hidden="webkitHidden",s.visibilityChange="webkitvisibilitychange"),s.autoPlay=e.proxy(s.autoPlay,s),s.autoPlayClear=e.proxy(s.autoPlayClear,s),s.changeSlide=e.proxy(s.changeSlide,s),s.clickHandler=e.proxy(s.clickHandler,s),s.selectHandler=e.proxy(s.selectHandler,s),s.setPosition=e.proxy(s.setPosition,s),s.swipeHandler=e.proxy(s.swipeHandler,s),s.dragHandler=e.proxy(s.dragHandler,s),s.keyHandler=e.proxy(s.keyHandler,s),s.autoPlayIterator=e.proxy(s.autoPlayIterator,s),s.instanceUid=n++,s.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,s.init(!0),e(window).scroll(function(){s.lazyLoad.call(s,!0)}),e(window).resize(function(){s.lazyLoad.call(s)})}var n=0;return t}(),t.prototype.addSlide=t.prototype.slickAdd=function(t,n,i){var a=this;if("boolean"==typeof n)i=n,n=null;else if(0>n||n>=a.slideCount)return!1;a.unload(),"number"==typeof n?0===n&&0===a.$slides.length?e(t).appendTo(a.$slideTrack):i?e(t).insertBefore(a.$slides.eq(n)):e(t).insertAfter(a.$slides.eq(n)):i===!0?e(t).prependTo(a.$slideTrack):e(t).appendTo(a.$slideTrack),a.$slides=a.$slideTrack.children(this.options.slide),a.$slideTrack.children(this.options.slide).detach(),a.$slideTrack.append(a.$slides),a.$slides.each(function(t,n){e(n).attr("data-slick-index",t)}),a.$slidesCache=a.$slides,a.reinit()},t.prototype.animateSlide=function(t,n){var i={},a=this;a.options.rtl===!0&&a.options.vertical===!1&&(t=-t),a.transformsEnabled===!1?a.options.vertical===!1?a.$slideTrack.animate({left:t},a.options.speed,a.options.easing,n):a.$slideTrack.animate({top:t},a.options.speed,a.options.easing,n):a.cssTransitions===!1?(a.options.rtl===!0&&(a.currentLeft=-a.currentLeft),e({animStart:a.currentLeft}).animate({animStart:t},{duration:a.options.speed,easing:a.options.easing,step:function(e){e=Math.ceil(e),a.options.vertical===!1?(i[a.animType]="translate("+e+"px, 0px)",a.$slideTrack.css(i)):(i[a.animType]="translate(0px,"+e+"px)",a.$slideTrack.css(i))},complete:function(){n&&n.call()}})):(a.applyTransition(),t=Math.ceil(t),a.options.vertical===!1?i[a.animType]="translate3d("+t+"px, 0px, 0px)":i[a.animType]="translate3d(0px,"+t+"px, 0px)",a.$slideTrack.css(i),n&&setTimeout(function(){a.disableTransition(),n.call()},a.options.speed))},t.prototype.asNavFor=function(t){var n=this,i=n.options.asNavFor;i&&null!==i&&(i=e(i).not(n.$slider)),null!==i&&"object"==typeof i&&i.each(function(){var n=e(this).slick("getSlick");n.unslicked||n.slideHandler(t,!0)})},t.prototype.applyTransition=function(e){var t=this,n={};t.options.fade===!1?n[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:n[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.autoPlay=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer),e.slideCount>e.options.slidesToShow&&e.paused!==!0&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this;e.options.infinite===!1?1===e.direction?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(e.currentSlide-1===0&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&(t.$prevArrow=e(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=e(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},t.prototype.buildDots=function(){var t,n,i=this;if(i.options.dots===!0&&i.slideCount>i.options.slidesToShow){for(n='<ul class="'+i.options.dotsClass+'">',t=0;t<=i.getDotCount();t+=1)n+="<li>"+i.options.customPaging.call(this,i,t)+"</li>";n+="</ul>",i.$dots=e(n).appendTo(i.options.appendDots),i.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,n){e(n).attr("data-slick-index",t).data("originalStyling",e(n).attr("style")||"")}),t.$slidesCache=t.$slides,t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),(t.options.centerMode===!0||t.options.swipeToSlide===!0)&&(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},t.prototype.buildRows=function(){var e,t,n,i,a,s,r,o=this;if(i=document.createDocumentFragment(),s=o.$slider.children(),o.options.rows>1){for(r=o.options.slidesPerRow*o.options.rows,a=Math.ceil(s.length/r),e=0;a>e;e++){var l=document.createElement("div");for(t=0;t<o.options.rows;t++){var c=document.createElement("div");for(n=0;n<o.options.slidesPerRow;n++){var d=e*r+(t*o.options.slidesPerRow+n);s.get(d)&&c.appendChild(s.get(d))}l.appendChild(c)}i.appendChild(l)}o.$slider.html(i),o.$slider.children().children().children().css({width:100/o.options.slidesPerRow+"%",display:"inline-block"})}},t.prototype.changeSlide=function(t,n){var i,a,s,r=this,o=e(t.target);switch(o.is("a")&&t.preventDefault(),o.is("li")||(o=o.closest("li")),s=r.slideCount%r.options.slidesToScroll!==0,i=s?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,t.data.message){case"previous":a=0===i?r.options.slidesToScroll:r.options.slidesToShow-i,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-a,!1,n);break;case"next":a=0===i?r.options.slidesToScroll:i,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+a,!1,n);break;case"index":var l=0===t.data.index?0:t.data.index||o.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(l),!1,n),o.children().trigger("focus");break;default:return}},t.prototype.checkNavigable=function(e){var t,n,i=this;if(t=i.getNavigableIndexes(),n=0,e>t[t.length-1])e=t[t.length-1];else for(var a in t){if(e<t[a]){e=n;break}n=t[a]}return e},t.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&e("li",t.$dots).off("click.slick",t.changeSlide),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide)),t.$list.off("click.slick",t.clickHandler),e(document).off(t.visibilityChange,t.visibility),t.options.accessibility===!0&&t.$list.off("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).off("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>1&&(e=t.$slides.children().children(),e.removeAttr("style"),t.$slider.html(e))},t.prototype.clickHandler=function(e){var t=this;t.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(t){var n=this;n.autoPlayClear(),n.touchObject={},n.cleanUpEvents(),e(".slick-cloned",n.$slider).detach(),n.$dots&&n.$dots.remove(),n.options.arrows===!0&&(n.$prevArrow&&n.$prevArrow.length&&(n.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),n.htmlExpr.test(n.options.prevArrow)&&n.$prevArrow.remove()),n.$nextArrow&&n.$nextArrow.length&&(n.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),n.htmlExpr.test(n.options.nextArrow)&&n.$nextArrow.remove())),n.$slides&&(n.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){e(this).attr("style",e(this).data("originalStyling"))}),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.detach(),n.$list.detach(),n.$slider.append(n.$slides)),n.cleanUpRows(),n.$slider.removeClass("slick-slider"),n.$slider.removeClass("slick-initialized"),n.unslicked=!0,t||n.$slider.trigger("destroy",[n])},t.prototype.disableTransition=function(e){var t=this,n={};n[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.fadeSlide=function(e,t){var n=this;n.cssTransitions===!1?(n.$slides.eq(e).css({zIndex:n.options.zIndex}),n.$slides.eq(e).animate({opacity:1},n.options.speed,n.options.easing,t)):(n.applyTransition(e),n.$slides.eq(e).css({opacity:1,zIndex:n.options.zIndex}),t&&setTimeout(function(){n.disableTransition(e),t.call()},n.options.speed))},t.prototype.fadeSlideOut=function(e){var t=this;t.cssTransitions===!1?t.$slides.eq(e).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({opacity:0,zIndex:t.options.zIndex-2}))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;null!==e&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){var e=this;return e.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,n=0,i=0;if(e.options.infinite===!0)for(;t<e.slideCount;)++i,t=n+e.options.slidesToShow,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(e.options.centerMode===!0)i=e.slideCount;else for(;t<e.slideCount;)++i,t=n+e.options.slidesToShow,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return i-1},t.prototype.getLeft=function(e){var t,n,i,a=this,s=0;return a.slideOffset=0,n=a.$slides.first().outerHeight(!0),a.options.infinite===!0?(a.slideCount>a.options.slidesToShow&&(a.slideOffset=a.slideWidth*a.options.slidesToShow*-1,s=n*a.options.slidesToShow*-1),a.slideCount%a.options.slidesToScroll!==0&&e+a.options.slidesToScroll>a.slideCount&&a.slideCount>a.options.slidesToShow&&(e>a.slideCount?(a.slideOffset=(a.options.slidesToShow-(e-a.slideCount))*a.slideWidth*-1,s=(a.options.slidesToShow-(e-a.slideCount))*n*-1):(a.slideOffset=a.slideCount%a.options.slidesToScroll*a.slideWidth*-1,s=a.slideCount%a.options.slidesToScroll*n*-1))):e+a.options.slidesToShow>a.slideCount&&(a.slideOffset=(e+a.options.slidesToShow-a.slideCount)*a.slideWidth,s=(e+a.options.slidesToShow-a.slideCount)*n),a.slideCount<=a.options.slidesToShow&&(a.slideOffset=0,s=0),a.options.centerMode===!0&&a.options.infinite===!0?a.slideOffset+=a.slideWidth*Math.floor(a.options.slidesToShow/2)-a.slideWidth:a.options.centerMode===!0&&(a.slideOffset=0,a.slideOffset+=a.slideWidth*Math.floor(a.options.slidesToShow/2)),t=a.options.vertical===!1?e*a.slideWidth*-1+a.slideOffset:e*n*-1+s,a.options.variableWidth===!0&&(i=a.slideCount<=a.options.slidesToShow||a.options.infinite===!1?a.$slideTrack.children(".slick-slide").eq(e):a.$slideTrack.children(".slick-slide").eq(e+a.options.slidesToShow),t=i[0]?-1*i[0].offsetLeft:0,a.options.centerMode===!0&&(i=a.options.infinite===!1?a.$slideTrack.children(".slick-slide").eq(e):a.$slideTrack.children(".slick-slide").eq(e+a.options.slidesToShow+1),t=i[0]?-1*i[0].offsetLeft:0,t+=(a.$list.width()-i.outerWidth())/2)),t},t.prototype.getOption=t.prototype.slickGetOption=function(e){var t=this;return t.options[e]},t.prototype.getNavigableIndexes=function(){var e,t=this,n=0,i=0,a=[];for(t.options.infinite===!1?e=t.slideCount:(n=-1*t.options.slidesToScroll,i=-1*t.options.slidesToScroll,e=2*t.slideCount);e>n;)a.push(n),n=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return a},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var e,t=this;return e=t.options.centerMode===!0?t.slideWidth*Math.floor(t.options.slidesToShow/2):0,t.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){var n=this;n.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(t){var n=this;e(n.$slider).hasClass("slick-initialized")||(e(n.$slider).addClass("slick-initialized"),n.buildRows(),n.buildOut(),n.setProps(),n.startLoad(),n.loadSlider(),n.initializeEvents(),n.updateArrows(),n.updateDots()),n.lazyLoad(),t&&n.$slider.trigger("init",[n]),n.options.accessibility===!0},t.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.on("click.slick",{message:"next"},e.changeSlide))},t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide)},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.$list.on("click.slick",t.clickHandler),e(document).on(t.visibilityChange,e.proxy(t.visibility,t)),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,e.proxy(t.orientationChange,t)),e(window).on("resize.slick.slick-"+t.instanceUid,e.proxy(t.resize,t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),e.options.autoplay===!0&&e.autoPlay()},t.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&t.options.accessibility===!0?t.changeSlide({data:{message:"previous"}}):39===e.keyCode&&t.options.accessibility===!0&&t.changeSlide({data:{message:"next"}}))},t.prototype.lazyLoad=function(t){function n(t){e("img[data-lazy]",t).each(function(){var t=e(this),n=e(this).attr("data-lazy"),i=document.createElement("img"),a=e(this).attr("data-error");i.onload=function(){t.attr("src",n).removeAttr("data-lazy").removeAttr("slick-loading"),t.parents(".is-loading").removeClass("is-loading")},i.onerror=function(){""!=a&&t.animate({opacity:0},100,function(){void 0,t.attr("src",a).removeAttr("data-lazy").removeAttr("data-error").animate({opacity:1},200,function(){t.removeAttr("data-lazy").removeClass("slick-loading")}),a=""})},i.src=n})}var i,a,s,r,o=this;if(t){if(this.visibleDiv)return;if(1!=o.isVisible.call(o,o.$slides.eq(0)))return}(this.visibleDiv||1==o.isVisible.call(o,o.$slides.eq(0)))&&(o.options.centerMode===!0?o.options.infinite===!0?(s=o.currentSlide+(o.options.slidesToShow/2+1),r=s+o.options.slidesToShow+2):(s=Math.max(0,o.currentSlide-(o.options.slidesToShow/2+1)),r=2+(o.options.slidesToShow/2+1)+o.currentSlide):(s=o.options.infinite?o.options.slidesToShow+o.currentSlide:o.currentSlide,r=s+o.options.slidesToShow,o.options.fade===!0&&(s>0&&s--,r<=o.slideCount&&r++)),i=o.$slider.find(".slick-slide").slice(s,r),n(i),o.slideCount<=o.options.slidesToShow?(a=o.$slider.find(".slick-slide"),n(a)):o.currentSlide>=o.slideCount-o.options.slidesToShow?(a=o.$slider.find(".slick-cloned").slice(0,o.options.slidesToShow),n(a)):0===o.currentSlide&&(a=o.$slider.find(".slick-cloned").slice(-1*o.options.slidesToShow),n(a)))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){var e=this;e.changeSlide({data:{message:"next"}})},t.prototype.orientationChange=function(){var e=this;e.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.paused=!1,e.autoPlay()},t.prototype.postSlide=function(e){
var t=this;t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.setPosition(),t.swipeLeft=null,t.options.autoplay===!0&&t.paused===!1&&t.autoPlay(),t.options.accessibility===!0},t.prototype.prev=t.prototype.slickPrev=function(){var e=this;e.changeSlide({data:{message:"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(){var t,n,i=this;t=e("img[data-lazy]",i.$slider).length,t>0&&(n=e("img[data-lazy]",i.$slider).first(),n.attr("src",n.attr("data-lazy")).removeClass("slick-loading").load(function(){n.removeAttr("data-lazy"),i.progressiveLazyLoad(),i.options.adaptiveHeight===!0&&i.setPosition()}).error(function(){n.removeAttr("data-lazy"),i.progressiveLazyLoad()}))},t.prototype.refresh=function(t){var n=this,i=n.currentSlide;n.destroy(!0),e.extend(n,n.initials,{currentSlide:i}),n.init(),t||n.changeSlide({data:{message:"index",index:i}},!1)},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses(0),t.setPosition(),t.$slider.trigger("reInit",[t]),t.options.autoplay===!0&&t.focusHandler()},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.unslicked||t.setPosition()},50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,n){var i=this;return"boolean"==typeof e?(t=e,e=t===!0?0:i.slideCount-1):e=t===!0?--e:e,i.slideCount<1||0>e||e>i.slideCount-1?!1:(i.unload(),n===!0?i.$slideTrack.children().remove():i.$slideTrack.children(this.options.slide).eq(e).remove(),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,void i.reinit())},t.prototype.setCSS=function(e){var t,n,i=this,a={};i.options.rtl===!0&&(e=-e),t="left"==i.positionProp?Math.ceil(e)+"px":"0px",n="top"==i.positionProp?Math.ceil(e)+"px":"0px",a[i.positionProp]=e,i.transformsEnabled===!1?i.$slideTrack.css(a):(a={},i.cssTransitions===!1?(a[i.animType]="translate("+t+", "+n+")",i.$slideTrack.css(a)):(a[i.animType]="translate3d("+t+", "+n+", 0px)",i.$slideTrack.css(a)))},t.prototype.setDimensions=function(){var e=this;e.options.vertical===!1?e.options.centerMode===!0&&e.$list.css({padding:"0 "+e.options.centerPadding+" 0"}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.options.vertical===!1&&e.options.variableWidth===!1?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):e.options.variableWidth===!0?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();e.options.variableWidth===!1&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var t,n=this;n.$slides.each(function(i,a){t=n.slideWidth*i*-1,n.options.rtl===!0?e(a).css({position:"relative",right:t,top:0,zIndex:n.options.zIndex-2,opacity:0}):e(a).css({position:"relative",left:t,top:0,zIndex:n.options.zIndex-2,opacity:0})}),n.$slides.eq(n.currentSlide).css({zIndex:n.options.zIndex-1,opacity:1})},t.prototype.setOption=t.prototype.slickSetOption=function(t,n,i){var a,s,r=this;if("responsive"===t&&"array"===e.type(n))for(s in n)if("array"!==e.type(r.options.responsive))r.options.responsive=[n[s]];else{for(a=r.options.responsive.length-1;a>=0;)r.options.responsive[a].breakpoint===n[s].breakpoint&&r.options.responsive.splice(a,1),a--;r.options.responsive.push(n[s])}else r.options[t]=n;i===!0&&(r.unload(),r.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.msTransition)&&e.options.useCSS===!0&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=null!==e.animType&&e.animType!==!1},t.prototype.setSlideClasses=function(e){var t,n,i,a,s=this;n=s.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),s.$slides.eq(e).addClass("slick-current"),s.options.centerMode===!0?(t=Math.floor(s.options.slidesToShow/2),s.options.infinite===!0&&(e>=t&&e<=s.slideCount-1-t?s.$slides.slice(e-t,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(i=s.options.slidesToShow+e,n.slice(i-t+1,i+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?n.eq(n.length-1-s.options.slidesToShow).addClass("slick-center"):e===s.slideCount-1&&n.eq(s.options.slidesToShow).addClass("slick-center")),s.$slides.eq(e).addClass("slick-center")):e>=0&&e<=s.slideCount-s.options.slidesToShow?s.$slides.slice(e,e+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):n.length<=s.options.slidesToShow?n.addClass("slick-active").attr("aria-hidden","false"):(a=s.slideCount%s.options.slidesToShow,i=s.options.infinite===!0?s.options.slidesToShow+e:e,s.options.slidesToShow==s.options.slidesToScroll&&s.slideCount-e<s.options.slidesToShow?n.slice(i-(s.options.slidesToShow-a),i+a).addClass("slick-active").attr("aria-hidden","false"):n.slice(i,i+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===s.options.lazyLoad&&s.lazyLoad()},t.prototype.setupInfinite=function(){var t,n,i,a=this;if(a.options.fade===!0&&(a.options.centerMode=!1),a.options.infinite===!0&&a.options.fade===!1&&(n=null,a.slideCount>a.options.slidesToShow)){for(i=a.options.centerMode===!0?a.options.slidesToShow+1:a.options.slidesToShow,t=a.slideCount;t>a.slideCount-i;t-=1)n=t-1,e(a.$slides[n]).clone(!0).attr("id","").attr("data-slick-index",n-a.slideCount).prependTo(a.$slideTrack).addClass("slick-cloned");for(t=0;i>t;t+=1)n=t,e(a.$slides[n]).clone(!0).attr("id","").attr("data-slick-index",n+a.slideCount).appendTo(a.$slideTrack).addClass("slick-cloned");a.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.setPaused=function(e){var t=this;t.options.autoplay===!0&&t.options.pauseOnHover===!0&&(t.paused=e,e?t.autoPlayClear():t.autoPlay())},t.prototype.selectHandler=function(t){var n=this,i=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide"),a=parseInt(i.attr("data-slick-index"));return a||(a=0),n.slideCount<=n.options.slidesToShow?(n.setSlideClasses(a),void n.asNavFor(a)):void n.slideHandler(a)},t.prototype.slideHandler=function(e,t,n){var i,a,s,r,o=null,l=this;return t=t||!1,l.animating===!0&&l.options.waitForAnimate===!0||l.options.fade===!0&&l.currentSlide===e||l.slideCount<=l.options.slidesToShow?void 0:(t===!1&&l.asNavFor(e),i=e,o=l.getLeft(i),r=l.getLeft(l.currentSlide),l.currentLeft=null===l.swipeLeft?r:l.swipeLeft,l.options.infinite===!1&&l.options.centerMode===!1&&(0>e||e>l.getDotCount()*l.options.slidesToScroll)?void(l.options.fade===!1&&(i=l.currentSlide,n!==!0?l.animateSlide(r,function(){l.postSlide(i)}):l.postSlide(i))):l.options.infinite===!1&&l.options.centerMode===!0&&(0>e||e>l.slideCount-l.options.slidesToScroll)?void(l.options.fade===!1&&(i=l.currentSlide,n!==!0?l.animateSlide(r,function(){l.postSlide(i)}):l.postSlide(i))):(l.options.autoplay===!0&&clearInterval(l.autoPlayTimer),a=0>i?l.slideCount%l.options.slidesToScroll!==0?l.slideCount-l.slideCount%l.options.slidesToScroll:l.slideCount+i:i>=l.slideCount?l.slideCount%l.options.slidesToScroll!==0?0:i-l.slideCount:i,l.animating=!0,l.$slider.trigger("beforeChange",[l,l.currentSlide,a]),s=l.currentSlide,l.currentSlide=a,l.setSlideClasses(l.currentSlide),l.updateDots(),l.updateArrows(),l.options.fade===!0?void(n!==!0?(l.fadeSlideOut(s),l.fadeSlide(a,function(){l.postSlide(a)})):l.postSlide(a)):void(n!==!0?l.animateSlide(o,function(){l.postSlide(a)}):l.postSlide(a))))},t.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},t.prototype.updateArrows=function(){var e,t=this;e=Math.floor(t.options.slidesToShow/2),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&t.options.centerMode===!1?(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-1&&t.options.centerMode===!0&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},t.prototype.visibility=function(){var e=this;document[e.hidden]?(e.paused=!0,e.autoPlayClear()):e.options.autoplay===!0&&(e.paused=!1,e.autoPlay())},t.prototype.focusHandler=function(){var t=this;t.$slider.on("focus.slick blur.slick","*",function(n){n.stopImmediatePropagation();var i=e(this);setTimeout(function(){t.isPlay&&(i.is(":focus")?(t.autoPlayClear(),t.paused=!0):(t.paused=!1,t.autoPlay()))},0)})},t.prototype.offsetTop=function(e){for(var t;void 0===e.offsetTop;)e=e.parentNode;for(t=e.offsetTop;e==e.offsetParent;)t+=e.offsetTop;return t},t.prototype.isVisible=function(t){var n,i,a,s=window.pageYOffset;return n=this.options.offset,a=s+e(window).height()-n,i=t[0]?t.offset().top||0:0,t.find(".experience-card")[0],this.visibleDiv=function(){return a>=i}(),a>=i},t.prototype.addEvent=function(e,t,n){return null!=e.addEventListener?e.addEventListener(t,n,!1):null!=e.attachEvent?e.attachEvent("on"+t,n):e[t]=n},e.fn.slick=function(){var e,n=this,i=arguments[0],a=Array.prototype.slice.call(arguments,1),s=n.length,r=0;for(r;s>r;r++)if("object"==typeof i||"undefined"==typeof i?n[r].slick=new t(n[r],i):e=n[r].slick[i].apply(n[r].slick,a),"undefined"!=typeof e)return e;return n}}),function(e){e.fn.showcaseTrailer=function(t){function n(t){switch(t){case"show":d||i();break;case"hide":d&&(a(),e(document).unbind("keyup",p))}}function i(){r.find(".__play").transition({scale:1.5,opacity:0},300),e("#quickbook-wrapper").transition({opacity:0},300),e(".secondary","#navbar").transition({opacity:0},300),e(".mv-synopsis-wrapper").transition({opacity:0},300),setTimeout(function(){u=e('<div id="youtube-container" class="wow fadeIn"><iframe width="100%" height="100%" src="" id="youtube-iframe" frameborder="0" allowfullscreen autoplay="true"></iframe></div></div>'),u.find("iframe").attr({src:"https://www.youtube.com/embed/"+l+"?autoplay=1"}),"undefined"!=typeof pageName&&"synopsis"==pageName&&BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Viewed trailer",analyticsObj),"undefined"!=typeof pageName&&"synopsis"==pageName&&r.clone().appendTo(c.find(".body")),c.show(),e("body").append(c),e("#st-btn-close").one("click",function(){n("hide")}),setTimeout(function(){c.addClass("_dance")},100),setTimeout(function(){c.find(".body").append(u)},500),d=!0},200)}function a(){u.html(""),c.removeClass("_dance"),setTimeout(function(){c.hide(),setTimeout(function(){e("#quickbook-wrapper").transition({opacity:1}),e(".secondary","#navbar").transition({opacity:1}),e(".mv-synopsis-wrapper").transition({opacity:1}),r.find(".__play").transition({scale:1,opacity:.75}),r.find(".__play")[0].style="",c.find(".body").html(""),c.detach()},50)},500),d=!1}var s={autoplay:!0};if(e.extend(t,s),"undefined"!=typeof pageName&&"synopsis"==pageName)var r=e(".synopsis-banner");else var r=e(".banner-container, .overlay-card");var o,l=e(this).attr("data-trailer-code"),c=e('<div id="showcase-trailer-wrapper">').append('<div class="header">										<button id="st-btn-close">											<span class="icon-cancel">												<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">													<use xlink:href="/icons/common-icons.svg#icon-cancel"></use>												</svg>											</span>										</button>									</div>									<div class="body">									</div>'),d=!1,u="";"#trailer"==window.location.hash&&("undefined"!=typeof pageName&&"home"==pageName&&(l=e(".__play-video","#showcase-primary .overlay-card").data("trailer-code"),setTimeout(function(){e(".__dismiss","#showcase-primary .showcase-overlay").trigger("click")},300)),l&&n("show"));var p=function(e){27==e.keyCode&&n("hide"),e.stopPropagation()};r.find(".__play").click(function(){if("undefined"!=typeof pageName&&"synopsis"==pageName?l=r.data("trailer-code"):(l=e(this).data("trailer-code"),o=e(this).parents(".banner-container")),"undefined"!=typeof fnPushDLShowcase)try{""!=e(this).attr("data-dl-data")&&fnPushDLShowcase(JSON.parse(e(this).attr("data-dl-data")))}catch(t){}n("show"),e(document).bind("keyup",p)})},e(document).ready(function(){if("undefined"!=typeof pageName)switch(pageName){case"synopsis":e(".synopsis-banner").showcaseTrailer();break;default:e(".banner-container").showcaseTrailer()}})}(jQuery),function(e){var t={regionSearch:{regionName:[],regionCode:[],stringMatcher:function(n){return function(n,i){t.regionSearch.regionName=[],t.regionSearch.regionCode=[],substrRegex=new RegExp(n,"i");var a=new RegExp("\\b"+n.toUpperCase()+"\\w*\\b","gi"),s=["Mumbai","Mumbai : Western","Mumbai : South Central","Navi Mumbai","Kalyan","Ulhasnagar","Delhi","Faridabad","Ghaziabad","Gurgaon","Noida","National Capital Region (NCR)"],r=[];e.each(regionlst,function(t,i){e.each(i,function(t,i){a=new RegExp("\\b"+n.toUpperCase()+"\\w*\\b","gi"),a.test(i.name.toUpperCase())&&-1==e.inArray(i.name,s)&&r.push(new Array(i.code,i.name))})});for(var o=0;o<regionalias.length;o++){for(var l=!1,c=0;c<regionalias[o].Alias.length;c++)if(a.test(regionalias[o].Alias[c].toUpperCase())){l=!0;break}l&&r.push(new Array(regionalias[o].code,regionalias[o].name))}(a.test("BOMBAY")||a.test("MUMBAI")||a.test("MUMBAI WESTERN")||a.test("Mumbai South Central")||a.test("NAVI MUMBAI")||a.test("KALYAN")||a.test("ULHASNAGAR"))&&r.push(new Array("MUMBAI","Mumbai")),(a.test("NATIONAL CAPITAL REGION")||a.test("NCR")||a.test("DELHI")||a.test("FARIDABAD")||a.test("GHAZIABAD")||a.test("GURGAON")||a.test("NOIDA"))&&r.push(new Array("NCR","National Capital Region (NCR)"));for(var d=0;d<r.length;d++)-1==t.regionSearch.regionName.indexOf(r[d][1])&&(t.regionSearch.regionName.push(r[d][1]),t.regionSearch.regionCode.push(r[d][0]));i(t.regionSearch.regionName)}},onSelection:function(e,n){var i=n.trim(),a=t.regionSearch.regionName.indexOf(i);BMS.Region.fnSTopReg(t.regionSearch.regionCode[a],t.regionSearch.regionName[a])}}};e(document).ready(function(){e(".form-input.__input._default").typeaheadWrapper({dataSet:{source:t.regionSearch.stringMatcher(),limit:8},onResultSelection:t.regionSearch.onSelection}),e("#inp_RegionSearch.form-input._dos").typeaheadWrapper({dataSet:{source:t.regionSearch.stringMatcher(),limit:8},onResultSelection:t.regionSearch.onSelection})})}(jQuery),function(e){"namespace sumo";e.fn.SumoSelect=function(t){var n=e.extend({placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",floatWidth:400,forceCustomRendering:!1,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,triggerChangeCombined:!0,selectAll:!1,selectAlltext:"Select All"},t),a=this.each(function(){var t=this;!this.sumo&&e(this).is("select")&&(this.sumo={E:e(t),is_multi:e(t).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",is_floating:!1,is_opened:!1,mob:!1,Pstate:[],createElems:function(){var t=this,i='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-arrow-down"></use></svg>';return t.E.wrap('<div class="SumoSelect" tabindex="0">'),t.select=t.E.parent(),t.caption=e("<span></span>"),t.CaptionCont=e('<p class="CaptionCont"><label><i class="downChevron">'+i+"</i></label></p>").addClass("SlectBox").attr("style",t.E.attr("style")).prepend(t.caption),t.select.append(t.CaptionCont),t.E.attr("disabled")&&t.select.addClass("disabled").removeAttr("tabindex"),n.outputAsCSV&&t.is_multi&&t.E.attr("name")&&(t.select.append(e('<input class="HEMANT123" type="hidden" />').attr("name",t.E.attr("name")).val(t.getSelStr())),t.E.removeAttr("name")),t.isMobile()&&!n.forceCustomRendering?void t.setNativeMobile():(t.E.hide(),t.optDiv=e('<div class="optWrapper">'),t.floatingList(),ul=e('<ul class="options">'),t.optDiv.append(ul),n.selectAll&&t.selAll(),e(t.E.children("option")).each(function(n,i){i=e(i),t.createLi(i)}),t.is_multi&&t.multiSelelect(),t.select.append(t.optDiv),t.basicEvents(),void t.selAllState())},createLi:function(t,n){var i=this;return t.attr("value")||t.attr("value",t.val()),li=e('<li data-val="'+t.val()+'"><label>'+t.text()+"</label></li>"),i.is_multi&&li.prepend("<span><i></i></span>"),t[0].disabled&&(li=li.addClass("disabled")),i.onOptClick(li),t[0].selected&&li.addClass("selected"),t.attr("class")&&li.addClass(t.attr("class")),ul=i.optDiv.children("ul.options"),"undefined"==typeof n?ul.append(li):ul.children("li").eq(n).before(li),li},getSelStr:function(){return sopt=[],this.E.children("option:selected").each(function(){sopt.push(e(this).val())}),sopt.join(n.csvSepChar)},multiSelelect:function(){var t=this;t.optDiv.addClass("multiple"),t.okbtn=e('<p class="btnOk">OK</p>').click(function(){n.triggerChangeCombined&&(changed=!1,t.E.children("option:selected").length!=t.Pstate.length?changed=!0:t.E.children("option:selected").each(function(){t.Pstate.indexOf(e(this).val())<0&&(changed=!0)}),changed&&(t.E.trigger("change").trigger("click"),t.setText())),t.hideOpts()}),t.cancelBtn=e('<p class="btnCancel">Cancel</p>').click(function(){t._cnbtn(),t.hideOpts()}),t.optDiv.append(e('<div class="MultiControls">').append(t.okbtn).append(t.cancelBtn))},_cnbtn:function(){var e=this;for(e.E.children("option:selected").each(function(){this.selected=!1}),e.optDiv.find("li.selected").removeClass("selected"),i=0;i<e.Pstate.length;i++)e.E.children('option[value="'+e.Pstate[i]+'"]')[0].selected=!0,e.optDiv.find('li[data-val="'+e.Pstate[i]+'"]').addClass("selected");e.selAllState()},selAll:function(){var t=this;t.is_multi&&(t.chkAll=e("<i>"),t.selAll=e('<p class="select-all"><label>'+n.selectAlltext+"</label></p>").prepend(e("<span></span>").append(t.chkAll)),t.chkAll.on("click",function(){t.selAll.toggleClass("selected"),t.optDiv.find("ul.options li").each(function(n,i){i=e(i),t.selAll.hasClass("selected")?i.hasClass("selected")||i.trigger("click"):i.hasClass("selected")&&i.trigger("click")})}),t.optDiv.prepend(t.selAll))},selAllState:function(){var t=this;if(n.selectAll){var i=0,a=0;t.optDiv.find("ul.options li").each(function(t,n){e(n).hasClass("selected")&&i++,e(n).hasClass("disabled")||a++}),i==a?t.selAll.removeClass("partial").addClass("selected"):0==i?t.selAll.removeClass("selected partial"):t.selAll.addClass("partial")}},showOpts:function(){var t=this;t.E.attr("disabled")||(t.is_opened=!0,t.optDiv.addClass("open"),t.optDiv.closest(".SumoSelect").find(".CaptionCont").find("span").addClass("_active"),t.optDiv.closest(".SumoSelect").find(".CaptionCont").find(".downChevron").addClass("rotate"),e(document).on("click.sumo",function(e){if(!t.select.is(e.target)&&0===t.select.has(e.target).length){if(!t.is_opened)return;t.hideOpts(),t.is_multi&&n.okCancelInMulti&&t._cnbtn()}}),t.is_floating&&(H=t.optDiv.children("ul").outerHeight()+2,t.is_multi&&(H+=parseInt(t.optDiv.css("padding-bottom"))),t.optDiv.css("height",H)),t.is_multi&&(t.is_floating||n.okCancelInMulti)&&(t.Pstate=[],t.E.children("option:selected").each(function(){t.Pstate.push(e(this).val())})))},hideOpts:function(){var t=this;t.is_opened=!1,t.optDiv.removeClass("open").find("ul li.sel").removeClass("sel"),t.optDiv.closest(".SumoSelect").find(".CaptionCont").find("span").removeClass("_active"),t.optDiv.closest(".SumoSelect").find(".CaptionCont").find(".downChevron").removeClass("rotate"),e(document).off("click.sumo")},setOnOpen:function(){var e=this,t=e.optDiv.find("ul li").eq(e.E[0].selectedIndex);t.addClass("sel"),e.showOpts()},nav:function(e){var t,n=this,i=n.optDiv.find("ul li.sel");if(n.is_opened&&i.length){if(t=e?i.prevAll("li:not(.disabled)"):i.nextAll("li:not(.disabled)"),!t.length)return;i.removeClass("sel"),i=t.first().addClass("sel");var a=n.optDiv.find("ul"),s=a.scrollTop(),r=i.position().top+s;r>=s+a.height()-i.outerHeight()&&a.scrollTop(r-a.height()+i.outerHeight()),s>r&&a.scrollTop(r)}else n.setOnOpen()},basicEvents:function(){var t=this;t.CaptionCont.click(function(e){t.E.trigger("click"),t.is_opened?t.hideOpts():t.showOpts(),e.stopPropagation()}),t.select.on("keydown",function(e){switch(e.which){case 38:t.nav(!0);break;case 40:t.nav(!1);break;case 32:case 13:t.is_opened?t.optDiv.find("ul li.sel").trigger("click"):t.setOnOpen();break;case 9:case 27:return t.is_multi&&n.okCancelInMulti&&t._cnbtn(),void t.hideOpts();default:return}e.preventDefault()}),e(window).on("resize.sumo",function(){t.floatingList()})},onOptClick:function(t){var i=this;t.click(function(){var t=e(this);t.hasClass("disabled")||(txt="",i.is_multi?(t.toggleClass("selected"),i.E.children('option[value="'+t.data("val")+'"]')[0].selected=t.hasClass("selected"),i.selAllState()):(t.parent().find("li.selected").removeClass("selected"),t.toggleClass("selected"),i.E.val(t.attr("data-val"))),i.is_multi&&n.triggerChangeCombined&&(i.is_floating||n.okCancelInMulti)||(i.setText(),i.E.trigger("change").trigger("click")),i.is_multi||i.hideOpts())})},setText:function(){var t=this;if(t.placeholder="",t.is_multi){for(sels=t.E.children(":selected").not(":disabled"),i=0;i<sels.length;i++){if(i>=n.csvDispCount&&n.csvDispCount){t.placeholder=n.captionFormat.replace("{0}",sels.length);break}t.placeholder+=e(sels[i]).text()+", "}t.placeholder=t.placeholder.replace(/,([^,]*)$/,"$1")}else t.placeholder=t.E.children(":selected").not(":disabled").text();return is_placeholder=!1,t.placeholder||(is_placeholder=!0,t.placeholder=t.E.attr("placeholder"),t.placeholder||(t.placeholder=t.E.children("option:disabled:selected").text())),t.placeholder=t.placeholder?t.placeholder:n.placeholder,t.caption.text(t.placeholder),csvField=t.select.find("input.HEMANT123"),csvField.length&&csvField.val(t.getSelStr()),is_placeholder?t.caption.addClass("placeholder"):t.caption.removeClass("placeholder"),t.placeholder},isMobile:function(){for(var e=navigator.userAgent||navigator.vendor||window.opera,t=0;t<n.nativeOnDevice.length;t++)if(e.toString().toLowerCase().indexOf(n.nativeOnDevice[t].toLowerCase())>0)return n.nativeOnDevice[t];return!1},setNativeMobile:function(){var e=this;e.E.addClass("SelectClass"),e.mob=!0,e.E.change(function(){e.setText()})},floatingList:function(){var t=this;t.is_floating=e(window).width()<=n.floatWidth,t.optDiv.toggleClass("isFloating",t.is_floating),t.is_floating||t.optDiv.css("height",""),t.optDiv.toggleClass("okCancelInMulti",n.okCancelInMulti&&!t.is_floating)},vRange:function(e){var t=this;if(opts=t.E.children("option"),opts.length<=e||0>e)throw"index out of bounds";return t},toggSel:function(e,t){var n=this.vRange(t);n.E.children("option")[t].disabled||(n.E.children("option")[t].selected=e,n.mob||n.optDiv.find("ul.options li").eq(t).toggleClass("selected",e),n.setText())},toggDis:function(e,t){var n=this.vRange(t);n.E.children("option")[t].disabled=e,e&&(n.E.children("option")[t].selected=!1),n.mob||n.optDiv.find("ul.options li").eq(t).toggleClass("disabled",e).removeClass("selected"),n.setText()},toggSumo:function(e){var t=this;return t.enabled=e,t.select.toggleClass("disabled",e),e?(t.E.attr("disabled","disabled"),t.select.removeAttr("tabindex")):(t.E.removeAttr("disabled"),t.select.attr("tabindex","0")),t},toggSelAll:function(t){var i=this;i.E.find("option").each(function(n,a){i.E.find("option")[e(this).index()].disabled||(i.E.find("option")[e(this).index()].selected=t,i.mob||i.optDiv.find("ul.options li").eq(e(this).index()).toggleClass("selected",t),i.setText())}),!i.mob&&n.selectAll&&i.selAll.removeClass("partial").toggleClass("selected",t)},reload:function(){var t=this.unload();return e(t).SumoSelect(n)},unload:function(){var e=this;return e.select.before(e.E),e.E.show(),n.outputAsCSV&&e.is_multi&&e.select.find("input.HEMANT123").length&&e.E.attr("name",e.select.find("input.HEMANT123").attr("name")),e.select.remove(),delete t.sumo,t},add:function(n,i,a){if("undefined"==typeof n)throw"No value to add";var s=this;if(opts=s.E.children("option"),"number"==typeof i&&(a=i,i=n),"undefined"==typeof i&&(i=n),opt=e("<option></option>").val(n).html(i),opts.length<a)throw"index out of bounds";return"undefined"==typeof a||opts.length==a?(s.E.append(opt),s.mob||s.createLi(opt)):(opts.eq(a).before(opt),s.mob||s.createLi(opt,a)),t},remove:function(e){var t=this.vRange(e);t.E.children("option").eq(e).remove(),t.mob||t.optDiv.find("ul.options li").eq(e).remove(),t.setText()},selectItem:function(e){this.toggSel(!0,e)},unSelectItem:function(e){this.toggSel(!1,e)},selectAll:function(){this.toggSelAll(!0)},unSelectAll:function(){this.toggSelAll(!1)},disableItem:function(e){this.toggDis(!0,e)},enableItem:function(e){this.toggDis(!1,e)},enabled:!0,enable:function(){return this.toggSumo(!1)},disable:function(){return this.toggSumo(!0)},init:function(){var e=this;return e.createElems(),e.setText(),e}},t.sumo.init())});return 1==a.length?a[0]:a}}(jQuery),window.navigator.userAgent.indexOf("MSIE")>0)var use="svg";else var use="use";$(document).ready(function(){function e(e,t){for(var n=0;n<e.length;n++)for(var i=0,a=$(e[n]).find(".__genre").length>0?$(e[n]).find(".__genre"):$(e[n]).find(".__tag"),s=0;s<a.length;s++){var r=$(a[s]).text().length;if(i=r+i,i>t){var o=$(a[s]).text(),l=o.slice(0,3)+"...";$(a[s]).text(l)}}}function t(e,t,n){if(e.length>0)for(var i=0;i<e.length;i++){var a=$(e[i]).text().length;if(a>=n){var s=$(e[i]).text();s=s.substr(0,n),s=s.replace(/[.]*(\s?\w*)$/," ..."),$(e[i]).text(s),$(e[i]).text(s).addClass("resizedFont")}else n>a&&a>t&&$(e[i]).addClass("resizedFont")}}global.blnIsTouchScreen?ratingFuncMobile():ratingFuncDekstop(),$(".js-rating").click(function(){$(this).parents(".show-more-info").addClass("showRating")}),$(".poster-container").on("mouseleave",function(e){e.preventDefault(),e.stopPropagation(),$(this).find(".show-more-info").removeClass("showRating")}),$(".ns-card-multiple .book-button").click(function(){var e=$(this);e.children(".__container").removeClass("opaqueOnHover"),e.parents(".card-container").addClass("showExperience"),e.children().html("Pick A Format"),e.addClass("button-false")}),$(".hideExperienceOnClick").click(function(){var e=$(this),t=e.parents(".card-container");t.removeClass("showExperience"),t.find(".book-button").children(".__container").addClass("opaqueOnHover").html("BOOK NOW"),t.find(".book-button").removeClass("button-false")}),global.blnIsTouchScreen&&($(".movie-card .more-info-button, .poster-container").on("tap",function(e){e.stopPropagation(),$(this).parents(".movie-card").addClass("infoContainerIsActive")}),$(".movie-card .show-more-info-overlay").on("tap",function(e){e.stopPropagation(),$(this).parents(".movie-card").removeClass("infoContainerIsActive"),$(this).parents(".movie-card").find(".show-more-info-container .show-more-info").removeClass("showRating")}));var n=$(".movie-card").find(".genre-list"),i=$(".ev-card").find(".tags");e(n,24),e(i,30),$(".__day").click(function(e){e.preventDefault();var t=$(this),n=t.parents(".showtimes").find(".__details"),i=t.index();t.hasClass("_active")?t.siblings().addClass("_inactive").removeClass("_active"):(t.addClass("_active").removeClass("_inactive"),t.siblings().addClass("_inactive").removeClass("_active"),0==i?($(n[0]).addClass("_active").removeClass("_inactive"),$(n[1]).addClass("_inactive").removeClass("_active")):1==i&&($(n[1]).addClass("_active").removeClass("_inactive"),$(n[0]).addClass("_inactive").removeClass("_active")))});var a=$(".ev-card").find(".__name a");$(".ev-card").find(".__location");venueListName=$(".ve-card").find(".__name a"),venueListLocation=$(".ve-card").find(".__location"),movieListName=$(".movie-card").find(".__name a"),t(a,30,60),t(a,30,60),t(venueListName,30,60),t(venueListLocation,40,80),t(movieListName,30,40)}),function(e){"use strict";e.fn.socialSharer=function(t){var n={render:function(t,n,i){var a;if(a=i&&i.isTemplate?t:h[t],!e.isEmptyObject(a)){var s,r,o,l,c,d,u=a.split("\n").join(""),p=/([$\^\\\/()|?+*\[\]{}.\-])/g;return i=i||{},
d="{{}}",l=d.length,c=Math.ceil(l/2),r=d.substr(0,c).replace(p,"\\$1"),o=d.substr(c,l).replace(p,"\\$1")||r,s=new RegExp(r+"[^"+r+o+"]+"+o,"g"),u.replace(s,function(e){var t,i=e.slice(c,-c),a=i.split("."),s=0,r=a.length;if(i in n)t=n[i];else for(t=n;r>s;s++){if(!(a[s]in t))return e;t=t[a[s]]}return t})}},serialize:function(e,t){var n=[];for(var i in e)if(e.hasOwnProperty(i)){var a=t?t+"["+i+"]":i,s=e[i];n.push("object"==typeof s?serialize(s,a):encodeURIComponent(a)+"="+encodeURIComponent(s))}return n.join("&")},generateUrl:function(e,t){return e.replace(/{{url}}/g,encodeURIComponent(t.url)).replace(/{{title}}/g,encodeURIComponent(t.title)).replace(/{{description}}/g,encodeURIComponent(t.description)).replace(/{{media}}/g,encodeURIComponent(t.media)).replace(/{{via}}/g,encodeURIComponent(t.via))}},i={pinterest:{url:"http://pinterest.com/pin/create/button/?url={{url}}&media={{media}}&description={{description}}",linkTitle:"Pinterest"},facebook:{url:"https://www.facebook.com/sharer/sharer.php?s=100&p[title]={{title}}&p[summary]={{description}}&p[url]={{url}}&p[images][0]={{media}}",linkTitle:"Facebook"},twitter:{url:"https://twitter.com/share?url={{url}}&via={{via}}&text={{title}}",linkTitle:"Twitter"},googleplus:{url:"https://plus.google.com/share?url={{url}}",linkTitle:"Google +"},linkedin:{url:"https://www.linkedin.com/shareArticle?mini=true&url={{url}}&title={{title}}&summary={{description}}+&source={{via}}",linkTitle:"Linked In"},facebookFeed:{url:"https://www.facebook.com/dialog/feed?app_id={{fbAppId}}&link={{url}}&caption={{title}}&description={{description}}&picture={{media}}",linkTitle:"Facebook"}},a={facebook:"facebook",twitter:"twitter",googleplus:"googleplus",linkedin:"linkedin",pinterest:"pinterest",facebookFeed:"facebookFeed"},s=e(document).find("title").text();t=t||{};var r,o,l,c,d={og:{url:e('meta[property="og:url"]'),description:e('meta[property="og:description"]'),media:e('meta[property="og:image"]'),siteName:e('meta[property="og:site_name"]')}};d.og.url.length&&(r=d.og.url.attr("content")),d.og.description.length&&(o=d.og.description.attr("content")),d.og.media.length&&(l=d.og.media.attr("content")),d.og.siteName.length&&(c=d.og.siteName.attr("content"));var u,p=e.extend({url:r||location.href,description:o||s,media:l||"",title:s,via:c||"BookMyShow",showCount:!0,showLinkTitle:!0},t.config);u=t.buttons&&t.buttons.length?t.buttons:[a.pinterest,a.facebook,a.twitter,a.googleplus,a.linkedin];var f={},h={};h[a.pinterest]='<svg class="social-sharer-svg svg-pinterest" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" class="svg-pinterest"><use xlink:href="/icons/common-icons.svg#icon-pinterest-icon"></use></svg>',h[a.facebook]='<svg class="social-sharer-svg svg-facebook" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" class="svg-facebook"><use xlink:href="/icons/common-icons.svg#icon-facebook-modal"></use></svg>',h[a.twitter]='<svg class="social-sharer-svg svg-twitter" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" class="svg-facebook"><use xlink:href="/icons/common-icons.svg#icon-twitter-icon"></use></svg>',h[a.googleplus]='<svg class="social-sharer-svg svg-google-plus" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" class="svg-facebook"><use xlink:href="/icons/common-icons.svg#icon-googleplus-modal"></use></svg>',h[a.linkedin]='<svg class="social-sharer-svg svg-google-plus" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" class="svg-facebook"><use xlink:href="/icons/common-icons.svg#icon-linkedin"></use></svg>',h[a.facebookFeed]=h[a.facebook];var g=e("<a>").attr("data-type","{{type}}").attr("data-url","{{url}}").attr("href","#").attr("title","{{title}}").addClass("share-item {{type}}");h.shareLink=g.wrap("<div>").parent().html();var v=e(this),m=function(){var a=e("<div>").addClass("social-share-container");u.forEach(function(s){var r=n.generateUrl(i[s].url,p),o={type:s,url:r};o.title=p.showLinkTitle===!0?i[s].linkTitle:"";var l,c=n.render("shareLink",o),d=e(c);l=t.renderer&&t.renderer[s]&&"function"==typeof t.renderer[s].label?t.renderer[s].label.call(this):h[o.type];var u=e("<span>").addClass("__label").html(l);if(d.append(u),p.showCount&&f[s]&&f[s]>0){var g=e("<span>").addClass("__count").text(_count[s]);d.append(g)}a.append(d)});var s=function(t){return BMS.Misc.fnPopup({url:e(this).data("url")}),!1};e("a",a).click(s),v.html(a)};if(p.showCount===!0){var y=function(e){f[a.facebook]=e.FBcnt,f[a.twitter]=e.TWtcnt,f[a.googleplus]=e.gpcnt,f[a.linkedin]=e.Lincnt,m()},S=function(){p.showCount=!1,m()};e.ajax({url:"/serv/getData",dataType:"json",type:"GET",data:{saurl:t.url,cmd:"SHARE"},success:y,error:S})}else m();return v}}(jQuery),function(e){e.extend(e,{placeholder:{browser_supported:function(){return void 0!==this._supported?this._supported:this._supported=!!("placeholder"in e('<input type="text">')[0])},shim:function(t){var n={color:"#888",cls:"placeholder",selector:"input[placeholder], textarea[placeholder]"};return e.extend(n,t),!this.browser_supported()&&e(n.selector)._placeholder_shim(n)}}}),e.extend(e.fn,{_placeholder_shim:function(t){function n(t){var n=e(t).offsetParent().offset(),i=e(t).offset();return{top:i.top-n.top,left:i.left-n.left,width:e(t).width()}}function i(t){var a=t.data("target");"undefined"!=typeof a&&(t.css(n(a)),e(window).one("resize",function(){i(t)}))}return this.each(function(){var a=e(this);if(a.is(":visible")){if(a.data("placeholder")){var s=a.data("placeholder");return s.css(n(a)),!0}var r={};a.is("textarea")||"auto"==a.css("height")||(r={lineHeight:a.css("height"),whiteSpace:"nowrap"});var o="border-box"===a.css("box-sizing"),l=a.is("textarea"),c=e("<label />").text(a.attr("placeholder")).addClass(t.cls).css(e.extend({position:"absolute",display:"inline","float":"none",overflow:"hidden",textAlign:"left",color:t.color,cursor:"text",paddingTop:!l&&o?"0":a.css("padding-top"),paddingRight:a.css("padding-right"),paddingBottom:!l&&o?"0":a.css("padding-bottom"),paddingLeft:a.css("padding-left"),fontSize:a.css("font-size"),fontFamily:a.css("font-family"),fontStyle:a.css("font-style"),fontWeight:a.css("font-weight"),textTransform:a.css("text-transform"),backgroundColor:"transparent",zIndex:99},r)).css(n(this)).attr("for",this.id).data("target",a).click(function(){e(this).data("target").is(":disabled")||e(this).data("target").focus()}).insertBefore(this);a.data("placeholder",c).on("keydown",function(){c.hide()}).on("blur change",function(){c[a.val().length?"hide":"show"]()}).triggerHandler("blur"),e(window).one("resize",function(){i(c)})}})}})}(jQuery),jQuery(document).add(window).bind("ready load",function(){jQuery.placeholder&&jQuery.placeholder.shim()}),!function(e){function t(){var e=o();e!==l&&(l=e,u.trigger("orientationchange"))}function n(t,n,i,a){var s=i.type;i.type=n,e.event.dispatch.call(t,i,a),i.type=s}e.attrFn=e.attrFn||{};var i=navigator.userAgent.toLowerCase(),a=i.indexOf("chrome")>-1&&(i.indexOf("windows")>-1||i.indexOf("macintosh")>-1||i.indexOf("linux")>-1)&&i.indexOf("mobile")<0&&i.indexOf("android")<0,s={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,touch_capable:"ontouchstart"in window&&!a,orientation_support:"orientation"in window&&"onorientationchange"in window,startevent:"ontouchstart"in window&&!a?"touchstart":"mousedown",endevent:"ontouchstart"in window&&!a?"touchend":"mouseup",moveevent:"ontouchstart"in window&&!a?"touchmove":"mousemove",tapevent:"ontouchstart"in window&&!a?"tap":"click",scrollevent:"ontouchstart"in window&&!a?"touchmove":"scroll",hold_timer:null,tap_timer:null};e.isTouchCapable=function(){return s.touch_capable},e.getStartEvent=function(){return s.startevent},e.getEndEvent=function(){return s.endevent},e.getMoveEvent=function(){return s.moveevent},e.getTapEvent=function(){return s.tapevent},e.getScrollEvent=function(){return s.scrollevent},e.each(["tapstart","tapend","tapmove","tap","tap2","tap3","tap4","singletap","doubletap","taphold","swipe","swipeup","swiperight","swipedown","swipeleft","swipeend","scrollstart","scrollend","orientationchange"],function(t,n){e.fn[n]=function(e){return e?this.on(n,e):this.trigger(n)},e.attrFn[n]=!0}),e.event.special.tapstart={setup:function(){var t=this,i=e(t);i.on(s.startevent,function(e){if(i.data("callee",arguments.callee),e.which&&1!==e.which)return!1;var a=e.originalEvent,r={position:{x:s.touch_capable?a.touches[0].screenX:e.screenX,y:s.touch_capable?a.touches[0].screenY:e.screenY},offset:{x:s.touch_capable?a.touches[0].pageX-a.touches[0].target.offsetLeft:e.offsetX,y:s.touch_capable?a.touches[0].pageY-a.touches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target};return n(t,"tapstart",e,r),!0})},remove:function(){e(this).off(s.startevent,e(this).data.callee)}},e.event.special.tapmove={setup:function(){var t=this,i=e(t);i.on(s.moveevent,function(e){i.data("callee",arguments.callee);var a=e.originalEvent,r={position:{x:s.touch_capable?a.touches[0].screenX:e.screenX,y:s.touch_capable?a.touches[0].screenY:e.screenY},offset:{x:s.touch_capable?a.touches[0].pageX-a.touches[0].target.offsetLeft:e.offsetX,y:s.touch_capable?a.touches[0].pageY-a.touches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target};return n(t,"tapmove",e,r),!0})},remove:function(){e(this).off(s.moveevent,e(this).data.callee)}},e.event.special.tapend={setup:function(){var t=this,i=e(t);i.on(s.endevent,function(e){i.data("callee",arguments.callee);var a=e.originalEvent,r={position:{x:s.touch_capable?a.changedTouches[0].screenX:e.screenX,y:s.touch_capable?a.changedTouches[0].screenY:e.screenY},offset:{x:s.touch_capable?a.changedTouches[0].pageX-a.changedTouches[0].target.offsetLeft:e.offsetX,y:s.touch_capable?a.changedTouches[0].pageY-a.changedTouches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target};return n(t,"tapend",e,r),!0})},remove:function(){e(this).off(s.endevent,e(this).data.callee)}},e.event.special.taphold={setup:function(){var t,i=this,a=e(i),r={x:0,y:0},o=0,l=0;a.on(s.startevent,function(e){if(e.which&&1!==e.which)return!1;a.data("tapheld",!1),t=e.target;var c=e.originalEvent,d=Date.now(),u={x:s.touch_capable?c.touches[0].screenX:e.screenX,y:s.touch_capable?c.touches[0].screenY:e.screenY},p={x:s.touch_capable?c.touches[0].pageX-c.touches[0].target.offsetLeft:e.offsetX,y:s.touch_capable?c.touches[0].pageY-c.touches[0].target.offsetTop:e.offsetY};return r.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,r.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,o=r.x,l=r.y,s.hold_timer=window.setTimeout(function(){var f=r.x-o,h=r.y-l;if(e.target==t&&(r.x==o&&r.y==l||f>=-s.tap_pixel_range&&f<=s.tap_pixel_range&&h>=-s.tap_pixel_range&&h<=s.tap_pixel_range)){a.data("tapheld",!0);var g=Date.now(),v={x:s.touch_capable?c.touches[0].screenX:e.screenX,y:s.touch_capable?c.touches[0].screenY:e.screenY},m={x:s.touch_capable?c.touches[0].pageX-c.touches[0].target.offsetLeft:e.offsetX,y:s.touch_capable?c.touches[0].pageY-c.touches[0].target.offsetTop:e.offsetY};duration=g-d;var y={startTime:d,endTime:g,startPosition:u,startOffset:p,endPosition:v,endOffset:m,duration:duration,target:e.target};a.data("callee1",arguments.callee),n(i,"taphold",e,y)}},s.taphold_threshold),!0}).on(s.endevent,function(){a.data("callee2",arguments.callee),a.data("tapheld",!1),window.clearTimeout(s.hold_timer)}).on(s.moveevent,function(e){a.data("callee3",arguments.callee),o=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,l=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY})},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.endevent,e(this).data.callee2).off(s.moveevent,e(this).data.callee3)}},e.event.special.doubletap={setup:function(){var t,i,a,r,o,l=this,c=e(l),d=!1;c.on(s.startevent,function(e){return e.which&&1!==e.which?!1:(c.data("doubletapped",!1),t=e.target,c.data("callee1",arguments.callee),r=e.originalEvent,a={position:{x:s.touch_capable?r.touches[0].screenX:e.screenX,y:s.touch_capable?r.touches[0].screenY:e.screenY},offset:{x:s.touch_capable?r.touches[0].pageX-r.touches[0].target.offsetLeft:e.offsetX,y:s.touch_capable?r.touches[0].pageY-r.touches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target},!0)}).on(s.endevent,function(e){var r=Date.now(),u=c.data("lastTouch")||r+1,p=r-u;if(window.clearTimeout(i),c.data("callee2",arguments.callee),p<s.doubletap_int&&e.target==t&&p>100){c.data("doubletapped",!0),window.clearTimeout(s.tap_timer);var f={position:{x:s.touch_capable?e.originalEvent.changedTouches[0].screenX:e.screenX,y:s.touch_capable?e.originalEvent.changedTouches[0].screenY:e.screenY},offset:{x:s.touch_capable?e.originalEvent.changedTouches[0].pageX-e.originalEvent.changedTouches[0].target.offsetLeft:e.offsetX,y:s.touch_capable?e.originalEvent.changedTouches[0].pageY-e.originalEvent.changedTouches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target},h={firstTap:a,secondTap:f,interval:f.time-a.time};d||n(l,"doubletap",e,h),d=!0,o=window.setTimeout(function(){d=!1},s.doubletap_int)}else c.data("lastTouch",r),i=window.setTimeout(function(){window.clearTimeout(i)},s.doubletap_int,[e]);c.data("lastTouch",r)})},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.endevent,e(this).data.callee2)}},e.event.special.singletap={setup:function(){var t=this,i=e(t),a=null,r=null,o={x:0,y:0};i.on(s.startevent,function(e){return e.which&&1!==e.which?!1:(r=Date.now(),a=e.target,i.data("callee1",arguments.callee),o.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,o.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,!0)}).on(s.endevent,function(e){i.data("callee2",arguments.callee),e.target==a&&(end_pos_x=e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageX:e.pageX,end_pos_y=e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageY:e.pageY,s.tap_timer=window.setTimeout(function(){if(!i.data("doubletapped")&&!i.data("tapheld")&&o.x==end_pos_x&&o.y==end_pos_y){var a=e.originalEvent,l={position:{x:s.touch_capable?a.changedTouches[0].screenX:e.screenX,y:s.touch_capable?a.changedTouches[0].screenY:e.screenY},offset:{x:s.touch_capable?a.changedTouches[0].pageX-a.changedTouches[0].target.offsetLeft:e.offsetX,y:s.touch_capable?a.changedTouches[0].pageY-a.changedTouches[0].target.offsetTop:e.offsetY},time:Date.now(),target:e.target};l.time-r<s.taphold_threshold&&n(t,"singletap",e,l)}},s.doubletap_int))})},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.endevent,e(this).data.callee2)}},e.event.special.tap={setup:function(){var t,i,a=this,r=e(a),o=!1,l=null,c={x:0,y:0};r.on(s.startevent,function(e){return r.data("callee1",arguments.callee),e.which&&1!==e.which?!1:(o=!0,c.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,c.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,t=Date.now(),l=e.target,i=e.originalEvent.targetTouches?e.originalEvent.targetTouches:[e],!0)}).on(s.endevent,function(e){r.data("callee2",arguments.callee);var d,u=e.originalEvent.targetTouches?e.originalEvent.changedTouches[0].pageX:e.pageX,p=e.originalEvent.targetTouches?e.originalEvent.changedTouches[0].pageY:e.pageY,f=c.x-u,h=c.y-p;if(l==e.target&&o&&Date.now()-t<s.taphold_threshold&&(c.x==u&&c.y==p||f>=-s.tap_pixel_range&&f<=s.tap_pixel_range&&h>=-s.tap_pixel_range&&h<=s.tap_pixel_range)){for(var g=e.originalEvent,v=[],m=0;m<i.length;m++){var y={position:{x:s.touch_capable?g.changedTouches[m].screenX:e.screenX,y:s.touch_capable?g.changedTouches[m].screenY:e.screenY},offset:{x:s.touch_capable?g.changedTouches[m].pageX-g.changedTouches[m].target.offsetLeft:e.offsetX,y:s.touch_capable?g.changedTouches[m].pageY-g.changedTouches[m].target.offsetTop:e.offsetY},time:Date.now(),target:e.target};v.push(y)}switch(i.length){case 1:d="tap";break;case 2:d="tap2";break;case 3:d="tap3";break;case 4:d="tap4"}n(a,d,e,v)}})},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.endevent,e(this).data.callee2)}},e.event.special.swipe={setup:function(){function t(t){o=e(t.currentTarget),o.data("callee1",arguments.callee),d.x=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,d.y=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY,u.x=d.x,u.y=d.y,l=!0;var n=t.originalEvent;a={position:{x:s.touch_capable?n.touches[0].screenX:t.screenX,y:s.touch_capable?n.touches[0].screenY:t.screenY},offset:{x:s.touch_capable?n.touches[0].pageX-n.touches[0].target.offsetLeft:t.offsetX,y:s.touch_capable?n.touches[0].pageY-n.touches[0].target.offsetTop:t.offsetY},time:Date.now(),target:t.target}}function n(t){o=e(t.currentTarget),o.data("callee2",arguments.callee),u.x=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,u.y=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY;var n,i=o.parent().data("xthreshold")?o.parent().data("xthreshold"):o.data("xthreshold"),r=o.parent().data("ythreshold")?o.parent().data("ythreshold"):o.data("ythreshold"),p="undefined"!=typeof i&&i!==!1&&parseInt(i)?parseInt(i):s.swipe_h_threshold,f="undefined"!=typeof r&&r!==!1&&parseInt(r)?parseInt(r):s.swipe_v_threshold;if(d.y>u.y&&d.y-u.y>f&&(n="swipeup"),d.x<u.x&&u.x-d.x>p&&(n="swiperight"),d.y<u.y&&u.y-d.y>f&&(n="swipedown"),d.x>u.x&&d.x-u.x>p&&(n="swipeleft"),void 0!=n&&l){d.x=0,d.y=0,u.x=0,u.y=0,l=!1;var h=t.originalEvent;endEvnt={position:{x:s.touch_capable?h.touches[0].screenX:t.screenX,y:s.touch_capable?h.touches[0].screenY:t.screenY},offset:{x:s.touch_capable?h.touches[0].pageX-h.touches[0].target.offsetLeft:t.offsetX,y:s.touch_capable?h.touches[0].pageY-h.touches[0].target.offsetTop:t.offsetY},time:Date.now(),target:t.target};var g=Math.abs(a.position.x-endEvnt.position.x),v=Math.abs(a.position.y-endEvnt.position.y),m={startEvnt:a,endEvnt:endEvnt,direction:n.replace("swipe",""),xAmount:g,yAmount:v,duration:endEvnt.time-a.time};c=!0,o.trigger("swipe",m).trigger(n,m)}}function i(t){o=e(t.currentTarget);var n="";if(o.data("callee3",arguments.callee),c){var i=o.data("xthreshold"),r=o.data("ythreshold"),d="undefined"!=typeof i&&i!==!1&&parseInt(i)?parseInt(i):s.swipe_h_threshold,u="undefined"!=typeof r&&r!==!1&&parseInt(r)?parseInt(r):s.swipe_v_threshold,p=t.originalEvent;endEvnt={position:{x:s.touch_capable?p.changedTouches[0].screenX:t.screenX,y:s.touch_capable?p.changedTouches[0].screenY:t.screenY},offset:{x:s.touch_capable?p.changedTouches[0].pageX-p.changedTouches[0].target.offsetLeft:t.offsetX,y:s.touch_capable?p.changedTouches[0].pageY-p.changedTouches[0].target.offsetTop:t.offsetY},time:Date.now(),target:t.target},a.position.y>endEvnt.position.y&&a.position.y-endEvnt.position.y>u&&(n="swipeup"),a.position.x<endEvnt.position.x&&endEvnt.position.x-a.position.x>d&&(n="swiperight"),a.position.y<endEvnt.position.y&&endEvnt.position.y-a.position.y>u&&(n="swipedown"),a.position.x>endEvnt.position.x&&a.position.x-endEvnt.position.x>d&&(n="swipeleft");var f=Math.abs(a.position.x-endEvnt.position.x),h=Math.abs(a.position.y-endEvnt.position.y),g={startEvnt:a,endEvnt:endEvnt,direction:n.replace("swipe",""),xAmount:f,yAmount:h,duration:endEvnt.time-a.time};o.trigger("swipeend",g)}l=!1,c=!1}var a,r=this,o=e(r),l=!1,c=!1,d={x:0,y:0},u={x:0,y:0};o.on(s.startevent,t),o.on(s.moveevent,n),o.on(s.endevent,i)},remove:function(){e(this).off(s.startevent,e(this).data.callee1).off(s.moveevent,e(this).data.callee2).off(s.endevent,e(this).data.callee3)}},e.event.special.scrollstart={setup:function(){function t(e,t){i=t,n(r,i?"scrollstart":"scrollend",e)}var i,a,r=this,o=e(r);o.on(s.scrollevent,function(e){o.data("callee",arguments.callee),i||t(e,!0),clearTimeout(a),a=setTimeout(function(){t(e,!1)},50)})},remove:function(){e(this).off(s.scrollevent,e(this).data.callee)}};var r,o,l,c,d,u=e(window),p={0:!0,180:!0};if(s.orientation_support){var f=window.innerWidth||u.width(),h=window.innerHeight||u.height(),g=50;c=f>h&&f-h>g,d=p[window.orientation],(c&&d||!c&&!d)&&(p={"-90":!0,90:!0})}e.event.special.orientationchange=r={setup:function(){return s.orientation_support?!1:(l=o(),u.on("throttledresize",t),!0)},teardown:function(){return s.orientation_support?!1:(u.off("throttledresize",t),!0)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=o(),t.apply(this,arguments)}}},e.event.special.orientationchange.orientation=o=function(){var e=!0,t=document.documentElement;return e=s.orientation_support?p[window.orientation]:t&&t.clientWidth/t.clientHeight<1.1,e?"portrait":"landscape"},e.event.special.throttledresize={setup:function(){e(this).on("resize",w)},teardown:function(){e(this).off("resize",w)}};var v,m,y,S=250,w=function(){m=Date.now(),y=m-b,y>=S?(b=m,e(this).trigger("throttledresize")):(v&&window.clearTimeout(v),v=window.setTimeout(t,S-y))},b=0;e.each({scrollend:"scrollstart",swipeup:"swipe",swiperight:"swipe",swipedown:"swipe",swipeleft:"swipe",swipeend:"swipe",tap2:"tap"},function(t,n){e.event.special[t]={setup:function(){e(this).on(n,e.noop)}}})}(jQuery),function(e){window.mt={},mt.templates={},mt.templates.card='<aside class="mt-card-wrapper wow fadeIn fixed-card" data-wow-offset="-50" data-index="{{index}}">		<div class="trailer-card">			<div class="card-container">				<div class="poster-container">					<img class="__poster" src="" data-src="{{posterURL}}" alt="{{title}}" data-error="{{fallbackURL}}">					<div class="__overlay"></div>					<div class="show-more-info">						<div class="trailer-player">							<span class="trailer-icon __icon" data-url="" data-eventcode="{{eventCode}}">								<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">									<use xlink:href="/icons/movies-icons.svg#icon-play"></use>								</svg>							</span>							<span class="now-playing">								<span class="__text">NOW PLAYING</span>							</span>						</div>					</div>					<div class="stats-wrapper">						<div class="stats">							<div class="popularity">								<div class="__likes {{noLikes}}">									<div class="__thumbs">										<svg class="thumb-like" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">											<use xlink:href="/icons/movies-icons.svg#icon-like"></use>										</svg>									</div>									<div class="__percentage">{{wtsPerc}} %</div>								</div>								<div class="__votes">									<div class="__count">{{totalVotes}}</div>								</div>							</div>						</div>					</div>					<div class="detail">						<div class="__title">							<a class="__movie-link" href="{{url}}" target="_blank" title="{{title}}">{{title}}</a>						</div>					</div>				</div>			</div>		</div>	</aside>',mt.templates.nscard='<aside class="mt-card-wrapper wow fadeIn fixed-card" data-wow-offset="-50" data-index="{{index}}">		<div class="trailer-card">			<div class="card-container">				<div class="poster-container">					<img class="__poster" src="" data-src="{{posterURL}}" alt="{{title}}" data-error="{{fallbackURL}}">					<div class="__overlay"></div>					<div class="show-more-info">						<div class="trailer-player">							<span class="trailer-icon __icon" data-url="" data-eventcode="{{eventCode}}">								<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">									<use xlink:href="/icons/movies-icons.svg#icon-play"></use>								</svg>							</span>							<span class="now-playing">								<span class="__text">NOW PLAYING</span>							</span>						</div>					</div>					<div class="stats-wrapper">						<div class="stats">							<div class="popularity">								<div class="__likes {{noLikes}}">									<div class="__thumbs">										<svg version="1.1" style="fill: #D6181F;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">											<use xlink:href="/icons/movies-icons.svg#icon-heart"></use>										</svg>									</div>									<div class="__percentage">{{wtsPerc}} %</div>								</div>								<div class="__votes">									<div class="__count">{{totalVotes}}</div>								</div>							</div>						</div>					</div>					<div class="detail">						<div class="__title">							<a class="__movie-link" href="{{url}}" target="_blank" title="{{title}}">{{title}}</a>						</div>					</div>				</div>			</div>		</div>	</aside>',mt.templates.trailerScreen='<div class="mt-single-trailer">					<div class="__bg"></div>					<div class="mt-single-video" id="player">						<!--<iframe width="100%" height="100%" src="" id="youtube-iframe" frameborder="0" allowfullscreen autoplay="true"></iframe>-->					</div>					<div class="mt-single-synopsis">						<div class="mt-synopsis-wrapper">							<div class="mt-synopsis-content">								<div class="movie-info">									<div class="movie-name">										<div id="eventTitle" class="__name" itemprop="name" title="The Grey">The Grey</div>									</div>									<div class="language-container">										<span class="__language-tag">ENGLISH</span>									</div>									<div class="genre-container">										<!--<span class="__genre-tag">DRAMA</span>										<span class="__genre-tag">THRILLER</span>-->									</div>								</div>								<div class="mt-stats">									<div class="thumbs-ups">										<span class="__icon">											<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">												<use xlink:href="/icons/movies-icons.svg#icon-like"></use>											</svg>										</span>										<span class="__text-container">											<span class="__percentage">&nbsp;</span>											<span class="__votes">&nbsp;</span>										</span>									</div>									<div class="release-date-container">										<div class="calendar-detail">											<span class="__icon">												<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">													<use xlink:href="/icons/movies-icons.svg#icon-date"></use>												</svg>											</span>											<span class="__date">												<span class="day-and-month">1 Sep</span>												<span class="year">2015</span>											</span>										</div>									</div>								</div>								<div class="summary-reviews">									<div id="mt-summary" class="tab-content">										<div class="synopsis">											<blockquote>												After their plane crashes in Alaska, six oil workers are led by a skilled huntsman to survival, but a pack of merciless wolves haunts their every step.											</blockquote>											<a href="#"><span class="__read-more">Read more</span></a>										</div>									</div>								</div>								<div class="wts-wrapper">									<div class="wts-true" id="wts-true" event-code="" event-type="MT" event-wts="1">										<div class="wts-container">											<span class="__icon">												<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">													<use xlink:href="/icons/movies-icons.svg#icon-like"></use>												</svg>											</span>											<span class="__text">WILL WATCH</span>											<span class="__text count"></span>										</div>									</div>									<div class="wts-undefined" id="wts-undefined" event-code="" event-type="MT" event-wts="-2">										<div class="wts-container">											<span class="__icon">												<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">						                            <use xlink:href="/icons/movies-icons.svg#icon-question"></use>						                        </svg>											</span>											<span class="__text">MAYBE</span>											<span class="__text un-count"></span>										</div>                    				</div>									<div class="wts-false" id="wts-false" event-code="" event-type="MT" event-wts="-1">										<div class="wts-container">											<span class="__icon">												<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">													<use xlink:href="/icons/movies-icons.svg#icon-dislike"></use>												</svg>											</span>											<span class="__text">WON\'T WATCH</span>											<span class="__text count"></span>										</div>									</div>								</div>								<div class="error-text">								</div>							</div>						</div>					</div>				</div>'}(jQuery),function(e){BMS.Misc.Trailers={};var t=window.mt.API,n=window.mt.NSAPI,i={},a={events:{},analyticsObj:{}},s={},r={},o={pill:{},modal:{},popular:{},fresh:{},genres:{},nowShowing:{},languages:{},trailerScreen:{},tabs:{}},l={popular:{},fresh:{},nowShowing:{},trailerScreen:{},languages:{}},c={modal:{show:{},hide:{}},toggle:{tabs:{},langs:{}},launchTrailer:{},stop:{},load:{}};i={sanitize:{date:function(e){return new Date(e.substr(0,4)+" "+e.substr(4,2)+" "+e.substr(6,2)+" "+e.substr(8,2)+":"+e.substr(10,2))},time:function(e){var t=e.getHours(),n=e.getMinutes(),i=!1;return t>12?(t-=12,i=!0):12==t?i=!0:0==t&&(t=12),10>n&&(n="0"+n),i=i?"pm":"am",t+":"+n+" "+i},"boolean":function(e){return"string"==typeof e?"Y"==e?e=!0:"N"==e?e=!1:e:(("object"==typeof e||"array"==typeof e)&&_.each(e,function(t,n){e[n]=i.sanitize["boolean"](t)}),e)}},venueName:function(e){return e.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/\s/g,"-").toLowerCase()+"/cinema"},render:function(e,t,n){e=e.split("\n").join("");var i,a,s,r,o,l,c=/([$\^\\\/()|?+*\[\]{}.\-])/g;return n=n||{},l="{{}}",r=l.length,o=Math.ceil(r/2),a=l.substr(0,o).replace(c,"\\$1"),s=l.substr(o,r).replace(c,"\\$1")||a,i=new RegExp(a+"[^"+a+s+"]+"+s,"g"),e.replace(i,function(e){var n,i=e.slice(o,-o),a=i.split("."),s=0,r=a.length;if(i in t)n=t[i];else for(n=t;r>s;s++){if(!(a[s]in n))return e;n=n[a[s]]}return n})},difference:function(e){for(var t=[],n=e.length-1,i=0;i<e.length-1;i++)if(i!=n)return parseInt(e[i])>parseInt(e[i+1])?t.push(parseInt(e[i])-parseInt(e[i+1])):t.push(parseInt(e[i+1])-parseInt(e[i]))},getLatLongDistance:function(e,t){var n=e.lat,i=t.lat,a=e.lng,s=t.lng,r=function(e){return e*(Math.PI/180)},o=6371,l=r(i-n),c=r(s-a),d=Math.sin(l/2)*Math.sin(l/2)+Math.cos(r(n))*Math.cos(r(i))*Math.sin(c/2)*Math.sin(c/2),u=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),p=o*u;return p.toFixed(2)},between:function(e,t){var n=Math.min.apply(Math,[e,t]),i=Math.max.apply(Math,[e,t]);return this>n&&i>this},getCatAvailability:function(e){e=parseInt(e),0>e&&(e=0);for(var t=0;t<availSeatRange.length;t++){var n=function(){var n=availSeatRange[t].range.split("-");return e>=parseInt(n[0])&&e<=parseInt(n[1])?!0:!1;
}();if(n)return availSeatRange[t]}},fnExtractVideoCode:function(e){var t="",n=[],t=/[\\?&]v=([^&#]*)/;return n=_.compact(e.split(t))[1]},calculateNumberOfCardsInRow:function(e,t){var n=Math.round(t.width()/e.width());return void 0,n}},e.extend(BMS.Misc.Trailers,{helpers:i,models:a,presenters:r,views:s,render:l,events:c,dom:o}),a.languages={},a.genres={},a.events.popular=function(){var e={};return _.each(t,function(t,n){e[t.EventCode]={id:t.EventCode,title:t.EventName,language:[t.EventLanguage,"All Languages"],url:"/movies/"+t.EventURL+"/"+t.EventCode,trailerURL:t.TrailerURL,trailerUploadDate:t.trailerUploadDate,posterURL:function(){return mt.cdnURL+"/events/moviecard/"+t.EventCode+".jpg"}(),fallbackURL:"",synopsis:t.EventSyno,wtsCount:t.wtsCount,dwtsCount:t.dwtsCount,wtsPerc:t.wtsPerc,visible:!0,enabled:!0,active:!1},a.languages[t.EventLanguage]=!0}),e},a.events.fresh=function(){var e={};return _.each(t,function(t,n){e[t.EventCode]={id:t.EventCode,title:t.EventName,language:[t.EventLanguage,"All Languages"],url:"/movies/"+t.EventURL+"/"+t.EventCode,trailerURL:t.TrailerURL,trailerUploadDate:t.trailerUploadDate,posterURL:function(){return mt.cdnURL+"/events/moviecard/"+t.EventCode+".jpg"}(),fallbackURL:"",synopsis:t.EventSyno,wtsCount:t.wtsCount,dwtsCount:t.dwtsCount,wtsPerc:t.wtsPerc,visible:!0,enabled:!0,active:!1},a.languages[t.EventLanguage]=!0}),e},a.events.nowShowing=function(){var e={};_.each(n,function(t,n){e[t.EventCode]={id:t.EventCode,title:t.EventName,language:[t.EventLanguage,"All Languages"],url:"/movies/"+t.EventURL+"/"+t.EventCode,trailerURL:t.TrailerURL,trailerUploadDate:t.trailerUploadDate,posterURL:function(){return mt.cdnURL+"/events/moviecard/"+t.EventCode+".jpg"}(),fallbackURL:"",synopsis:t.EventSyno,wtsCount:t.wtsCount,dwtsCount:t.dwtsCount,wtsPerc:t.wtsPerc,visible:!0,enabled:!0,active:!1},a.languages[t.EventLanguage]=!0})},a.active={language:[],genre:[],pills:[],tab:"comingSoon",comingsoon:"popular",isPlaying:!1,nextSibling:null},r.languages=function(){var e=_.uniq(_.union(BMS.Misc.Trailers.models.nsLanguageSequence,BMS.Misc.Trailers.models.cslanguageSequence));return e},r.genre=function(){var e=_.map(a.genres,function(e,t){return t});return e=_.sortBy(e,function(e,t){return e}),e=_.uniq(e)},r.popular=function(){return void 0,_.sortBy(a.events.cs,function(e){return-e.wtsCount})},r.nowShowing=function(){return void 0,a.events.ns},r.fresh=function(){return void 0,_.sortBy(a.events.cs,function(e){return-e.trailerUploadDate})},r.toggleLanguage=function(e){var t=[];return"comingSoon"==a.active.tab?_.each(s[a.active.comingsoon],function(e){e.visible=!1}):_.each(s[a.active.tab],function(e){e.visible=!1}),void 0,_.each(e,function(e,n){void 0,void 0,_.each(a.active.language,function(n){e.languageFilter.indexOf(n)>-1&&(void 0,e.visible=!0,t.push(e))})}),t},r.showtrailerScreen=function(){var t=e(this);void 0;var n=parseInt(e(window).width()/t.width()),i=t.siblings(":visible").addBack().index(t)+1,s=global.strContentUrl+"/events/showcasesynopsis/"+t.find(".trailer-icon").attr("data-eventcode")+".jpg";for(o.trailerScreen.find(".__bg").css({"background-image":"url("+s+")"}),i%n==0&&i--;i%n!=0;)i--;0>i&&(i=0);var r=t.siblings(":visible").addBack().eq(i);r.before(o.trailerScreen);var l=e(window).height()-(t.find(".trailer-card").height()+e(".modal-header","#mt-wrapper").height()+80);400>l&&(l=420),o.trailerScreen.height(l),r.parents(".fixed-wrapper").scrollTop(r.parents(".fixed-wrapper").scrollTop()+o.trailerScreen.offset().top-(e(".modal-header","#mt-wrapper").height()+20)),a.active.isPlaying=!0},r.toggleGenre=function(e){void 0;var t=[];return"comingSoon"==a.active.tab?_.each(s[a.active.comingsoon],function(e){e.visible=!1}):_.each(s[a.active.tab],function(e){e.visible=!1}),_.each(e,function(e,n){void 0,void 0,_.each(a.active.genre,function(n){e.genreFilter.indexOf(n)>-1&&(void 0,e.visible=!0,t.push(e))})}),t},r.toggleFilters=function(){var e=[];e="comingSoon"==a.active.tab?s[a.active.comingsoon]:s[a.active.tab],void 0,0!=a.active.language.length&&(e=r.toggleLanguage(e)),0!=a.active.genre.length&&(e=r.toggleGenre(e)),0==a.active.genre.length&&0==a.active.language.length&&_.each(e,function(e){e.visible=!0}),a.active.card_models=e,"comingSoon"==a.active.tab?l[a.active.comingsoon](e):l[a.active.tab](e),wow.scrollHandler()},r.clearFilters=function(){e.each(o.languages.language,function(e,t){t.find("input").is(":checked")&&t.find("input").prop("checked",!1)}),e.each(o.genres.genre,function(e,t){t.find("input").is(":checked")&&t.find("input").prop("checked",!1)}),a.active.genre=[],a.active.language=[]},r.trailerIconClick=function(t){void 0;var n=e(this).parents(".mt-card-wrapper");l.trailerIconClick.call(n[0],t)},r.renderPills=function(){void 0,void 0,l.renderPills()},r.setUserInterest=function(e,t,n,i){try{BMS.Storage.isset({name:"ld"})?r.sendUserVote(e,t,n,i):(BMS.SignIn.fnSignIn(!0),void 0==global.SignInCallBack&&(global.SignInCallBack=[]),global.SignInCallBack.push(function(){r.sendUserVote(e,t,n,i)}))}catch(i){void 0}},r.sendUserVote=function(t,n,i,s){var o="/serv/getData.bms";BMS.Misc.fnAjax({url:o,dataType:"json",data:{cmd:"SETINTEREST",eid:t,intId:n,etype:i},success:function(t){if(r.updateUserInterest(t,s),t.data)BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Want to see",{ProductID:a.analyticsObj.ProductID,"Event Type":a.analyticsObj["Event Type"],"Event Name":a.analyticsObj["Event Name"],Language:a.analyticsObj.Language,Genre:a.analyticsObj.Genre,Choice:1==a.analyticsObj.Choice?"Yes":"No",Appcode:global.strAppCode});else{var n=t.error.text;e(".error-text").text(n).addClass("_occur");window.setTimeout(function(){e(".error-text").text(n).removeClass("_occur")},3e3)}},error:function(e,t,n){void 0}})},r.updateUserInterest=function(t,n){if(void 0,""!=t.data){var i=t.data.EventInterest.wtsCount,a=t.data.EventInterest.dwtsCount,s=t.data.EventInterest.totCount,r=t.data.EventInterest.maybeCount,o="#"+n.currentTarget.id+" .wts-container";e(o).addClass("_active"),e("#wts-true .__text.count").text("("+i+")"),e("#wts-false  .__text.count").text("("+a+")"),e("#wts-undefined .__text.un-count").text("("+r+")"),e(".like-rating .__votes").text(s+" votes")}else{var l=t.error.text;e(".error-text").text(l).addClass("_occur");window.setTimeout(function(){e(".error-text").text(l).removeClass("_occur")},3e3)}},r.togglePills=function(t){var n=e(t.currentTarget),i=n.attr("data-value");e('input[value="'+i+'"]').prop("checked",!1),a.active.language=_.without(a.active.language,i),a.active.genre=_.without(a.active.genre,i),a.active.pills=_.without(a.active.pills,i),r.toggleFilters(),n.remove()},r.clearPills=function(){o.pill.container&&(o.pill.container.html(""),a.active.pills=[])},r.resetView=function(){e(".trailer-card").removeClass("_active"),o.trailerScreen.find(".error-text").removeClass("_occur"),o.trailerScreen.find(".wts-container").removeClass("_active"),o.trailerScreen.detach()},r.clearContainers=function(){o.popular.container&&o.popular.container.html(""),o.fresh.container&&o.fresh.container.html(""),o.nowShowing.container&&o.nowShowing.container.html(""),o.popular={},o.fresh={},o.nowShowing={}},r.setSelectText=function(){o.tabs[a.active.tab].addClass("_active"),o.tabs[a.active.tab].siblings().removeClass("_active"),"popular"==a.active.comingsoon&&e(".__right-pf-filters .__text").html("Popular"),"fresh"==a.active.comingsoon&&e(".__right-pf-filters .__text").html("Fresh")},r.initializePlayer=function(){window.YT&&(o.player=new YT.Player("player",{height:"100%",width:"100%",events:{onReady:c.onPlayerReady,onStateChange:c.onPlayerStateChange}}))},l.popular=function(t){void 0,t||(t=s.popular=r.popular()),void 0,o.tabs.popular.siblings().removeClass("_active"),o.tabs.popular.addClass("_active"),void 0,o.popular.container?(o.popular.container.show(),o.popular.container.siblings().hide(),e.each(o.popular.cards,function(e,t){t.addClass("none")}),_.each(t,function(t,n){t.visible&&(void 0,e.each(o.popular.cards,function(n,i){e(i).find(".trailer-icon.__icon").attr("data-eventcode")==t.id&&i.removeClass("none")}))})):(void 0,o.popular.container=e('<div class="popular-wrapper">'),o.popular.container.show(),o.popular.cards=[],_.each(t,function(t,n){o.popular.cards.push(e(i.render(mt.templates.card,{title:t.title,url:t.url,eventCode:t.id,posterURL:t.posterURL,fallbackURL:t.fallbackURL,index:t.card_index,wts:t.wtsCount+" | "+t.dwtsCount+" | "+t.wtsPerc,totalVotes:t.wtsCount+t.dwtsCount?t.wtsCount+t.dwtsCount+" votes":" ",noLikes:t.wtsPerc?" ":"no-likes",wtsPerc:t.wtsPerc?t.wtsPerc:" "})))}),o.popular.container.append(o.popular.cards),e(".mt-overflow-wrapper").on("click",".show-more-info",c.click.trailerIconClick),wow.scrollHandler(),e(".mt-overflow-wrapper","#mt-wrapper").append(o.popular.container),o.popular.container.siblings().hide())},l.comingSoon=function(){void 0,l[a.active.comingsoon]()},l.nowShowing=function(t){void 0,t||(t=s.nowShowing=r.nowShowing()),o.nowShowing.container?(o.nowShowing.container.show(),o.nowShowing.container.siblings().hide(),e.each(o.nowShowing.cards,function(e,t){t.addClass("none")}),_.each(t,function(t,n){t.visible&&(void 0,e.each(o.nowShowing.cards,function(n,i){e(i).find(".trailer-icon.__icon").attr("data-eventcode")==t.id&&i.removeClass("none")}))})):(void 0,o.nowShowing.container=e('<div class="nowshowing-wrapper">'),o.nowShowing.container.show(),o.nowShowing.cards=[],_.each(t,function(t,n){if(0!=t.avgRating)var a=t.avgRating,s=t.totalCount,r="nscard";else var a=t.wtsPerc,s=t.wtsCount+t.dwtsCount,r="card";o.nowShowing.cards.push(e(i.render(mt.templates[r],{title:t.title,url:t.url,eventCode:t.id,posterURL:t.posterURL,fallbackURL:t.fallbackURL,index:t.card_index,wts:t.wtsCount+" | "+t.dwtsCount+" | "+t.wtsPerc,totalVotes:s?s+" votes":" ",noLikes:0!=a?" ":"no-likes",wtsPerc:a?a:" "})))}),o.nowShowing.container.append(o.nowShowing.cards),e(".mt-overflow-wrapper").on("click",".show-more-info",c.click.trailerIconClick),wow.scrollHandler(),e(".mt-overflow-wrapper","#mt-wrapper").append(o.nowShowing.container),o.nowShowing.container.siblings().hide())},l.fresh=function(t){void 0,t||(t=s.fresh=r.fresh()),o.fresh.container?(o.fresh.container.show(),o.fresh.container.siblings().hide(),e.each(o.fresh.cards,function(e,t){t.addClass("none")}),_.each(t,function(t,n){t.visible&&(void 0,e.each(o.fresh.cards,function(n,i){e(i).find(".trailer-icon.__icon").attr("data-eventcode")==t.id&&i.removeClass("none")}))})):(o.fresh.container=e('<div class="fresh-wrapper">'),o.fresh.cards=[],o.fresh.container.show(),_.each(t,function(t,n){o.fresh.cards.push(e(i.render(mt.templates.card,{title:t.title,url:t.url,eventCode:t.id,posterURL:t.posterURL,fallbackURL:t.fallbackURL,index:n+1,wts:t.wtsCount+" | "+t.dwtsCount+" | "+t.wtsPerc,totalVotes:t.wtsCount+t.dwtsCount?t.wtsCount+t.dwtsCount+" votes":" ",noLikes:t.wtsPerc?" ":"no-likes",wtsPerc:t.wtsPerc?t.wtsPerc:" "})))}),o.fresh.container.append(o.fresh.cards),e(".mt-overflow-wrapper").on("click",".show-more-info",c.click.trailerIconClick),wow.scrollHandler(),e(".mt-overflow-wrapper","#mt-wrapper").append(o.fresh.container),o.fresh.container.siblings().hide())},l.languages=function(){s.languages||(s.languages=r.languages()),o.languages.select?o.languages.select.val(a.active.language):(o.languages.select=e('<ul class="mt-languages">'),o.languages.language=[],_.each(s.languages,function(t){o.languages.language.push(e('<li class="list"><input type="checkbox" id="'+t+'" value="'+t+'"><label for="'+t+'"><span class="__tick"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-tick"></use></svg></span>'+t+"</label></li>"))}),o.languages.select.append(o.languages.language),e(".__right-lang-filters").append(e('<div class="language-wrapper">').html(o.languages.select)),o.languages.select.find(".list input").on("click",c.click.toggleFilters))},l.genre=function(){s.genre||(s.genres=r.genre()),o.genres.select||(o.genres.select=e('<ul class="mt-genres">'),o.genres.genre=[],_.each(s.genres,function(t){o.genres.genre.push(e('<li class="list"><input type="checkbox" id="'+t+'" value="'+t+'"><label for="'+t+'"><span class="__tick"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-tick"></use></svg></span>'+t+"</label></li>"))}),o.genres.select.append(o.genres.genre),e(".__right-gen-filters").append(e('<div class="genre-wrapper">').html(o.genres.select)),o.genres.select.find(".list input").on("click",c.click.toggleFilters))},l.renderPills=function(){o.pill.container?(o.pill.pills=[],o.pill.pills.push('<span class="__applied-text">Applied Filters: </span>'),_.each(a.active.pills,function(t){o.pill.pills.push(e('<span class="__selc-pills" data-value="'+t+'">'+t+'<span class="__rm-filter"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-cancel"></use></svg></span></span>'))}),o.pill.container.html(o.pill.pills)):(o.pill.container=e('<div class="mt-pills">'),o.pill.pills=[],o.pill.pills.push('<span class="__applied-text">Applied Filters: </span>'),_.each(a.active.pills,function(t){o.pill.pills.push(e('<span class="__selc-pills" data-value="'+t+'">'+t+'<span class="__rm-filter"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><use xlink:href="/icons/common-icons.svg#icon-cancel"></use></svg></span></span>'))}),o.pill.container.html(o.pill.pills),e("#mt-wrapper .modal-header").append(e('<div class="__selected-filters">').html(o.pill.container))),e(".__selc-pills").on("click",c.click.togglePills)},l.trailerIconClick=function(t){if(r.resetView(),e(this).find(".trailer-card").addClass("_active"),"nowShowing"==a.active.tab)var n=a.events.ns[e(this).find(".trailer-icon").attr("data-eventcode")];else var n=a.events.cs[e(this).find(".trailer-icon").attr("data-eventcode")];void 0;var s=i.fnExtractVideoCode(n.trailerURL);void 0,o.trailerScreen.find("#youtube-iframe").attr("src","https://www.youtube.com/embed/"+s+"?autoplay=1"),o.trailerScreen.find("#eventTitle").attr("title",n.title).html(n.title),o.trailerScreen.find(".synopsis blockquote").html(n.synopsis),o.trailerScreen.find(".language-container .__language-tag").html(n.language[0]);var l=BMS.Misc.fnGVal({key:"text",data:BMS.Storage.get({name:"Rgn"})}).toLowerCase(),c=""!=l?"/"+l+n.url:"/"+n.url;o.trailerScreen.find(".synopsis .__read-more").parent().attr("href",c),"1"==n.isTentative?o.trailerScreen.find(".release-date-container .__date .day-and-month").html(n.releaseDate.split(",")[0].split(" ")[1]):o.trailerScreen.find(".release-date-container .__date .day-and-month").html(n.releaseDate.split(",")[0]),null!=n.wtsCount&&(void 0,o.trailerScreen.find("#wts-true .__text.count").html("("+n.wtsCount+")")),null!=n.dwtsCount&&o.trailerScreen.find("#wts-false .__text.count").html("("+n.dwtsCount+")"),null!=n.maybeCount&&o.trailerScreen.find("#wts-undefined .__text.un-count").html("("+n.maybeCount+")");for(var d=n.genre.split("|"),u="",p=0,f=d.length;f>p;p++)u+='<span class="__genre-tag">'+d[p].toUpperCase()+"</span>";o.trailerScreen.find(".thumbs-ups .__icon").hide(),0!=n.avgRating?(o.trailerScreen.find(".thumbs-ups .__percentage").html(n.avgRating+"%"),o.trailerScreen.find(".__votes").html(n.totalCount+" votes"),o.trailerScreen.find(".thumbs-ups .__icon").show()):0!=n.wtsPerc&&(o.trailerScreen.find(".thumbs-ups .__percentage").html(n.wtsPerc+"%"),o.trailerScreen.find(".__votes").html(n.csCount+" votes"),o.trailerScreen.find(".thumbs-ups .__icon").show()),o.trailerScreen.find(".genre-container").html(u),o.trailerScreen.find("#wts-true").attr("event-code",n.id),o.trailerScreen.find("#wts-false").attr("event-code",n.id),o.trailerScreen.find("#wts-undefined").attr("event-code",n.id),o.trailerScreen.find(".release-date-container .__date .year").html(n.releaseDate.split(",")[1]),r.showtrailerScreen.call(this),r.initializePlayer(),r.playVideo=function(e){e.target.loadVideoById(s,0,"default")},a.analyticsObj.ProductID=n.id,a.analyticsObj["Event Type"]="MT",a.analyticsObj["Event Name"]=n.title,a.analyticsObj.Language=n.language[0],a.analyticsObj.Genre=n.genre.split("|").join(","),a.analyticsObj.Appcode=global.strAppCode,BMS.Misc.fnPushEventDataToAnalytics(["WR","KM"],"Viewed trailer",{ProductID:n.id,"Event Type":"MT","Event Name":n.title,Language:n.dataLanguage,Genre:n.genre.split("|").join(","),"Percentage watched":"","Cast and Crew":"","Event Group":n.eventGroup,Page:"Movie Trailers Popup - "+("undefined"!=typeof pageName?pageName:""),Appcode:global.strAppCode})},l.selectBoxText=function(){0!=a.active.language.length?e(".__right-lang-filters .__text").html(a.active.language.join(",")):e(".__right-lang-filters .__text").html("All Languages"),0!=a.active.genre.length?e(".__right-gen-filters .__text").html(a.active.genre.join(",")):e(".__right-gen-filters .__text").html("All Genres")},l.resetCards=function(){o.popular.container&&o.popular.container.html(""),o.fresh.container&&o.fresh.container.html("")},c.click={},c.keypress={},c.click.toggleLanguage=function(){var t=e(this).val();r.toggleLanguage(t)},c.click.toggleGenre=function(){e(this).val()},c.click.toggleFilters=function(t){var n=e(t.currentTarget).parent().parent(),i=e(t.currentTarget);"mt-languages"==n.attr("class")?i.is(":checked")?(a.active.language.push(i.val()),a.active.pills.push(i.val())):(a.active.language=_.without(a.active.language,i.val()),a.active.pills=_.without(a.active.pills,i.val())):"mt-genres"==n.attr("class")&&(i.is(":checked")?(a.active.genre.push(i.val()),a.active.pills.push(i.val())):(a.active.genre=_.without(a.active.genre,i.val()),a.active.pills=_.without(a.active.pills,i.val()))),l.selectBoxText(),l.renderPills(),r.toggleFilters()},c.click.togglePills=function(e){r.togglePills(e),l.selectBoxText()},c.click.popularTab=function(t){a.active.tab="popular",a.active.comingsoon=a.active.tab,r.setSelectText(),e(".__selected-filters,.__right-lang-filters,.__right-gen-filters,.__right-pf-filters").show(),l.popular(),r.toggleFilters()},c.click.comingSoonTab=function(t){a.active.tab=a.active.comingsoon,o.tabs.comingSoon.siblings().removeClass("_active"),o.tabs.comingSoon.addClass("_active"),r.setSelectText(),e(".__selected-filters,.__right-lang-filters,.__right-gen-filters,.__right-pf-filters").show(),r.toggleFilters()},c.click.freshTab=function(t){a.active.tab="fresh",a.active.comingsoon=a.active.tab,r.setSelectText(),e(".__right-pf-filters .__text").html("Fresh"),l.fresh(),e(".__selected-filters,.__right-lang-filters,.__right-gen-filters,.__right-pf-filters").show(),r.toggleFilters()},c.click.nowShowingTab=function(t){a.active.tab="nowShowing",o.tabs.nowShowing.siblings().removeClass("_active"),o.tabs.nowShowing.addClass("_active"),e(".__right-pf-filters").hide(),l.nowShowing(),r.toggleFilters()},c.click.trailerIconClick=function(t){void 0,a.active.nextSibling=e(t.currentTarget).parents(".mt-card-wrapper").next(),r.trailerIconClick.call(this,t)},c.click.wtsClick=function(t){void 0;var n=e("#wts-true").attr("event-code"),i=parseInt(e("#wts-true").attr("event-wts")),s=e("#wts-true").attr("event-type");a.analyticsObj.Choice=1,r.setUserInterest(n,i,s,t)},c.click.dwtsClick=function(t){void 0;var n=e("#wts-false").attr("event-code"),i=parseInt(e("#wts-false").attr("event-wts")),s=e("#wts-false").attr("event-type");a.analyticsObj.Choice=-1,r.setUserInterest(n,i,s,t)},c.click.maybeClick=function(t){void 0;var n=e("#wts-undefined").attr("event-code"),i=parseInt(e("#wts-undefined").attr("event-wts")),a=e("#wts-undefined").attr("event-type");r.setUserInterest(n,i,a,t)},c.onPlayerReady=function(e){void 0,r.playVideo(e)},c.onPlayerStateChange=function(e){switch(void 0,e.data){case YT.PlayerState.UNSTARTED:void 0;break;case YT.PlayerState.ENDED:void 0,void 0,a.active.nextSibling.find(".show-more-info").trigger("click");break;case YT.PlayerState.PLAYING:void 0;break;case YT.PlayerState.PAUSED:void 0;break;case YT.PlayerState.BUFFERING:void 0;break;case YT.PlayerState.CUED:void 0}},c.load=function(t){this.modal.show(),BMS.Misc.fnAjax({dataType:"script",type:"GET",url:"/serv/getData",data:{cmd:"GETTRAILERS",mtype:"cs"},dataType:"json",success:function(t){a.events.cs=function(){var e={},n=0;return t[0]&&(a.cslanguageSequence=t[0]),_.each(t[1],function(t,i){void 0;var s=_.compact(t.EventGenre.split("|"));e[t.EventCode]={id:t.EventCode,title:t.EventName,language:[t.EventLanguage,"All Languages"],dataLanguage:t.EventLanguage,eventGroup:t.EventGroup,languageFilter:t.EventLanguage+"|All Languages",url:"/movies/"+t.EventURL+"/"+t.EventCode,trailerURL:t.TrailerURL,posterURL:function(){return strContentUrl+"/events/moviecard/"+t.EventCode+".jpg"}(),fallbackURL:strContentUrl+"/events/moviecard/noimage.jpg",genre:t.EventGenre,genreFilter:t.EventGenre+"|All Genres",releaseDate:t.ShowDate,eventIsDefault:t.EventIsDefault,isTentative:t.TentativeReleaseDate,trailerUploadDate:t.trailerUploadDate,synopsis:t.EventSyno,wtsCount:t.wtsCount,dwtsCount:t.dwtsCount,maybeCount:t.maybeCount,avgRating:t.avgRating,totalVotes:t.totalVotes,wtsPerc:t.wtsPerc,csCount:t.csCount,card_index:n,visible:!0,enabled:!0,active:!1},n+=1,a.languages[t.EventLanguage]=!0,_.each(s,function(e,t){a.genres[e.trim()]=!0})}),e}(),window.mt.API=a.events.cs,a.active.comingsoon="popular",a.active.tab="comingSoon",e(".__selected-filters,.__right-lang-filters,.__right-gen-filters,.__right-pf-filters").show(),r.setSelectText(),l.languages(),l.popular(),l.genre()},error:function(e){void 0}}),BMS.Misc.fnAjax({dataType:"script",type:"GET",url:"/serv/getData",data:{cmd:"GETTRAILERS",mtype:"ns"},dataType:"json",success:function(e){a.events.ns=function(){var t={},n=0;return e[0]&&(a.nsLanguageSequence=e[0]),_.each(e[1],function(e,i){void 0;var s=_.compact(e.EventGenre.split("|"));t[e.EventCode]={id:e.EventCode,title:e.EventName,language:[e.EventLanguage,"All Languages"],dataLanguage:e.EventLanguage,eventGroup:e.EventGroup,languageFilter:e.EventLanguage+"|All Languages",url:"/movies/"+e.EventURL+"/"+e.EventCode,trailerURL:e.TrailerURL,posterURL:function(){return strContentUrl+"/events/moviecard/"+e.EventCode+".jpg"}(),fallbackURL:strContentUrl+"/events/moviecard/noimage.jpg",genre:e.EventGenre,genreFilter:e.EventGenre+"|All Genres",releaseDate:e.ShowDate,eventIsDefault:e.EventIsDefault,isTentative:e.TentativeReleaseDate,trailerUploadDate:e.trailerUploadDate,synopsis:e.EventSyno,wtsCount:e.wtsCount,dwtsCount:e.dwtsCount,maybeCount:e.maybeCount,wtsPerc:e.wtsPerc,totalCount:e.totalVotes,userCount:e.userCount,criticCount:e.criticCount,avgRating:e.avgRating,csCount:e.csCount,card_index:n,visible:!0,enabled:!0,active:!1},n+=1,a.languages[e.EventLanguage]=!0,_.each(s,function(e,t){a.genres[e.trim()]=!0})}),t}(),window.mt.NSAPI=a.events.ns},error:function(e){void 0}})},c.modal.show=function(){void 0,o.modal.wrapper.removeClass("none"),o.modal.overlay.removeClass("none").addClass("puff"),handlePopups.freezeDocument(),e(".mt-modal-overlay").scroll(function(){wow.scrollHandler()})},c.modal.hide=function(){o.modal.overlay.removeClass("puff"),setTimeout(function(){o.modal.overlay.addClass("puff-reverse")},10),setTimeout(function(){o.modal.overlay.addClass("none").removeClass("puff-reverse")},300),handlePopups.releaseDocument(),e(".mt-modal-overlay").unbind("scroll",function(){wow.scrollHandler()})},e(document).ready(function(){function t(){void 0,c.load(),o.tabs[a.active.tab].addClass("_active")}function n(){void 0,c.modal.hide(),r.clearFilters(),r.clearPills(),l.selectBoxText(),e(".trailer-card","#mt-wrapper").removeClass("_active")}void 0,o.modal.wrapper=e("#mt-wrapper"),o.modal.overlay=e(".mt-modal-overlay","#mt-wrapper"),o.trailerScreen=e(mt.templates.trailerScreen),o.trailerScreen.videoContainer=e(".mt-single-video #youtube-iframe"),o.trailerScreen.find("#wts-true").on("click",c.click.wtsClick),o.trailerScreen.find("#wts-false").on("click",c.click.dwtsClick),o.trailerScreen.find("#wts-undefined").on("click",c.click.maybeClick),o.tabs.fresh=e(".__right-pf-filters .__fresh"),o.tabs.popular=e(".__right-pf-filters .__popular"),o.tabs.comingSoon=e(".mt-filters .__comingsoon"),o.tabs.nowShowing=e(".mt-filters .__nowshowing"),o.tabs.fresh.on("click",c.click.freshTab),o.tabs.popular.on("click",c.click.popularTab),o.tabs.nowShowing.on("click",c.click.nowShowingTab),o.tabs.comingSoon.on("click",c.click.comingSoonTab),e(".mt-trigger").click(function(){c.load(),BMS.Misc.Router.triggerRoute("trailers ",!1),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"Clicked Movie Trailers Link",page:"undefined"!=typeof pageName?pageName:"",section:"header"})}),global.SignOutCallBack.push(function(){void 0,o.trailerScreen.find(".wts-container").hasClass("_active")&&o.trailerScreen.find(".wts-container").removeClass("_active")}),BMS.Misc.Router.registerRoute("trailers","trailersPopup",t,n),e("#mt-btn-close").click(function(){a.active.isPlaying?(o.trailerScreen.detach(),a.active.isPlaying=!1,e(".trailer-card","#mt-wrapper").removeClass("_active")):(c.modal.hide(),r.clearFilters(),r.clearPills(),r.clearContainers(),BMS.Misc.Router.triggerRoute("",!1),o.tabs[a.active.tab].removeClass("_active"),l.selectBoxText(),e(".trailer-card","#mt-wrapper").removeClass("_active"),BMS.Misc.fnPushEventDataToAnalytics(["GA"],"",{},{event:"Clicked Close on Movie Trailers Link",page:"undefined"!=typeof pageName?pageName:"",section:"header"}))})})}(jQuery);