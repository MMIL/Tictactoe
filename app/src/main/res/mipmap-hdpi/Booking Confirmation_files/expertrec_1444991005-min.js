if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(!Object.keys){Object.keys=function(c){var b=[];for(var a in c){if(c.hasOwnProperty(a)){b.push(a)}}return b}}function ci_getSecureRandom(){return"xxxxxxxx-xxxx-4xxx-yxxx-te-xxxxxxxxxxxx".replace(/[xye]/g,function(e){var d=Math.random()*16|0;if(e=="e"){var b=(new Date).getTime();a=b}else{var a=e=="x"?d:(d&3|8)}return a.toString(16)})}(function(){var h=new Date(),c=730;h.setTime(h.getTime()+(c*24*60*60*1000));var a="expires="+h.toGMTString(),g=ci_getSecureRandom(),b=document.domain.split("."),f="";if(typeof ci_config!="undefined"&&ci_config.domain){f=ci_config.domain}else{for(var e=b.length-1;e>=b.length-2;e--){f=b.slice(e).join(".")}}if(!ci_getCiCookie("ci_id=")){document.cookie="ci_id="+g+"; "+a+"; path=/; domain=."+f}})();function ci_getCiCookie(f){var b=f,e="",a=document.cookie.split(";");for(var d=0;d<a.length;d++){e=a[d].trim();if(e.indexOf(b)==0){return e.substring(b.length,e.length)}}return""}function ci_getCurrentUrl_Path(){return window.location.pathname}function ci_getCurrentUrl_Href(){return window.location.href}function ci_addEvent(d,c,b){try{if(d.addEventListener){d.addEventListener(c,b,false)}else{if(d.attachEvent){d.attachEvent("on"+c,b)}else{}}}catch(a){ci_msg("message=error_in_adding_event_function&error="+a)}}function ci_loadEvent(a){try{if(document.readyState==="complete"){setTimeout(a,1000)}else{ci_addEvent(window,"load",function(){if(document.readyState==="complete"){setTimeout(a,3000)}})}}catch(b){ci_msg("message=error_in_adding_load_event_function&error="+b)}}var ci_XmlHttpRequest=function(){var a;if(window.XDomainRequest){a=new XDomainRequest()}else{if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{if(window.ActiveXObject){a=new ActiveXObject("Microsoft.XMLHTTP")}}}return a},ci_msg=function(e){var b=navigator.userAgent||"",d=ci_XmlHttpRequest(),f=b.match(/bot|spider|crawl|mediapartners|archive|slurp|agent|grab/i)?!0:!1,c=encodeURIComponent(ci_getCurrentUrl_Href());if(!f){d.open("GET",document.location.protocol+ci_config.errorUrl+ci_config.merchant_id+"?item="+c+"&"+e,true);d.send()}},ci_lowercase=function(a){if(a){if(typeof a=="string"){return a.toLowerCase()}else{return a}}else{return""}},ci_Async=function(c,d,f){var b;var a;if(window.XDomainRequest){a=new window.XDomainRequest();a.timeout=2000;a.ontimeout=function(){ci_msg("ci_message_type=Serving_Api_Error&message=timeout_error")};a.onload=function(){var g=new Date().getTime();ci_getRequest({latency:(g-e)});try{b=JSON.parse(a.responseText);f(c,b)}catch(h){ci_msg("ci_message_type=Serving_Api_Error&message=xmlparse_error");f(c,{})}};a.open("GET",d)}else{if(window.XMLHttpRequest){a=new XMLHttpRequest();a.open("GET",d,true);a.timeout=2000;a.ontimeout=function(){ci_msg("ci_message_type=Serving_Api_Error&message=timeout_error")};a.onreadystatechange=function(){if(a.readyState==4){if(a.status==200||a.status==304){try{var g=new Date().getTime();ci_getRequest({latency:(g-e)});b=JSON.parse(a.responseText);f(c,b)}catch(h){ci_msg("ci_message_type=Serving_Api_Error&message=xmlparse_error");f(c,{})}}}}}}var e=new Date().getTime();a.send()},ci_addProduct=function(h){var k=ci_getCiCookie("ci_prodId")||"",j=document.domain.split("."),d="";for(var e=j.length-1;e>=j.length-2;e--){d=j.slice(e).join(".")}var a="";if(k){var c=k.split("!!");var b=new Date().getTime();for(var e=0;e<c.length;e++){if(c[e]){var f=c[e].split(":")[0];var g=c[e].split(":")[1];if((g+30*24*60*60*1000>=b)&&f!=h){a=a+f+":"+g+"!!"}}}}a=a+h+":"+(new Date().getTime());document.cookie="ci_prodId="+a+"; domain="+ +" ; path=/;"},filterProds=function(f,b,e){var d=[];if(f[b]){for(var a=0;a<f[b].length;a++){var c=f[b][a]["ci_item"];if(e.indexOf(c)==-1){d.push(f[b][a])}}}return{type:d}},ci_clientSideFilter=function(d,e){var c=ci_getCiCookie("ci_prodId=");var a="";if(c){c=c.split("!!");for(var b=0;b<c.length;b++){a+=c[b].split(":")[0]+","}}return filterProds(e,d,a)},getRec=function(c,a,h){var b=ci_config.merchant_id||"1",f="http://serve.expertrec.com/v2/rec/"+b+"/?",g="";item=encodeURIComponent(a.split(/(\?|#)/g)[0]);try{g=ci_getCiCookie("ci_id=");f+="type="+c+"&item="+item;var e=function(j,k){if(k){h(k[j])}else{h([])}};ci_Async(c,f,e)}catch(d){ci_msg("ci_message_type=Serving_Api_Error&message="+d.message);h([])}};var expertrec={vav:function(a,b){return getRec(2,a,b)},veb:function(a,b){return getRec(3,a,b)},recItems:function(a){return getRec(4,a)},sp:function(a,b){return getRec(5,a,b)},trending:function(a){return getRec(6,a)},tops:function(a){return getRec(7,a)}};var ci_rec=expertrec;function ci_postRequest(a,f){try{var d=window.location.protocol+ci_config.loggingUrl+ci_config.merchant_id+"/"+f,c=ci_XmlHttpRequest();c.onreadystatechange=function(){if(c.readyState==4&&!(c.status>=200&&c.status<400)){ci_msg("message=error_in_post_request&error=200-not-found&status="+c.status)}};c.open("POST",d,true);c.setRequestHeader("Content-Type","application/json");c.send(a)}catch(b){ci_msg("message=error_in_sending_post_request&error="+b)}}function ci_getRequest(d){try{var b=ci_getCurrentUrl_Href(),g=ci_getCiCookie("ci_id="),c="&",h=window.location.protocol+ci_config.loggingUrl+ci_config.merchant_id+"?user="+g;for(var a in d){h+=c+a+"="+d[a]}h+="&url="+encodeURIComponent(b);xhr=ci_XmlHttpRequest();xhr.onreadystatechange=function(){if(xhr.readyState==4&&!(xhr.status>=200&&xhr.status<400)){ci_msg("error=200-not-found&status="+xhr.status)}};xhr.open("GET",h,true);xhr.send()}catch(f){ci_msg("message=error_in_sending_get_request&error="+f)}}if(/MSIE|Trident/.test(navigator.userAgent)){var head=document.head||document.getElementsByTagName("head")[0],script=document.createElement("script");script.type="text/javascript",script.readyState?script.onreadystatechange=function(){("loaded"===script.readyState||"complete"===script.readyState)&&(script.onreadystatechange=null,expertpath.install())}:script.onload=function(){expertpath.install()},script.src="//expertrec.com/rec/expertrec_xpath.js";head.appendChild(script)}var ci_parseServerEvent=function(o){var g={},k="",q=0,a="",j="",c="",l=[],d="",b=[],m="",n=o.length;try{for(q;q<n;q++){g={};for(a in o[q]["param"]){if(a=="element_content"){j=o[q]["param"][a];d=o[q]["param"]["element_len"];if(d&&d.length>0){m=document.evaluate(d,document,null,9,null).singleNodeValue;b=m?m.children:[];for(var f=1;f<=b.length;f++){c=j.replace("offset",f);k=document.evaluate(c,document,null,9,null).singleNodeValue;if(k&&k.nodeName.toLowerCase()=="img"){l.push(encodeURIComponent(k.src))}else{if(k&&k.nodeName.toLowerCase()=="a"){l.push(encodeURIComponent(k.href))}else{if(k&&k.nodeName.toLowerCase()=="input"){l.push(k.value)}else{if(k){l.push(k.textContent)}}}}}}}else{if(a=="element_len"){continue}else{k=document.evaluate(o[q]["param"][a],document,null,9,null).singleNodeValue;if(k&&k.nodeName.toLowerCase()=="img"){g[a]=encodeURIComponent(k.src)}else{if(k&&k.nodeName.toLowerCase()=="a"){g[a]=encodeURIComponent(k.href)}else{if(k&&k.nodeName.toLowerCase()=="input"){g[a]=k.value}else{if(k){g[a]=k.textContent}else{if(a=="item"&&o[q]["param"][a]=="current_url"){g[a]=encodeURIComponent(ci_getCurrentUrl_Href())}}}}}}}}g.event=o[q]["event"];if(o[q]["event"].trim()=="item"||o[q]["event"].trim()=="user"){g.item=encodeURIComponent(ci_getCurrentUrl_Href().split("?")[0]);g.url=encodeURIComponent(ci_getCurrentUrl_Href().split("?")[0]);ci_postRequest(JSON.stringify(g),o[q]["event"].trim())}else{if(l.length>0){for(var f=0;f<l.length;f++){g.item=l[f];ci_getRequest(g)}}else{ci_getRequest(g)}}}}catch(h){ci_msg("message=error_in_ci_parseServerEvent&error="+h)}},ci_getElementLen=function(d){var c=[],a=[];c=d.split("/");for(var b=0;b<c.length;b++){if(c[b].indexOf("offset")>-1){break}else{a.push(c[b])}}return a.join("/")},ci_getEachElementXpath=function(a,c){var b=function(h,m,l){var g=[],d=m.match(/offset/g).length,j="",e=[];if(d==1){j=document.evaluate(h,document,null,9,null).singleNodeValue;e=j?j.children:[];for(var f=1;f<=e.length;f++){g.push(m.replace("offset",f))}}else{j=document.evaluate(h,document,null,9,null).singleNodeValue;e=j?j.children:[];for(var f=1,k="";f<=e.length;f++){k=m.replace("offset",f);h=ci_getElementLen(k);g.push(l(h,k))}}return g.join(",")};return b(a,c,ci_getEachElementXpath)},ci_onclickDataPicker=function(a,g){var c,f,d,b,e=g.match(/offset/g)?g.match(/offset/g).length:0;for(c=0;c<e;c++){f=g.substring(0,g.indexOf("offset")),d=a.split(f)[1],b=d.charAt(0);g=g.replace("offset",b)}return g},ci_iterateClickCall=function(a,f,c){try{var b=document.evaluate(a,document,null,9,null).singleNodeValue;if(b){ci_addEvent(b,"click",function(g){var h=ci_getXpath(g.target),e;data_picker=f.param["data_picker"]?f.param["data_picker"]:false;if(data_picker){f.param["item"]=ci_onclickDataPicker(h,data_picker)}else{e=document.evaluate(h,document,null,9,null).singleNodeValue;f.param["item"]=e&&(e.nodeName.toLowerCase()=="a"&&(e.href&&e.href.indexOf("javascript")==-1))?h:f.param["item"]}ci_parseServerEvent(c.serverEvents)})}}catch(d){ci_msg("message=error_in_ci_iterateClickCall&error="+d)}},ci_onclick_event=function(p){var c=[],o="",k="",d="",l="",q=0,b=[],m=p.serverEvents?p.serverEvents.length:0;try{for(q;q<m;q++){d=p.serverEvents[q]["param"]["element_len"]?p.serverEvents[q]["param"]["element_len"]:"";if((d&&d.length>0)&&(p.eventpath&&p.eventpath.indexOf("offset")>-1)){var a=p.eventpath.match(/offset/g).length;if(a==1){l=document.evaluate(d,document,null,9,null).singleNodeValue;c=l?l.children:[];for(var g=1;g<=c.length;g++){k=p.eventpath.replace("offset",g);ci_iterateClickCall(k,p.serverEvents[q],p)}}else{l=document.evaluate(d,document,null,9,null).singleNodeValue,c=l?l.children:[];for(var g=1,n="";g<=c.length;g++){n=p.eventpath.replace("offset",g);d=ci_getElementLen(n);b.push(ci_getEachElementXpath(d,n))}b=b.join(",").split(",");for(var f=0;f<b.length;f++){if(!b[f].length){continue}else{ci_iterateClickCall(b[f],p.serverEvents[q],p)}}}}else{o=document.evaluate(p.eventpath,document,null,9,null).singleNodeValue;if(o){ci_addEvent(o,"click",function(){ci_parseServerEvent(p.serverEvents)})}}}}catch(h){ci_msg("message=error_in_ci_onclick_event&error="+h)}},ci_onload_event=function(a){ci_parseServerEvent(a)},expert_FinalXpath="",ci_getXpath=function(b){expert_FinalXpath="";var a=b.nodeName;while(a!="BODY"){b=ci_getIndex(b);a=b.nodeName}expert_FinalXpath="/"+expert_FinalXpath;return expert_FinalXpath},ci_getIndex=function(e){var b=e.nodeName,f=e.parentNode,a=f.getElementsByTagName(b),d,c=1;for(i=0;i<a.length;i++){if(a[i].parentNode==f){if(a[i]==e){d=c}c++}}expert_FinalXpath="/"+b.toLowerCase()+"["+d+"]"+expert_FinalXpath;return f},ci_driver=function(b){try{var d=0,c="";for(d=0;d<b.length;d++){for(c in b[d]){if(b[d][c]["event"].trim()=="onload"){ci_onload_event(b[d][c]["serverEvents"])}if(b[d][c]["event"].trim()=="onclick"){ci_onclick_event(b[d][c])}}}}catch(f){ci_msg("message=error_in_ci_driver&error="+f)}},ci_wrapperFallback=function(d){var c=document.head||document.getElementsByTagName("head")[0],b=window.location.hostname.replace(/\./g,""),a=document.createElement("script");a.type="text/javascript",a.readyState?a.onreadystatechange=function(){("loaded"===a.readyState||"complete"===a.readyState)&&(a.onreadystatechange=null,d())}:a.onload=function(){d()},a.src="//expertrec.com/config/ci_"+b+".js";c.appendChild(a)},ci_wrapper=function(){try{var pattern="",cur_url=ci_getCurrentUrl_Path(),a=Object.keys(ci_json);for(pattern in ci_json){if(a[a.length-1]!=pattern&&cur_url.match(eval(pattern))){ci_driver(ci_json[pattern]);break}else{if(a[a.length-1]==pattern){ci_driver(ci_json[pattern])}}}}catch(e){ci_msg("message=error_in_ci_wrapper&error="+e)}},ci_wrapper_init=function(){if(typeof ci_json!="undefined"){ci_wrapper()}else{ci_wrapperFallback(ci_wrapper)}};ci_loadEvent(ci_wrapper_init);